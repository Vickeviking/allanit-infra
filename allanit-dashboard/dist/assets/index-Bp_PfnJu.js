import{e as rt,r as S,m as lt,a as ht,i as fe,b as nt,t as _t,g as wt,o as kt,w as xe,n as it,c as $t,d as U,f as St,h as Ct,j as se,k as a,l as e,p as ye,q as E,s as H,v as Q,u as t,x as te,y as dt,z as s,A as de,B as W,C as G,D as Y,E as Te,F as N,G as K,H as pe,I as oe,J as he,K as ie,L as X,M as Ie,N as jt,O as J,P as Be,Q as $e,R as ve,S as Tt,T as Mt,U as At,V as Vt}from"./vendor-BC7hxbXN.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))d(c);new MutationObserver(c=>{for(const g of c)if(g.type==="childList")for(const v of g.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&d(v)}).observe(document,{childList:!0,subtree:!0});function u(c){const g={};return c.integrity&&(g.integrity=c.integrity),c.referrerPolicy&&(g.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?g.credentials="include":c.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function d(c){if(c.ep)return;c.ep=!0;const g=u(c);fetch(c.href,g)}})();/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let ut;const we=r=>ut=r,ct=Symbol();function Me(r){return r&&typeof r=="object"&&Object.prototype.toString.call(r)==="[object Object]"&&typeof r.toJSON!="function"}var be;(function(r){r.direct="direct",r.patchObject="patch object",r.patchFunction="patch function"})(be||(be={}));function zt(){const r=rt(!0),i=r.run(()=>S({}));let u=[],d=[];const c=lt({install(g){we(c),c._a=g,g.provide(ct,c),g.config.globalProperties.$pinia=c,d.forEach(v=>u.push(v)),d=[]},use(g){return this._a?u.push(g):d.push(g),this},_p:u,_a:null,_e:r,_s:new Map,state:i});return c}const pt=()=>{};function Oe(r,i,u,d=pt){r.push(i);const c=()=>{const g=r.indexOf(i);g>-1&&(r.splice(g,1),d())};return!u&&wt()&&kt(c),c}function me(r,...i){r.slice().forEach(u=>{u(...i)})}const Et=r=>r(),Ue=Symbol(),Se=Symbol();function Ae(r,i){r instanceof Map&&i instanceof Map?i.forEach((u,d)=>r.set(d,u)):r instanceof Set&&i instanceof Set&&i.forEach(r.add,r);for(const u in i){if(!i.hasOwnProperty(u))continue;const d=i[u],c=r[u];Me(c)&&Me(d)&&r.hasOwnProperty(u)&&!fe(d)&&!nt(d)?r[u]=Ae(c,d):r[u]=d}return r}const Lt=Symbol();function It(r){return!Me(r)||!r.hasOwnProperty(Lt)}const{assign:ce}=Object;function Bt(r){return!!(fe(r)&&r.effect)}function Dt(r,i,u,d){const{state:c,actions:g,getters:v}=i,b=u.state.value[r];let T;function w(){b||(u.state.value[r]=c?c():{});const R=$t(u.state.value[r]);return ce(R,g,Object.keys(v||{}).reduce((m,n)=>(m[n]=lt(U(()=>{we(u);const o=u._s.get(r);return v[n].call(o,o)})),m),{}))}return T=mt(r,w,i,u,d,!0),T}function mt(r,i,u={},d,c,g){let v;const b=ce({actions:{}},u),T={deep:!0};let w,R,m=[],n=[],o;const x=d.state.value[r];!g&&!x&&(d.state.value[r]={}),S({});let p;function k(z){let P;w=R=!1,typeof z=="function"?(z(d.state.value[r]),P={type:be.patchFunction,storeId:r,events:o}):(Ae(d.state.value[r],z),P={type:be.patchObject,payload:z,storeId:r,events:o});const y=p=Symbol();it().then(()=>{p===y&&(w=!0)}),R=!0,me(m,P,d.state.value[r])}const _=g?function(){const{state:P}=u,y=P?P():{};this.$patch(h=>{ce(h,y)})}:pt;function L(){v.stop(),m=[],n=[],d._s.delete(r)}const j=(z,P="")=>{if(Ue in z)return z[Se]=P,z;const y=function(){we(d);const h=Array.from(arguments),Z=[],q=[];function re(B){Z.push(B)}function le(B){q.push(B)}me(n,{args:h,name:y[Se],store:V,after:re,onError:le});let O;try{O=z.apply(this&&this.$id===r?this:V,h)}catch(B){throw me(q,B),B}return O instanceof Promise?O.then(B=>(me(Z,B),B)).catch(B=>(me(q,B),Promise.reject(B))):(me(Z,O),O)};return y[Ue]=!0,y[Se]=P,y},ee={_p:d,$id:r,$onAction:Oe.bind(null,n),$patch:k,$reset:_,$subscribe(z,P={}){const y=Oe(m,z,P.detached,()=>h()),h=v.run(()=>xe(()=>d.state.value[r],Z=>{(P.flush==="sync"?R:w)&&z({storeId:r,type:be.direct,events:o},Z)},ce({},T,P)));return y},$dispose:L},V=ht(ee);d._s.set(r,V);const f=(d._a&&d._a.runWithContext||Et)(()=>d._e.run(()=>(v=rt()).run(()=>i({action:j}))));for(const z in f){const P=f[z];if(fe(P)&&!Bt(P)||nt(P))g||(x&&It(P)&&(fe(P)?P.value=x[z]:Ae(P,x[z])),d.state.value[r][z]=P);else if(typeof P=="function"){const y=j(P,z);f[z]=y,b.actions[z]=P}}return ce(V,f),ce(_t(V),f),Object.defineProperty(V,"$state",{get:()=>d.state.value[r],set:z=>{k(P=>{ce(P,z)})}}),d._p.forEach(z=>{ce(V,v.run(()=>z({store:V,app:d._a,pinia:d,options:b})))}),x&&g&&u.hydrate&&u.hydrate(V.$state,x),w=!0,R=!0,V}/*! #__NO_SIDE_EFFECTS__ */function De(r,i,u){let d,c;const g=typeof i=="function";typeof r=="string"?(d=r,c=g?u:i):(c=r,d=r.id);function v(b,T){const w=Ct();return b=b||(w?St(ct,null):null),b&&we(b),b=ut,b._s.has(d)||(g?mt(d,i,c,b):Dt(d,c,b)),b._s.get(d)}return v.$id=d,v}const Rt="/assets/LogoDesign-COun5ivo.png",Ft={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},Ht={class:"max-w-md w-full space-y-8"},Zt={class:"rounded-md shadow-sm -space-y-px"},Pt={key:0,class:"text-red-600 text-sm text-center"},Ot=["disabled"],Ut=se({__name:"LoginView",setup(r){dt();const i=S(""),u=S(""),d=S(!1),c=S("");function g(){d.value=!0,c.value="",setTimeout(()=>{localStorage.setItem("isAuthenticated","true"),localStorage.setItem("user",JSON.stringify({username:i.value||"admin",name:"Administratör"})),window.location.href="/",d.value=!1},500)}function v(){i.value="admin",u.value="admin",g()}return(b,T)=>(s(),a("div",Ft,[e("div",Ht,[T[5]||(T[5]=e("div",null,[e("div",{class:"flex justify-center"},[e("img",{src:Rt,alt:"Allanit Logo",class:"h-8 w-auto"})]),e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Logga in på Moderbolags Portal "),e("p",{class:"mt-2 text-center text-sm text-gray-600"}," Allanit Service & Industrimålning i Stockholm AB ")],-1)),e("form",{class:"mt-8 space-y-6",onSubmit:ye(g,["prevent"])},[e("div",Zt,[e("div",null,[T[2]||(T[2]=e("label",{for:"username",class:"sr-only"},"Användarnamn",-1)),H(e("input",{id:"username","onUpdate:modelValue":T[0]||(T[0]=w=>i.value=w),name:"username",type:"text",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Användarnamn"},null,512),[[Q,i.value]])]),e("div",null,[T[3]||(T[3]=e("label",{for:"password",class:"sr-only"},"Lösenord",-1)),H(e("input",{id:"password","onUpdate:modelValue":T[1]||(T[1]=w=>u.value=w),name:"password",type:"password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Lösenord"},null,512),[[Q,u.value]])])]),c.value?(s(),a("div",Pt,t(c.value),1)):E("",!0),e("div",null,[e("button",{type:"submit",disabled:d.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},t(d.value?"Loggar in...":"Logga in"),9,Ot)]),T[4]||(T[4]=e("div",{class:"text-center text-sm text-gray-600"},[e("p",null,"Demo-inloggning:"),e("p",null,[te("Användarnamn: "),e("strong",null,"admin")]),e("p",null,[te("Lösenord: "),e("strong",null,"admin")]),e("p",{class:"mt-2 text-xs"},"Eller skriv vad som helst - allt godkänns!")],-1)),e("div",{class:"text-center"},[e("button",{type:"button",onClick:v,class:"text-sm text-blue-600 hover:text-blue-800 underline"}," Snabb-inloggning (klicka här) ")])],32)])]))}});function Nt(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}function Kt(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"})])}function Ne(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function qt(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function Wt(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}function Ve(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function Gt(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Ke(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"})])}function Jt(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function gt(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function qe(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})])}function ze(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function Ce(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function je(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Yt(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})])}function vt(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"})])}function Qt(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}function We(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})])}function _e(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function Xt(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}function Ee(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}function Le(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}function es(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function ge(r,i){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const ts=[{id:1,external_id:"CUST-001",name:"BRF Akvarellen",email:"styrelse@akvarellen.example",phone:"08-123 45 67",org_no:"556123-4567",created_at:"2024-01-15T09:00:00Z",updated_at:"2025-10-08T14:30:00Z"},{id:2,external_id:"CUST-002",name:"BRF Vårby Gård",email:"kontakt@varbygard.example",phone:"08-234 56 78",org_no:"556234-5678",created_at:"2024-02-20T10:15:00Z",updated_at:"2025-10-07T16:45:00Z"},{id:3,external_id:"CUST-003",name:"BRF Gläntan",email:"styrelse@glantan.example",phone:"08-345 67 89",org_no:"556345-6789",created_at:"2024-03-10T11:30:00Z",updated_at:"2025-10-06T12:20:00Z"},{id:4,external_id:"CUST-004",name:"P-Garage Norden AB",email:"drift@pgarage-norden.example",phone:"08-456 78 90",org_no:"556456-7890",created_at:"2024-04-05T08:45:00Z",updated_at:"2025-10-05T09:15:00Z"},{id:5,external_id:"CUST-005",name:"BRF Solbacken",email:"info@solbacken.example",phone:"08-567 89 01",org_no:"556567-8901",created_at:"2024-05-12T13:20:00Z",updated_at:"2025-10-04T15:30:00Z"},{id:6,external_id:"CUST-006",name:"Fastighets AB Ekholmen",email:"forvaltning@ekholmen.example",phone:"08-678 90 12",org_no:"556678-9012",created_at:"2024-06-18T14:10:00Z",updated_at:"2025-10-03T11:45:00Z"},{id:7,external_id:"CUST-007",name:"BRF Rosenlund",email:"styrelse@rosenlund.example",phone:"08-789 01 23",org_no:"556789-0123",created_at:"2024-07-22T16:00:00Z",updated_at:"2025-10-02T13:20:00Z"},{id:8,external_id:"CUST-008",name:"Garage Syd AB",email:"service@garagesyd.example",phone:"08-890 12 34",org_no:"556890-1234",created_at:"2024-08-30T12:30:00Z",updated_at:"2025-10-01T10:15:00Z"}],ss=[{id:11,external_id:"PO-201",customer_id:2,status:"open",description:"Vinterunderhåll 24/7 beredskap – BRF Vårby Gård",amount:12500,created_at:"2025-10-02T09:00:00Z",updated_at:"2025-10-04T12:00:00Z"},{id:12,external_id:"PO-202",customer_id:3,status:"open",description:"Trappstädning månadsavtal – BRF Gläntan",amount:6200,created_at:"2025-10-03T10:00:00Z",updated_at:"2025-10-03T10:00:00Z"},{id:13,external_id:"PO-203",customer_id:1,status:"completed",description:"Miljörumsservice kvartalsvis – BRF Akvarellen",amount:3200,created_at:"2025-09-15T08:30:00Z",updated_at:"2025-09-30T16:00:00Z"},{id:14,external_id:"PO-204",customer_id:4,status:"open",description:"Garageunderhåll och säkerhetskontroll – P-Garage Norden",amount:8500,created_at:"2025-10-01T11:15:00Z",updated_at:"2025-10-05T14:30:00Z"},{id:15,external_id:"PO-205",customer_id:5,status:"in_progress",description:"Storstädning trapphus A-D – BRF Solbacken",amount:4800,created_at:"2025-09-28T13:45:00Z",updated_at:"2025-10-06T09:20:00Z"},{id:16,external_id:"PO-206",customer_id:6,status:"open",description:"Skyddsrumsunderhåll årlig kontroll – Fastighets AB Ekholmen",amount:15e3,created_at:"2025-10-07T10:00:00Z",updated_at:"2025-10-07T10:00:00Z"},{id:17,external_id:"PO-207",customer_id:7,status:"completed",description:"Vinterberedskap och saltning – BRF Rosenlund",amount:7200,created_at:"2025-09-20T09:30:00Z",updated_at:"2025-10-01T17:00:00Z"},{id:18,external_id:"PO-208",customer_id:8,status:"open",description:"Garageportreparation och underhåll – Garage Syd AB",amount:11200,created_at:"2025-10-06T14:20:00Z",updated_at:"2025-10-08T11:45:00Z"},{id:19,external_id:"PO-209",customer_id:2,status:"in_progress",description:"Extra storstädning efter renovering – BRF Vårby Gård",amount:3800,created_at:"2025-10-05T16:00:00Z",updated_at:"2025-10-07T12:30:00Z"},{id:20,external_id:"PO-210",customer_id:3,status:"open",description:"Miljörumsservice och återvinningsstation – BRF Gläntan",amount:2900,created_at:"2025-10-08T08:15:00Z",updated_at:"2025-10-08T08:15:00Z"}],as=[{id:"101",employeeId:"1",title:"Ledarskapsutbildning genomförd",body:"Genomfört ledarskapsutbildning med fokus på digitalisering och moderna arbetsmetoder. Kursen gav värdefulla insikter om teamledning och kommunikation. Planerar att implementera nya arbetsmetoder från nästa månad.",createdAt:"2025-09-20T10:00:00Z",updatedAt:"2025-09-20T10:00:00Z",author:"Tobias Högberg",tags:["utbildning","ledarskap","digitalisering","teamledning"],category:"training",priority:"medium",status:"published",attachments:["certifikat_ledarskap.pdf"]},{id:"102",employeeId:"2",title:"Ny utrustning levererad",body:"Nytt städkit uthämtat, inklusive miljövänliga rengöringsmedel och förbättrade verktyg för effektivare arbete. Utrustningen kommer att förbättra vår arbetsmiljö och effektivitet avsevärt.",createdAt:"2025-10-01T14:30:00Z",updatedAt:"2025-10-01T14:30:00Z",author:"Alfons Högberg",tags:["utrustning","miljövänlig","effektivitet","städkit"],category:"equipment",priority:"high",status:"published",attachments:["leveransnota_utrustning.pdf","bilder_ny_utrustning.jpg"]},{id:"103",employeeId:"3",title:"Utmärkt feedback från kund",body:"Utmärkt arbete med vinterberedskap på BRF Vårby Gård. Kunden var mycket nöjd med den professionella service och snabba respons. Fick även förslag på framtida samarbeten.",createdAt:"2025-10-08T16:45:00Z",updatedAt:"2025-10-08T16:45:00Z",author:"Janus",tags:["kundnöjdhet","vinterberedskap","feedback","BRF Vårby Gård"],category:"customer",priority:"medium",status:"published",attachments:["kundfeedback_vinterberedskap.pdf"]},{id:"104",employeeId:"4",title:"Sjukfrånvaro",body:"Sjukfrånvaro p.g.a. magsjuka, beräknas vara hemma och skita i 3 veckor. Skickat krya på dig-kort. Tobias tar över mina uppgifter under frånvaron.",createdAt:"2025-10-09T08:00:00Z",updatedAt:"2025-10-09T08:00:00Z",author:"Johan Liljenberg",tags:["sjukfrånvaro","magsjuka","uppgiftsöverlämning"],category:"general",priority:"high",status:"published"},{id:"105",employeeId:"4",title:"Extra arbetspass planerat",body:"Planerat extra arbetspass för Industrimålning-projektet nästa vecka. Koordinerat med kund för optimal tidsplanering. Behöver ytterligare material för projektet.",createdAt:"2025-10-05T09:15:00Z",updatedAt:"2025-10-05T09:15:00Z",author:"Johan Liljenberg",tags:["industrimålning","projekt","tidsplanering","material"],category:"work",priority:"medium",status:"published",attachments:["projektplan_industrimålning.pdf"]},{id:"106",employeeId:"1",title:"Månadsrapport oktober",body:"Genomgång av månadens resultat och planering för november. Fokus på vinterberedskap och kundnöjdhet. Ökad omsättning med 15% jämfört med föregående månad.",createdAt:"2025-10-31T15:00:00Z",updatedAt:"2025-10-31T15:00:00Z",author:"Tobias Högberg",tags:["månadsrapport","oktober","vinterberedskap","kundnöjdhet","omsättning"],category:"work",priority:"high",status:"published",attachments:["månadsrapport_oktober_2024.pdf","statistik_oktober.xlsx"]},{id:"107",employeeId:"2",title:"Säkerhetsgenomgång",body:"Genomfört säkerhetsgenomgång av alla arbetsområden. Uppdaterat säkerhetsprotokoll och utbildat teamet. Alla säkerhetsutrustningar kontrollerade och fungerar korrekt.",createdAt:"2025-10-15T11:30:00Z",updatedAt:"2025-10-15T11:30:00Z",author:"Alfons Högberg",tags:["säkerhet","genomgång","protokoll","utbildning","kontroll"],category:"safety",priority:"high",status:"published",attachments:["säkerhetsprotokoll_2024.pdf","kontrollista_säkerhet.pdf"]},{id:"108",employeeId:"3",title:"Kundbesök BRF Gläntan",body:"Besökt BRF Gläntan för genomgång av vinterberedskap. Diskuterat förbättringar och kommande arbeten. Kunden vill ha månatlig service istället för kvartalsvis.",createdAt:"2025-10-12T13:20:00Z",updatedAt:"2025-10-12T13:20:00Z",author:"Janus",tags:["kundbesök","BRF Gläntan","vinterberedskap","förbättringar","service"],category:"customer",priority:"medium",status:"published",attachments:["kundbesök_rapport_BRF_Gläntan.pdf"]},{id:"109",employeeId:"1",title:"Ny medarbetare anställd",body:"Välkommen till Maria Svensson som ny städare! Hon börjar nästa måndag och kommer att arbeta med trappstädning och miljörumsservice. Utbildning planerad för första veckan.",createdAt:"2025-11-01T09:00:00Z",updatedAt:"2025-11-01T09:00:00Z",author:"Tobias Högberg",tags:["anställning","Maria Svensson","utbildning","trappstädning"],category:"work",priority:"high",status:"published",attachments:["anställningskontrakt_Maria_Svensson.pdf"]},{id:"110",employeeId:"2",title:"Underhåll av städutrustning",body:"Genomfört månatligt underhåll av alla städmaskiner och verktyg. Bytt filter i dammsugare och oljat alla rörliga delar. All utrustning fungerar optimalt.",createdAt:"2025-11-02T14:00:00Z",updatedAt:"2025-11-02T14:00:00Z",author:"Alfons Högberg",tags:["underhåll","städmaskiner","filter","oljning","kontroll"],category:"maintenance",priority:"medium",status:"published",attachments:["underhållsrapport_städutrustning.pdf"]}],Ge={employee:[],site:[{id:201,customer_id:4,location:"Garageplan -2",type:"issue",note:"Oljeutsläpp, åtgärdat med absorberingsmedel.",created_at:"2025-10-05T11:10:00Z"},{id:202,customer_id:1,location:"Miljörum",type:"reminder",note:"Sätt upp nya skyltar för kartongvikning.",created_at:"2025-10-08T08:40:00Z"},{id:203,customer_id:2,location:"Trapphus A",type:"maintenance",note:"Regelbunden kontroll av hiss och brandsläckare.",created_at:"2025-10-07T13:20:00Z"},{id:204,customer_id:6,location:"Skyddsrum",type:"inspection",note:"Årlig säkerhetskontroll genomförd - allt OK.",created_at:"2025-10-06T16:00:00Z"},{id:205,customer_id:3,location:"Miljörum",type:"improvement",note:"Förbättrad ventilation efter klagomål från hyresgäster.",created_at:"2025-10-05T12:30:00Z"},{id:206,customer_id:5,location:"Trapphus B",type:"cleaning",note:"Extra storstädning efter renovering av lägenheter.",created_at:"2025-10-04T15:45:00Z"},{id:207,customer_id:7,location:"Utomhus",type:"winter",note:"Vinterberedskap - salt och skovel på plats.",created_at:"2025-10-03T11:00:00Z"},{id:208,customer_id:8,location:"Garageport",type:"repair",note:"Garageportreparation - elektronik kontrollerad.",created_at:"2025-10-02T14:15:00Z"}]},os=[{id:1,name:"Tobias Högberg",role:"Chef",email:"tobias@allanit.se",phone:"08-123 45 67",image:"/medarbetare/tobias.jpg",subsidiary:"Allanit Service AB",status:"active"},{id:4,name:"Johan Liljenberg",role:"Senior Solutions Architect",email:"johan@allanit.se",phone:"08-456 78 90",image:"/medarbetare/johan.jpg",subsidiary:"Industrimålning Stockholm AB",status:"active"},{id:2,name:"Alfons Högberg",role:"Operatör",email:"alfons@allanit.se",phone:"08-234 56 78",image:"/medarbetare/alfons.jpg",subsidiary:"Allanit Service AB",status:"active"},{id:3,name:"Janus",role:"Tekniker",email:"janus@allanit.se",phone:"08-345 67 89",image:"/medarbetare/janus.jpg",subsidiary:"Allanit Service AB",status:"active"}],rs=[{id:1,name:"Allanit Service AB",description:"Trappstädning, garage/skyddsrum, miljörum, vinterunderhåll",employees:3,customers:5,active_orders:8,monthly_revenue:45e3,color:"#3B82F6",established:"2020-03-15",location:"Stockholm, Sverige",services:["Trappstädning","Garageunderhåll","Skyddsrumsunderhåll","Miljörumsservice","Vinterberedskap","Snöröjning","Saltning"],contact:{email:"info@allanit.se",phone:"08-123 456 78",address:"Storgatan 123, 123 45 Stockholm"},performance:{customer_satisfaction:4.8,completion_rate:96,growth_rate:15},recent_activities:[{id:"act_001",type:"order",description:"Ny vinterberedskap beställning från BRF Vårby Gård",date:"2024-11-08T10:30:00Z"},{id:"act_002",type:"customer",description:"Kundbesök hos BRF Gläntan för servicegenomgång",date:"2024-11-07T14:15:00Z"},{id:"act_003",type:"employee",description:"Maria Svensson anställd som ny städare",date:"2024-11-01T09:00:00Z"},{id:"act_004",type:"maintenance",description:"Månatligt underhåll av städutrustning genomfört",date:"2024-11-02T14:00:00Z"}]},{id:2,name:"Industrimålning Stockholm AB",description:"Industrimålning, fasadrenovering, specialmålning",employees:1,customers:3,active_orders:2,monthly_revenue:25e3,color:"#10B981",established:"2021-06-01",location:"Stockholm, Sverige",services:["Industrimålning","Fasadrenovering","Specialmålning","Korrosionsskydd","Ytbehandling","Kvalitetskontroll"],contact:{email:"info@industrimålning.se",phone:"08-987 654 32",address:"Industrivägen 45, 123 45 Stockholm"},performance:{customer_satisfaction:4.6,completion_rate:94,growth_rate:8},recent_activities:[{id:"act_005",type:"order",description:"Industrimålning-projekt planerat för nästa vecka",date:"2024-11-05T09:15:00Z"},{id:"act_006",type:"customer",description:"Kundbesök för offert på fasadrenovering",date:"2024-11-03T11:30:00Z"},{id:"act_007",type:"maintenance",description:"Kontroll av målningutrustning och material",date:"2024-11-04T08:45:00Z"}]}],ls=[{id:"email_001",campaign_name:"Vinternyhetsbrev 2024",template_name:"Vinternyhetsbrev 2024",template_id:"tmpl_newsletter_winter",to_count:247,delivered:245,opened:189,clicked:67,bounced:2,unsubscribed:1,sent_at:"2024-11-08T09:15:00Z",tags:["nyhetsbrev","vinter","snöröjning"]},{id:"email_002",campaign_name:"Servicepåminnelse - Snöröjning",template_name:"Servicepåminnelse - Första snön",template_id:"tmpl_service_reminder",to_count:156,delivered:155,opened:142,clicked:89,bounced:1,unsubscribed:0,sent_at:"2024-11-05T14:30:00Z",tags:["påminnelse","snöröjning","vinter"]},{id:"email_003",campaign_name:"Ny tjänst: Miljörumsservice Pro",template_name:"Ny tjänst: Miljörumsservice Pro",template_id:"tmpl_new_service",to_count:89,delivered:88,opened:76,clicked:34,bounced:1,unsubscribed:0,sent_at:"2024-11-01T11:00:00Z",tags:["ny tjänst","miljörum","pro"]},{id:"email_004",campaign_name:"Veckorapport vecka 44",template_name:"Veckorapport - Komplett",template_id:"tmpl_weekly_report",to_count:134,delivered:133,opened:98,clicked:23,bounced:1,unsubscribed:0,sent_at:"2024-10-31T16:45:00Z",tags:["rapport","vecka","statistik"]},{id:"email_005",campaign_name:"Faktura #2024-1145",template_name:"Detaljerad faktura",template_id:"tmpl_invoice_detailed",to_count:67,delivered:67,opened:64,clicked:45,bounced:0,unsubscribed:0,sent_at:"2024-10-28T10:20:00Z",tags:["faktura","betalning"]},{id:"email_006",campaign_name:"Akutservice - Snöröjning",template_name:"Akutservice - Snöröjning",template_id:"tmpl_emergency_service",to_count:23,delivered:23,opened:22,clicked:8,bounced:0,unsubscribed:0,sent_at:"2024-10-25T06:30:00Z",tags:["akut","snöröjning","oväder"]},{id:"email_007",campaign_name:"Vinterberedskap - Påminnelse",template_name:"Servicepåminnelse - Första snön",template_id:"tmpl_service_reminder",to_count:198,delivered:196,opened:167,clicked:78,bounced:2,unsubscribed:1,sent_at:"2024-10-22T13:15:00Z",tags:["påminnelse","vinter","beredskap"]},{id:"email_008",campaign_name:"Veckorapport vecka 43",template_name:"Veckorapport - Komplett",template_id:"tmpl_weekly_report",to_count:145,delivered:144,opened:112,clicked:31,bounced:1,unsubscribed:0,sent_at:"2024-10-18T17:00:00Z",tags:["rapport","vecka","statistik"]},{id:"email_009",campaign_name:"Miljörumsservice - Månadsrapport",template_name:"Veckorapport - Komplett",template_id:"tmpl_weekly_report",to_count:78,delivered:77,opened:65,clicked:19,bounced:1,unsubscribed:0,sent_at:"2024-10-15T12:30:00Z",tags:["rapport","miljörum","månad"]},{id:"email_010",campaign_name:"Faktura #2024-1142",template_name:"Detaljerad faktura",template_id:"tmpl_invoice_detailed",to_count:89,delivered:89,opened:85,clicked:52,bounced:0,unsubscribed:0,sent_at:"2024-10-12T09:45:00Z",tags:["faktura","betalning"]},{id:"email_011",campaign_name:"Trappstädning - Påminnelse",template_name:"Servicepåminnelse - Första snön",template_id:"tmpl_service_reminder",to_count:112,delivered:111,opened:89,clicked:34,bounced:1,unsubscribed:0,sent_at:"2024-10-08T15:20:00Z",tags:["påminnelse","trappstädning","service"]},{id:"email_012",campaign_name:"Veckorapport vecka 41",template_name:"Veckorapport - Komplett",template_id:"tmpl_weekly_report",to_count:156,delivered:155,opened:134,clicked:42,bounced:1,unsubscribed:0,sent_at:"2024-10-04T16:30:00Z",tags:["rapport","vecka","statistik"]}],Je=[{id:"tmpl_newsletter_winter",name:"Vinternyhetsbrev 2024",subject:"❄️ Vinternyheter från Allanit Service - Snöröjning & Vinterunderhåll",tags:["nyhetsbrev","vinter","snöröjning","2024"],html:`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding: 20px;">
        <div style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
          <div style="text-align: center; margin-bottom: 30px;">
            <h1 style="color: #1e40af; font-size: 28px; margin: 0; font-weight: bold;">❄️ Vinternyheter 2024</h1>
            <p style="color: #64748b; font-size: 16px; margin: 10px 0 0 0;">Allanit Service AB</p>
          </div>
          
          <div style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h2 style="margin: 0 0 10px 0; font-size: 22px;">🆕 Ny tjänst: Proaktiv snöröjning</h2>
            <p style="margin: 0; font-size: 16px; opacity: 0.9;">Vi introducerar vår nya proaktiva snöröjningstjänst med väderprognoser och automatisk planering!</p>
          </div>
          
          <div style="margin-bottom: 25px;">
            <h3 style="color: #1e40af; font-size: 20px; margin-bottom: 15px;">📋 Vad ingår i vinterpaketet:</h3>
            <ul style="color: #374151; line-height: 1.6;">
              <li>✅ Proaktiv snöröjning baserat på väderprognoser</li>
              <li>✅ Saltning av gångvägar och parkeringsplatser</li>
              <li>✅ Rensning av tak från snö och is</li>
              <li>✅ 24/7 beredskap vid snöfall</li>
              <li>✅ Månadsrapport med bilder och statistik</li>
            </ul>
          </div>
          
          <div style="background: #f8fafc; padding: 20px; border-radius: 8px; border-left: 4px solid #10b981; margin-bottom: 25px;">
            <h3 style="color: #059669; margin: 0 0 10px 0;">💡 Tips från experterna:</h3>
            <p style="margin: 0; color: #374151;">Boka er snöröjning redan nu för att garantera snabb respons vid första snöfallet. Vi rekommenderar att kontakta oss senast 1 november.</p>
          </div>
          
          <div style="text-align: center; margin: 30px 0;">
            <a href="#" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; font-weight: bold; display: inline-block;">📞 Boka snöröjning nu</a>
          </div>
          
          <div style="border-top: 1px solid #e5e7eb; padding-top: 20px; text-align: center; color: #6b7280; font-size: 14px;">
            <p style="margin: 0;">Allanit Service AB | 📧 info@allanit.se | 📞 08-123 456 78</p>
          </div>
        </div>
      </div>
    `},{id:"tmpl_service_reminder",name:"Servicepåminnelse - Första snön",subject:"⚠️ Påminnelse: Boka snöröjning innan första snöfallet",tags:["påminnelse","snöröjning","vinter","service"],html:`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); padding: 20px;">
        <div style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
          <div style="text-align: center; margin-bottom: 30px;">
            <div style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 15px; border-radius: 50%; width: 80px; height: 80px; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 32px;">
              ⚠️
            </div>
            <h1 style="color: #92400e; font-size: 24px; margin: 0; font-weight: bold;">Viktig påminnelse</h1>
            <p style="color: #64748b; font-size: 16px; margin: 10px 0 0 0;">Allanit Service AB</p>
          </div>
          
          <div style="background: linear-gradient(135deg, #fef3c7, #fde68a); padding: 20px; border-radius: 8px; margin-bottom: 25px; border: 2px solid #f59e0b;">
            <h2 style="margin: 0 0 15px 0; font-size: 20px; color: #92400e;">❄️ Första snöfallet närmar sig!</h2>
            <p style="margin: 0; color: #374151; font-size: 16px; line-height: 1.5;">Enligt väderprognoserna kan första snöfallet komma redan nästa vecka. För att säkerställa att er fastighet är redo, rekommenderar vi att ni bokar snöröjning nu.</p>
          </div>
          
          <div style="margin-bottom: 25px;">
            <h3 style="color: #1e40af; font-size: 18px; margin-bottom: 15px;">🚨 Varför boka nu?</h3>
            <div style="background: #f8fafc; padding: 15px; border-radius: 8px;">
              <p style="margin: 0 0 10px 0; color: #374151;"><strong>⚡ Snabb respons:</strong> Vi garanterar att vara på plats inom 2 timmar efter snöfall</p>
              <p style="margin: 0 0 10px 0; color: #374151;"><strong>💰 Bättre priser:</strong> Tidig bokning ger er rabatt på vinterpaketet</p>
              <p style="margin: 0; color: #374151;"><strong>🛡️ Trygghet:</strong> Inga överraskningar när snön kommer</p>
            </div>
          </div>
          
          <div style="background: #ecfdf5; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h3 style="color: #059669; margin: 0 0 10px 0;">📞 Kontakta oss idag:</h3>
            <p style="margin: 0; color: #374151;">Ring 08-123 456 78 eller svara på detta mail för att boka er snöröjning. Vi har begränsat antal platser kvar för denna vinter!</p>
          </div>
          
          <div style="text-align: center; margin: 30px 0;">
            <a href="#" style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; font-weight: bold; display: inline-block; margin-right: 10px;">📞 Ring oss nu</a>
            <a href="#" style="background: #374151; color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; font-weight: bold; display: inline-block;">📧 Svara på mail</a>
          </div>
          
          <div style="border-top: 1px solid #e5e7eb; padding-top: 20px; text-align: center; color: #6b7280; font-size: 14px;">
            <p style="margin: 0;">Allanit Service AB | 📧 info@allanit.se | 📞 08-123 456 78</p>
            <p style="margin: 5px 0 0 0; font-size: 12px;">Denna påminnelse skickades automatiskt baserat på väderprognoser</p>
          </div>
        </div>
      </div>
    `},{id:"tmpl_new_service",name:"Ny tjänst: Miljörumsservice Pro",subject:"🆕 Ny tjänst: Miljörumsservice Pro - Avancerad sortering & optimering",tags:["ny tjänst","miljörum","sortering","pro"],html:`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%); padding: 20px;">
        <div style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
          <div style="text-align: center; margin-bottom: 30px;">
            <div style="background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 15px; border-radius: 50%; width: 80px; height: 80px; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 32px;">
              🌱
            </div>
            <h1 style="color: #059669; font-size: 26px; margin: 0; font-weight: bold;">🆕 Ny tjänst lanserad!</h1>
            <p style="color: #64748b; font-size: 16px; margin: 10px 0 0 0;">Allanit Service AB</p>
          </div>
          
          <div style="background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 25px; border-radius: 8px; margin-bottom: 25px;">
            <h2 style="margin: 0 0 15px 0; font-size: 22px;">🌱 Miljörumsservice Pro</h2>
            <p style="margin: 0; font-size: 16px; opacity: 0.9;">Vår nya avancerade miljörumsservice med smart sortering, optimering och miljörapportering!</p>
          </div>
          
          <div style="margin-bottom: 25px;">
            <h3 style="color: #1e40af; font-size: 20px; margin-bottom: 15px;">✨ Vad är nytt i Pro-versionen:</h3>
            <div style="display: grid; gap: 15px;">
              <div style="background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #3b82f6;">
                <h4 style="margin: 0 0 8px 0; color: #1e40af; font-size: 16px;">🤖 Smart sortering</h4>
                <p style="margin: 0; color: #374151; font-size: 14px;">AI-driven sortering som optimerar återvinningen automatiskt</p>
              </div>
              <div style="background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                <h4 style="margin: 0 0 8px 0; color: #059669; font-size: 16px;">📊 Miljörapporter</h4>
                <p style="margin: 0; color: #374151; font-size: 14px;">Detaljerade rapporter om er miljöpåverkan och återvinningsgrad</p>
              </div>
              <div style="background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #8b5cf6;">
                <h4 style="margin: 0 0 8px 0; color: #7c3aed; font-size: 16px;">📱 Digital övervakning</h4>
                <p style="margin: 0; color: #374151; font-size: 14px;">Realtidsövervakning via app med notifieringar och schemaläggning</p>
              </div>
            </div>
          </div>
          
          <div style="background: #fef3c7; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h3 style="color: #92400e; margin: 0 0 10px 0;">🎉 Introduktionserbjudande!</h3>
            <p style="margin: 0; color: #374151;">Första 3 månaderna får ni <strong>30% rabatt</strong> på Miljörumsservice Pro. Erbjudandet gäller endast för nya kunder som bokar innan 31 december 2024.</p>
          </div>
          
          <div style="text-align: center; margin: 30px 0;">
            <a href="#" style="background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; font-weight: bold; display: inline-block;">🌱 Boka Pro-tjänsten</a>
          </div>
          
          <div style="border-top: 1px solid #e5e7eb; padding-top: 20px; text-align: center; color: #6b7280; font-size: 14px;">
            <p style="margin: 0;">Allanit Service AB | 📧 info@allanit.se | 📞 08-123 456 78</p>
            <p style="margin: 5px 0 0 0; font-size: 12px;">Miljörumsservice Pro - För en hållbar framtid</p>
          </div>
        </div>
      </div>
    `},{id:"tmpl_weekly_report",name:"Veckorapport - Komplett",subject:"📊 Veckorapport vecka 45 - Allanit Service",tags:["rapport","vecka","statistik","service"],html:`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding: 20px;">
        <div style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
          <div style="text-align: center; margin-bottom: 30px;">
            <h1 style="color: #1e40af; font-size: 26px; margin: 0; font-weight: bold;">📊 Veckorapport</h1>
            <p style="color: #64748b; font-size: 16px; margin: 10px 0 0 0;">Vecka 45, 2024 | Allanit Service AB</p>
          </div>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px;">
            <div style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; padding: 20px; border-radius: 8px; text-align: center;">
              <div style="font-size: 24px; font-weight: bold; margin-bottom: 5px;">12</div>
              <div style="font-size: 14px; opacity: 0.9;">Genomförda service</div>
            </div>
            <div style="background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 20px; border-radius: 8px; text-align: center;">
              <div style="font-size: 24px; font-weight: bold; margin-bottom: 5px;">98%</div>
              <div style="font-size: 14px; opacity: 0.9;">Kundnöjdhet</div>
            </div>
          </div>
          
          <div style="margin-bottom: 25px;">
            <h3 style="color: #1e40af; font-size: 18px; margin-bottom: 15px;">✅ Genomförda arbeten denna vecka:</h3>
            <ul style="color: #374151; line-height: 1.6;">
              <li>🧹 Trappstädning i 3 fastigheter</li>
              <li>🚗 Garageunderhåll i 2 fastigheter</li>
              <li>🌱 Miljörumsservice i 4 fastigheter</li>
              <li>🔧 Vinterberedskap i 3 fastigheter</li>
            </ul>
          </div>
          
          <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h3 style="color: #1e40af; margin: 0 0 15px 0;">📈 Veckans statistik:</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
              <div>
                <div style="font-size: 20px; font-weight: bold; color: #059669;">24h</div>
                <div style="font-size: 12px; color: #6b7280;">Genomsnittlig responstid</div>
              </div>
              <div>
                <div style="font-size: 20px; font-weight: bold; color: #3b82f6;">0</div>
                <div style="font-size: 12px; color: #6b7280;">Klagomål denna vecka</div>
              </div>
            </div>
          </div>
          
          <div style="background: #fef3c7; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h3 style="color: #92400e; margin: 0 0 10px 0;">⚠️ Nästa vecka:</h3>
            <p style="margin: 0; color: #374151;">Vi planerar att genomföra vinterberedskap i ytterligare 5 fastigheter. Kontakta oss om ni har några speciella önskemål eller frågor.</p>
          </div>
          
          <div style="border-top: 1px solid #e5e7eb; padding-top: 20px; text-align: center; color: #6b7280; font-size: 14px;">
            <p style="margin: 0;">Allanit Service AB | 📧 info@allanit.se | 📞 08-123 456 78</p>
            <p style="margin: 5px 0 0 0; font-size: 12px;">Rapporten genereras automatiskt varje fredag</p>
          </div>
        </div>
      </div>
    `},{id:"tmpl_invoice_detailed",name:"Detaljerad faktura",subject:"💰 Faktura #2024-1145 - Allanit Service AB",tags:["faktura","betalning","detaljerad"],html:`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); padding: 20px;">
        <div style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
          <div style="text-align: center; margin-bottom: 30px;">
            <h1 style="color: #1e40af; font-size: 24px; margin: 0; font-weight: bold;">💰 Faktura</h1>
            <p style="color: #64748b; font-size: 16px; margin: 10px 0 0 0;">Allanit Service AB</p>
          </div>
          
          <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <h3 style="color: #374151; font-size: 14px; margin: 0 0 5px 0;">FAKTURANR:</h3>
                <p style="color: #1e40af; font-size: 18px; font-weight: bold; margin: 0;">#2024-1145</p>
              </div>
              <div>
                <h3 style="color: #374151; font-size: 14px; margin: 0 0 5px 0;">FÖRFALLODATUM:</h3>
                <p style="color: #dc2626; font-size: 18px; font-weight: bold; margin: 0;">2024-12-15</p>
              </div>
            </div>
          </div>
          
          <div style="margin-bottom: 25px;">
            <h3 style="color: #1e40af; font-size: 18px; margin-bottom: 15px;">📋 Levererade tjänster:</h3>
            <div style="background: #f8fafc; border-radius: 8px; overflow: hidden;">
              <div style="background: #e5e7eb; padding: 15px; font-weight: bold; color: #374151;">
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 15px;">
                  <div>Tjänst</div>
                  <div style="text-align: right;">Antal</div>
                  <div style="text-align: right;">Belopp</div>
                </div>
              </div>
              <div style="padding: 15px; border-bottom: 1px solid #e5e7eb;">
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 15px; align-items: center;">
                  <div>
                    <div style="font-weight: bold; color: #374151;">Trappstädning</div>
                    <div style="font-size: 12px; color: #6b7280;">Vecka 44-45</div>
                  </div>
                  <div style="text-align: right; color: #374151;">2 veckor</div>
                  <div style="text-align: right; color: #374151;">2 400 kr</div>
                </div>
              </div>
              <div style="padding: 15px; border-bottom: 1px solid #e5e7eb;">
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 15px; align-items: center;">
                  <div>
                    <div style="font-weight: bold; color: #374151;">Miljörumsservice</div>
                    <div style="font-size: 12px; color: #6b7280;">Månadsvis</div>
                  </div>
                  <div style="text-align: right; color: #374151;">1 månad</div>
                  <div style="text-align: right; color: #374151;">1 800 kr</div>
                </div>
              </div>
              <div style="padding: 15px;">
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 15px; align-items: center;">
                  <div>
                    <div style="font-weight: bold; color: #374151;">Vinterberedskap</div>
                    <div style="font-size: 12px; color: #6b7280;">En gång</div>
                  </div>
                  <div style="text-align: right; color: #374151;">1 st</div>
                  <div style="text-align: right; color: #374151;">3 200 kr</div>
                </div>
              </div>
            </div>
          </div>
          
          <div style="background: linear-gradient(135deg, #1e40af, #1d4ed8); color: white; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <div style="font-size: 14px; opacity: 0.9;">TOTAL ATT BETALA</div>
                <div style="font-size: 28px; font-weight: bold;">7 400 kr</div>
              </div>
              <div style="text-align: right;">
                <div style="font-size: 12px; opacity: 0.9;">Inkl. moms (25%)</div>
                <div style="font-size: 16px;">1 480 kr</div>
              </div>
            </div>
          </div>
          
          <div style="background: #ecfdf5; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h3 style="color: #059669; margin: 0 0 10px 0;">💳 Betalningsalternativ:</h3>
            <p style="margin: 0 0 10px 0; color: #374151;"><strong>Bankgiro:</strong> 123-4567</p>
            <p style="margin: 0 0 10px 0; color: #374151;"><strong>Swish:</strong> 08-123 456 78</p>
            <p style="margin: 0; color: #374151;"><strong>Referens:</strong> 2024-1145</p>
          </div>
          
          <div style="border-top: 1px solid #e5e7eb; padding-top: 20px; text-align: center; color: #6b7280; font-size: 14px;">
            <p style="margin: 0;">Allanit Service AB | 📧 info@allanit.se | 📞 08-123 456 78</p>
            <p style="margin: 5px 0 0 0; font-size: 12px;">Tack för att ni väljer Allanit Service!</p>
          </div>
        </div>
      </div>
    `},{id:"tmpl_emergency_service",name:"Akutservice - Snöröjning",subject:"🚨 Akutservice genomförd - Snöröjning efter oväder",tags:["akut","snöröjning","oväder","service"],html:`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%); padding: 20px;">
        <div style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
          <div style="text-align: center; margin-bottom: 30px;">
            <div style="background: linear-gradient(135deg, #dc2626, #b91c1c); color: white; padding: 15px; border-radius: 50%; width: 80px; height: 80px; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 32px;">
              🚨
            </div>
            <h1 style="color: #dc2626; font-size: 24px; margin: 0; font-weight: bold;">Akutservice genomförd</h1>
            <p style="color: #64748b; font-size: 16px; margin: 10px 0 0 0;">Allanit Service AB</p>
          </div>
          
          <div style="background: linear-gradient(135deg, #dc2626, #b91c1c); color: white; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h2 style="margin: 0 0 10px 0; font-size: 20px;">❄️ Snöröjning efter oväder</h2>
            <p style="margin: 0; font-size: 16px; opacity: 0.9;">Vi har genomfört akut snöröjning efter igår kvälls oväder. Alla områden är nu säkra att passera.</p>
          </div>
          
          <div style="margin-bottom: 25px;">
            <h3 style="color: #1e40af; font-size: 18px; margin-bottom: 15px;">✅ Genomförda åtgärder:</h3>
            <ul style="color: #374151; line-height: 1.6;">
              <li>🚗 Snöröjning av alla parkeringsplatser</li>
              <li>🚶‍♂️ Rensning av gångvägar och ingångar</li>
              <li>🧂 Saltning av kritiska områden</li>
              <li>🚪 Rensning av branddörrar och nödutgångar</li>
              <li>📸 Dokumentation med bilder</li>
            </ul>
          </div>
          
          <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h3 style="color: #1e40af; margin: 0 0 15px 0;">📊 Serviceinformation:</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
              <div>
                <div style="font-size: 14px; color: #6b7280;">Genomförd:</div>
                <div style="font-size: 16px; font-weight: bold; color: #374151;">2024-11-08 06:30</div>
              </div>
              <div>
                <div style="font-size: 14px; color: #6b7280;">Arbetstid:</div>
                <div style="font-size: 16px; font-weight: bold; color: #374151;">2 timmar 15 min</div>
              </div>
              <div>
                <div style="font-size: 14px; color: #6b7280;">Snödjup:</div>
                <div style="font-size: 16px; font-weight: bold; color: #374151;">15-20 cm</div>
              </div>
              <div>
                <div style="font-size: 14px; color: #6b7280;">Temperatur:</div>
                <div style="font-size: 16px; font-weight: bold; color: #374151;">-3°C</div>
              </div>
            </div>
          </div>
          
          <div style="background: #ecfdf5; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h3 style="color: #059669; margin: 0 0 10px 0;">✅ Status: Klar</h3>
            <p style="margin: 0; color: #374151;">Alla områden är nu säkra att passera. Vi kommer att övervaka väderprognoserna och är redo för ytterligare åtgärder vid behov.</p>
          </div>
          
          <div style="text-align: center; margin: 30px 0;">
            <a href="#" style="background: linear-gradient(135deg, #dc2626, #b91c1c); color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; font-weight: bold; display: inline-block;">📞 Kontakta oss</a>
          </div>
          
          <div style="border-top: 1px solid #e5e7eb; padding-top: 20px; text-align: center; color: #6b7280; font-size: 14px;">
            <p style="margin: 0;">Allanit Service AB | 📧 info@allanit.se | 📞 08-123 456 78</p>
            <p style="margin: 5px 0 0 0; font-size: 12px;">Akutservice - Vi är här när ni behöver oss som mest</p>
          </div>
        </div>
      </div>
    `}],Ye=[{id:"seg_brf_all",name:"Alla BRF-kunder",filters:{tags:["brf"]},count_hint:3},{id:"seg_vinterberedskap",name:"Vinterberedskap",filters:{tags:["vinter","drift"]},count_hint:2},{id:"seg_miljorum",name:"Miljörumskunder",filters:{tags:["miljörum"]},count_hint:2},{id:"seg_garage",name:"Garagekunder",filters:{tags:["garage"]},count_hint:2},{id:"seg_vip",name:"VIP-kunder",filters:{tags:["vip"]},count_hint:1}],Qe=[{id:1,customer_id:1,role:"Styrelseordf.",name:"Sara Holm",email:"sara@akvarellen.example",tags:["brf"]},{id:2,customer_id:2,role:"Kontaktperson",name:"Jonas Park",email:"jonas@varbygard.example",tags:["brf","vinter"]},{id:3,customer_id:3,role:"Styrelse",name:"Maya Isaksson",email:"styrelse@glantan.example",tags:["brf"]},{id:4,customer_id:4,role:"Driftchef",name:"Lejla M.",email:"drift@pgarage-norden.example",tags:["garage","miljörum"]},{id:5,customer_id:5,role:"Styrelse",name:"Erik Lindberg",email:"styrelse@solbacken.example",tags:["brf"]},{id:6,customer_id:6,role:"Fastighetsskötare",name:"Anna Svensson",email:"anna@ekholmen.example",tags:["kommersiell"]}],Xe=[{id:301,customer_id:2,note:"Avtal för vinter 24/7 förlängt t.o.m. 2026-03-31.",tags:["avtal","vinter"],created_at:"2025-10-02T10:00:00Z"},{id:302,customer_id:3,note:"Önskemål om extra storstädning trapphus B i oktober.",tags:["storstäd"],created_at:"2025-10-03T09:30:00Z"},{id:303,customer_id:1,note:"Miljörum behöver ny ventilation - kolla med tekniker.",tags:["miljörum","teknik"],created_at:"2025-10-04T14:20:00Z"},{id:304,customer_id:4,note:"Garageport fungerar bra efter reparation.",tags:["garage","reparation"],created_at:"2025-10-05T11:15:00Z"},{id:305,customer_id:5,note:"Hyresgäster nöjda med storstädning.",tags:["feedback","storstäd"],created_at:"2025-10-06T16:30:00Z"}],et=[{id:"cmp_weekly_brf",name:"Veckorapport BRF",segment_id:"seg_brf_all",template_id:"tmpl_status_weekly",status:"draft",created_at:"2025-10-06T09:00:00Z"},{id:"cmp_vinter_info",name:"Vinterberedskap Info",segment_id:"seg_vinterberedskap",template_id:"tmpl_vinter_info",status:"sent",created_at:"2025-10-05T14:00:00Z"},{id:"cmp_miljor_service",name:"Miljörumsservice",segment_id:"seg_miljorum",template_id:"tmpl_miljor_service",status:"draft",created_at:"2025-10-04T10:30:00Z"}],tt=[{id:"send_001",campaign_id:"cmp_weekly_brf",sent_at:"2025-10-07T10:10:00Z",to_count:3,delivered:3,opened:2,failed:0},{id:"send_002",campaign_id:"cmp_vinter_info",sent_at:"2025-10-06T14:30:00Z",to_count:2,delivered:2,opened:1,failed:0},{id:"send_003",campaign_id:"cmp_miljor_service",sent_at:"2025-10-05T09:15:00Z",to_count:2,delivered:2,opened:2,failed:0}],st=[{id:234,created_at:"2024-11-08T12:31:45Z",expires_at:"2024-12-08T12:31:45Z",level:"INFO",module:"DbWriter",action:"UPSERT_BATCH",custom_msg:"Inserted 42 customers in 512ms",details:{duration:512,records_affected:42,request_id:"req_abc123"}},{id:235,created_at:"2024-11-08T12:30:22Z",expires_at:"2024-12-08T12:30:22Z",level:"WARN",module:"EmailService",action:"RETRY",custom_msg:"Email delivery failed, retrying in 5 minutes",details:{retry_count:2,error_code:"SMTP_TIMEOUT",request_id:"req_def456"}},{id:236,created_at:"2024-11-08T12:29:15Z",expires_at:"2024-12-08T12:29:15Z",level:"ERROR",module:"PaymentService",action:"ERROR",custom_msg:"Payment processing failed for invoice #2024-1145",details:{error_code:"PAYMENT_DECLINED",user_id:"user_789",request_id:"req_ghi789"}},{id:237,created_at:"2024-11-08T12:28:33Z",expires_at:"2024-12-08T12:28:33Z",level:"INFO",module:"Fetcher",action:"FETCH",custom_msg:"Successfully fetched 156 email templates from API",details:{duration:234,records_affected:156,request_id:"req_jkl012"}},{id:238,created_at:"2024-11-08T12:27:18Z",expires_at:"2024-12-08T12:27:18Z",level:"DEBUG",module:"AuthService",action:"VALIDATION",custom_msg:"Token validation successful for user admin",details:{duration:45,user_id:"admin",request_id:"req_mno345"}},{id:239,created_at:"2024-11-08T12:26:42Z",expires_at:"2024-12-08T12:26:42Z",level:"WARN",module:"Ingestor",action:"TIMEOUT",custom_msg:"Data ingestion timeout after 30 seconds",details:{duration:3e4,error_code:"INGESTION_TIMEOUT",request_id:"req_pqr678"}},{id:240,created_at:"2024-11-08T12:25:56Z",expires_at:"2024-12-08T12:25:56Z",level:"INFO",module:"EmailService",action:"SEND",custom_msg:"Email campaign 'Vinternyhetsbrev 2024' sent to 247 recipients",details:{duration:1200,records_affected:247,request_id:"req_stu901"}},{id:241,created_at:"2024-11-08T12:24:11Z",expires_at:"2024-12-08T12:24:11Z",level:"ERROR",module:"DbWriter",action:"ERROR",custom_msg:"Database connection lost during journal update",details:{error_code:"DB_CONNECTION_LOST",retry_count:3,request_id:"req_vwx234"}},{id:242,created_at:"2024-11-08T12:23:27Z",expires_at:"2024-12-08T12:23:27Z",level:"INFO",module:"NotificationService",action:"SEND",custom_msg:"Push notification sent to 89 mobile devices",details:{duration:180,records_affected:89,request_id:"req_yza567"}},{id:243,created_at:"2024-11-08T12:22:44Z",expires_at:"2024-12-08T12:22:44Z",level:"WARN",module:"DeadLetter",action:"REPROCESS",custom_msg:"Reprocessing 12 failed email deliveries",details:{records_affected:12,retry_count:1,request_id:"req_bcd890"}},{id:244,created_at:"2024-11-08T12:21:59Z",expires_at:"2024-12-08T12:21:59Z",level:"DEBUG",module:"CommandBus",action:"PROCESS",custom_msg:"Processing command: UpdateCustomerProfile",details:{duration:67,user_id:"user_123",request_id:"req_efg123"}},{id:245,created_at:"2024-11-08T12:21:13Z",expires_at:"2024-12-08T12:21:13Z",level:"INFO",module:"Rocket",action:"SUCCESS",custom_msg:"RocketMQ message consumed successfully",details:{duration:23,request_id:"req_hij456"}},{id:246,created_at:"2024-11-08T12:20:28Z",expires_at:"2024-12-08T12:20:28Z",level:"ERROR",module:"PaymentService",action:"ERROR",custom_msg:"Credit card validation failed for customer 456",details:{error_code:"CARD_VALIDATION_FAILED",user_id:"customer_456",request_id:"req_klm789"}},{id:247,created_at:"2024-11-08T12:19:41Z",expires_at:"2024-12-08T12:19:41Z",level:"INFO",module:"DbWriter",action:"UPSERT",custom_msg:"Updated 3 journal entries with new tags",details:{duration:89,records_affected:3,request_id:"req_nop012"}},{id:248,created_at:"2024-11-08T12:18:55Z",expires_at:"2024-12-08T12:18:55Z",level:"WARN",module:"EmailService",action:"RETRY",custom_msg:"SMTP server temporarily unavailable, retrying",details:{retry_count:1,error_code:"SMTP_UNAVAILABLE",request_id:"req_qrs345"}},{id:249,created_at:"2024-11-08T12:18:09Z",expires_at:"2024-12-08T12:18:09Z",level:"DEBUG",module:"AuthService",action:"VALIDATION",custom_msg:"JWT token expires in 15 minutes",details:{user_id:"user_789",request_id:"req_tuv678"}},{id:250,created_at:"2024-11-08T12:17:22Z",expires_at:"2024-12-08T12:17:22Z",level:"INFO",module:"Fetcher",action:"FETCH",custom_msg:"Fetched 67 sent emails from external API",details:{duration:156,records_affected:67,request_id:"req_wxy901"}},{id:251,created_at:"2024-11-08T12:16:38Z",expires_at:"2024-12-08T12:16:38Z",level:"ERROR",module:"Ingestor",action:"ERROR",custom_msg:"Failed to parse JSON response from subsidiary API",details:{error_code:"JSON_PARSE_ERROR",request_id:"req_zab234"}},{id:252,created_at:"2024-11-08T12:15:51Z",expires_at:"2024-12-08T12:15:51Z",level:"INFO",module:"NotificationService",action:"ARCHIVE",custom_msg:"Archived 45 expired log entries",details:{duration:234,records_affected:45,request_id:"req_cde567"}},{id:253,created_at:"2024-11-08T12:15:05Z",expires_at:"2024-12-08T12:15:05Z",level:"WARN",module:"DbWriter",action:"TIMEOUT",custom_msg:"Database query timeout after 10 seconds",details:{duration:1e4,error_code:"QUERY_TIMEOUT",request_id:"req_fgh890"}},{id:254,created_at:"2024-11-08T12:14:18Z",expires_at:"2024-12-08T12:14:18Z",level:"INFO",module:"EmailService",action:"SEND",custom_msg:"Service reminder email sent to 156 customers",details:{duration:890,records_affected:156,request_id:"req_ijk123"}}],at=[{id:1,started_at:"2025-10-08T11:58:00Z",ended_at:"2025-10-08T11:58:04Z",status:"ok",customers:3,orders:2},{id:2,started_at:"2025-10-08T12:15:00Z",ended_at:"2025-10-08T12:15:03Z",status:"ok",customers:0,orders:1},{id:3,started_at:"2025-10-07T14:30:00Z",ended_at:"2025-10-07T14:30:08Z",status:"ok",customers:2,orders:0},{id:4,started_at:"2025-10-07T09:00:00Z",ended_at:"2025-10-07T09:00:12Z",status:"error",customers:0,orders:0}],ot=[{id:1,invoice_number:"INV-2025-001",customer_id:1,amount:15750,status:"paid",due_date:"2025-01-15",created_at:"2025-01-01",description:"Snöröjning januari 2025"},{id:2,invoice_number:"INV-2025-002",customer_id:2,amount:23400,status:"sent",due_date:"2025-02-15",created_at:"2025-01-15",description:"Fastighetsskötsel Q1 2025"},{id:3,invoice_number:"INV-2025-003",customer_id:3,amount:18900,status:"overdue",due_date:"2024-12-15",created_at:"2024-12-01",description:"Vinterunderhåll december 2024"},{id:4,invoice_number:"INV-2025-004",customer_id:1,amount:12600,status:"draft",due_date:"2025-03-15",created_at:"2025-01-20",description:"Snöröjning februari 2025"},{id:5,invoice_number:"INV-2025-005",customer_id:4,amount:31200,status:"paid",due_date:"2025-01-30",created_at:"2025-01-10",description:"Komplett fastighetsskötsel januari 2025"},{id:6,invoice_number:"INV-2025-006",customer_id:2,amount:16800,status:"sent",due_date:"2025-02-28",created_at:"2025-01-25",description:"Snöröjning februari 2025"},{id:7,invoice_number:"INV-2025-007",customer_id:5,amount:22100,status:"overdue",due_date:"2024-11-30",created_at:"2024-11-15",description:"Höstunderhåll november 2024"},{id:8,invoice_number:"INV-2025-008",customer_id:3,amount:14500,status:"draft",due_date:"2025-03-30",created_at:"2025-01-28",description:"Snöröjning mars 2025"},{id:9,invoice_number:"INV-2025-009",customer_id:1,amount:28900,status:"paid",due_date:"2025-02-10",created_at:"2025-01-05",description:"Komplett fastighetsskötsel januari 2025"},{id:10,invoice_number:"INV-2025-010",customer_id:4,amount:19800,status:"sent",due_date:"2025-03-15",created_at:"2025-01-30",description:"Snöröjning februari 2025"},{id:11,invoice_number:"INV-2025-011",customer_id:2,amount:25600,status:"overdue",due_date:"2024-12-30",created_at:"2024-12-10",description:"Vinterunderhåll december 2024"},{id:12,invoice_number:"INV-2025-012",customer_id:5,amount:17200,status:"draft",due_date:"2025-04-15",created_at:"2025-02-01",description:"Snöröjning mars 2025"},{id:13,invoice_number:"INV-2025-013",customer_id:3,amount:33400,status:"paid",due_date:"2025-02-20",created_at:"2025-01-12",description:"Komplett fastighetsskötsel februari 2025"},{id:14,invoice_number:"INV-2025-014",customer_id:1,amount:21300,status:"sent",due_date:"2025-03-30",created_at:"2025-02-05",description:"Snöröjning mars 2025"},{id:15,invoice_number:"INV-2025-015",customer_id:4,amount:18700,status:"overdue",due_date:"2025-01-20",created_at:"2024-12-20",description:"Vinterunderhåll december 2024"}],ne={async get(r){return r.startsWith("/api/customers")?{data:{results:ts}}:r.startsWith("/api/purchase-orders")?{data:{results:ss}}:r.startsWith("/api/mail/templates")?{data:{results:Je}}:r.startsWith("/api/segments")?{data:{results:Ye}}:r.startsWith("/api/contacts")?{data:{results:Qe}}:r.startsWith("/api/journals/employee")?{data:{results:Ge.employee}}:r.startsWith("/api/journals/site")?{data:{results:Ge.site}}:r.startsWith("/api/notes")?{data:{results:Xe}}:r.startsWith("/api/campaigns/sends")?{data:{results:tt}}:r.startsWith("/api/campaigns")?{data:{results:et}}:r.startsWith("/api/logs")?{data:{results:st}}:r.startsWith("/api/sync/history")?{data:{results:at}}:r.startsWith("/api/employees")?{data:{results:os}}:r.startsWith("/api/invoices")?{data:{results:ot}}:r.startsWith("/api/sent-emails")?{data:{results:ls}}:r.startsWith("/api/subsidiaries")?{data:{results:rs}}:r.startsWith("/api/mail/templates")?{data:{results:Je}}:r.startsWith("/api/segments")?{data:{results:Ye}}:r.startsWith("/api/contacts")?{data:{results:Qe}}:r.startsWith("/api/notes")?{data:{results:Xe}}:r.startsWith("/api/campaigns/sends")?{data:{results:tt}}:r.startsWith("/api/campaigns")?{data:{results:et}}:r.startsWith("/api/logs")?{data:{results:st}}:r.startsWith("/api/sync/history")?{data:{results:at}}:r.startsWith("/api/invoices")?{data:{results:ot}}:{data:{results:[]}}},async post(r,i){return{data:{ok:!0,body:i}}},async patch(r,i){return{data:{ok:!0}}},async delete(r){return{data:{ok:!0}}}},ns={class:"space-y-8"},is={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},ds={class:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-2xl p-6 border border-blue-200 shadow-sm hover:shadow-md transition-shadow duration-200"},us={class:"flex items-center justify-between mb-4"},cs={class:"p-3 bg-blue-100 rounded-xl"},ps={class:"text-right"},ms={class:"text-2xl font-bold text-blue-900"},gs={class:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-2xl p-6 border border-green-200 shadow-sm hover:shadow-md transition-shadow duration-200"},vs={class:"flex items-center justify-between mb-4"},xs={class:"p-3 bg-green-100 rounded-xl"},bs={class:"text-right"},fs={class:"text-2xl font-bold text-green-900"},ys={class:"bg-gradient-to-br from-purple-50 to-pink-100 rounded-2xl p-6 border border-purple-200 shadow-sm hover:shadow-md transition-shadow duration-200"},hs={class:"flex items-center justify-between mb-4"},_s={class:"p-3 bg-purple-100 rounded-xl"},ws={class:"text-right"},ks={class:"text-2xl font-bold text-purple-900"},$s={class:"bg-gradient-to-br from-orange-50 to-red-100 rounded-2xl p-6 border border-orange-200 shadow-sm hover:shadow-md transition-shadow duration-200"},Ss={class:"flex items-center justify-between mb-4"},Cs={class:"p-3 bg-orange-100 rounded-xl"},js={class:"text-right"},Ts={class:"text-2xl font-bold text-orange-900"},Ms={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},As={class:"p-8"},Vs={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6"},zs={class:"p-4 bg-blue-100 rounded-2xl mb-3 group-hover:bg-blue-200 transition-colors duration-200"},Es={class:"p-4 bg-green-100 rounded-2xl mb-3 group-hover:bg-green-200 transition-colors duration-200"},Ls={class:"p-4 bg-purple-100 rounded-2xl mb-3 group-hover:bg-purple-200 transition-colors duration-200"},Is={class:"p-4 bg-orange-100 rounded-2xl mb-3 group-hover:bg-orange-200 transition-colors duration-200"},Bs={class:"p-4 bg-indigo-100 rounded-2xl mb-3 group-hover:bg-indigo-200 transition-colors duration-200"},Ds={class:"p-4 bg-pink-100 rounded-2xl mb-3 group-hover:bg-pink-200 transition-colors duration-200"},Rs={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Fs={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},Hs={class:"p-8"},Zs={key:0,class:"space-y-4"},Ps={key:1,class:"space-y-4"},Os={class:"flex items-center space-x-4"},Us=["src","alt"],Ns={class:"font-semibold text-gray-900"},Ks={class:"text-sm text-gray-600"},qs={class:"text-right"},Ws={class:"font-bold text-gray-900"},Gs={class:"text-sm text-gray-500"},Js={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},Ys={class:"p-8"},Qs={key:0,class:"space-y-4"},Xs={key:1,class:"space-y-4"},ea={class:"font-semibold text-gray-900"},ta={class:"text-sm text-gray-600"},sa={class:"text-right"},aa={class:"font-bold text-gray-900"},oa={class:"text-sm text-gray-500"},ra=se({__name:"HomeView",setup(r){const i=S(!1),u=S([]),d=S([]),c=S([]),g=S([]),v=S([]),b=U(()=>d.value.length),T=U(()=>c.value.filter(L=>L.status==="open"||L.status==="in_progress").length),w=U(()=>u.value.reduce((L,j)=>L+j.monthly_revenue,0)),R=U(()=>u.value.reduce((L,j)=>L+j.employees,0)),m=U(()=>c.value.sort((L,j)=>new Date(j.created_at).getTime()-new Date(L.created_at).getTime()).slice(0,5)),n=U(()=>v.value.sort((L,j)=>new Date(j.sent_at).getTime()-new Date(L.sent_at).getTime()).slice(0,5));async function o(){i.value=!0;try{const[L,j,ee,V,M]=await Promise.all([ne.get("/api/subsidiaries"),ne.get("/api/customers"),ne.get("/api/purchase-orders"),ne.get("/api/employees"),ne.get("/api/sent-emails")]);u.value=L.data.results,d.value=j.data.results,c.value=ee.data.results,g.value=V.data.results,v.value=M.data.results}catch(L){console.error("Error loading data:",L)}finally{i.value=!1}}function x(){o()}function p(L){return new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK",minimumFractionDigits:0}).format(L)}function k(L){return new Date(L).toLocaleDateString("sv-SE")}function _(L){return L.toLowerCase().includes("snöröjning")||L.toLowerCase().includes("vinter")?"/src/resources/updrag/Snöröjning.png":L.toLowerCase().includes("miljörum")?"/src/resources/updrag/Miljörum.png":"/src/resources/Generiskbostadsrätt.png"}return de(()=>{o()}),(L,j)=>{const ee=Te("BuildingOfficeIcon");return s(),a("div",ns,[e("div",{class:"flex items-center justify-between"},[j[7]||(j[7]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Översikt"),e("p",{class:"text-gray-600 mt-2"}," Välkommen till Allanit Dashboard - Snabb överblick över verksamheten ")],-1)),e("div",{class:"flex items-center space-x-3"},[e("button",{onClick:x,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 shadow-sm hover:shadow-md flex items-center space-x-2"},[...j[6]||(j[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),e("span",null,"Uppdatera",-1)])])])]),e("div",is,[e("div",ds,[e("div",us,[e("div",cs,[W(G(Ee),{class:"w-6 h-6 text-blue-600"})]),e("div",ps,[e("div",ms,t(b.value),1),j[8]||(j[8]=e("div",{class:"text-sm text-blue-600"},"Aktiva kunder",-1))])]),j[9]||(j[9]=e("div",{class:"flex items-center text-sm text-blue-700"},[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"})]),e("span",{class:"font-medium"},"+2 denna månad")],-1))]),e("div",gs,[e("div",vs,[e("div",xs,[W(G(_e),{class:"w-6 h-6 text-green-600"})]),e("div",bs,[e("div",fs,t(T.value),1),j[10]||(j[10]=e("div",{class:"text-sm text-green-600"},"Aktiva uppdrag",-1))])]),j[11]||(j[11]=e("div",{class:"flex items-center text-sm text-green-700"},[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"})]),e("span",{class:"font-medium"},"+1 denna vecka")],-1))]),e("div",ys,[e("div",hs,[e("div",_s,[W(G(Jt),{class:"w-6 h-6 text-purple-600"})]),e("div",ws,[e("div",ks,t(p(w.value)),1),j[12]||(j[12]=e("div",{class:"text-sm text-purple-600"},"Månadsomsättning",-1))])]),j[13]||(j[13]=e("div",{class:"flex items-center text-sm text-purple-700"},[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"})]),e("span",{class:"font-medium"},"+12% från förra månaden")],-1))]),e("div",$s,[e("div",Ss,[e("div",Cs,[W(G(Le),{class:"w-6 h-6 text-orange-600"})]),e("div",js,[e("div",Ts,t(R.value),1),j[14]||(j[14]=e("div",{class:"text-sm text-orange-600"},"Medarbetare",-1))])]),j[15]||(j[15]=e("div",{class:"flex items-center text-sm text-orange-700"},[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z","clip-rule":"evenodd"})]),e("span",{class:"font-medium"},"Stabil")],-1))])]),e("div",Ms,[j[28]||(j[28]=Y('<div class="px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50"><h3 class="text-xl font-bold text-gray-900 flex items-center"><svg class="w-6 h-6 mr-3 text-blue-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"></path></svg> Snabbåtgärder </h3><p class="text-sm text-gray-600 mt-1">Här kan du snabbt komma åt de vanligaste funktionerna</p></div>',1)),e("div",As,[e("div",Vs,[e("button",{onClick:j[0]||(j[0]=V=>L.$router.push("/email-management")),class:"group flex flex-col items-center p-6 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-2xl transition-all duration-200 border border-transparent hover:border-blue-200 hover:shadow-md"},[e("div",zs,[W(G(vt),{class:"w-8 h-8 text-blue-600"})]),j[16]||(j[16]=e("span",{class:"text-sm font-semibold text-center"},"E-posthantering",-1)),j[17]||(j[17]=e("span",{class:"text-xs text-gray-500 text-center mt-1"},"Skicka utskick",-1))]),e("button",{onClick:j[1]||(j[1]=V=>L.$router.push("/invoices")),class:"group flex flex-col items-center p-6 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-2xl transition-all duration-200 border border-transparent hover:border-green-200 hover:shadow-md"},[e("div",Es,[W(G(gt),{class:"w-8 h-8 text-green-600"})]),j[18]||(j[18]=e("span",{class:"text-sm font-semibold text-center"},"Fakturor",-1)),j[19]||(j[19]=e("span",{class:"text-xs text-gray-500 text-center mt-1"},"Skapa & hantera",-1))]),e("button",{onClick:j[2]||(j[2]=V=>L.$router.push("/employees")),class:"group flex flex-col items-center p-6 text-gray-600 hover:text-purple-600 hover:bg-purple-50 rounded-2xl transition-all duration-200 border border-transparent hover:border-purple-200 hover:shadow-md"},[e("div",Ls,[W(G(Le),{class:"w-8 h-8 text-purple-600"})]),j[20]||(j[20]=e("span",{class:"text-sm font-semibold text-center"},"Medarbetare",-1)),j[21]||(j[21]=e("span",{class:"text-xs text-gray-500 text-center mt-1"},"Hantera team",-1))]),e("button",{onClick:j[3]||(j[3]=V=>L.$router.push("/customers")),class:"group flex flex-col items-center p-6 text-gray-600 hover:text-orange-600 hover:bg-orange-50 rounded-2xl transition-all duration-200 border border-transparent hover:border-orange-200 hover:shadow-md"},[e("div",Is,[W(G(Ee),{class:"w-8 h-8 text-orange-600"})]),j[22]||(j[22]=e("span",{class:"text-sm font-semibold text-center"},"Kunder",-1)),j[23]||(j[23]=e("span",{class:"text-xs text-gray-500 text-center mt-1"},"Kundregister",-1))]),e("button",{onClick:j[4]||(j[4]=V=>L.$router.push("/orders")),class:"group flex flex-col items-center p-6 text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-2xl transition-all duration-200 border border-transparent hover:border-indigo-200 hover:shadow-md"},[e("div",Bs,[W(G(_e),{class:"w-8 h-8 text-indigo-600"})]),j[24]||(j[24]=e("span",{class:"text-sm font-semibold text-center"},"Uppdrag",-1)),j[25]||(j[25]=e("span",{class:"text-xs text-gray-500 text-center mt-1"},"Beställningar",-1))]),e("button",{onClick:j[5]||(j[5]=V=>L.$router.push("/subsidiaries")),class:"group flex flex-col items-center p-6 text-gray-600 hover:text-pink-600 hover:bg-pink-50 rounded-2xl transition-all duration-200 border border-transparent hover:border-pink-200 hover:shadow-md"},[e("div",Ds,[W(ee,{class:"w-8 h-8 text-pink-600"})]),j[26]||(j[26]=e("span",{class:"text-sm font-semibold text-center"},"Dotterbolag",-1)),j[27]||(j[27]=e("span",{class:"text-xs text-gray-500 text-center mt-1"},"Bolagsinfo",-1))])])])]),e("div",Rs,[e("div",Fs,[j[30]||(j[30]=e("div",{class:"px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50"},[e("h3",{class:"text-xl font-bold text-gray-900 flex items-center"},[e("svg",{class:"w-6 h-6 mr-3 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 2L3 7v11a1 1 0 001 1h12a1 1 0 001-1V7l-7-5zM8 15a1 1 0 11-2 0 1 1 0 012 0zm4 0a1 1 0 11-2 0 1 1 0 012 0z","clip-rule":"evenodd"})]),te(" Senaste uppdrag ")])],-1)),e("div",Hs,[i.value?(s(),a("div",Zs,[(s(),a(N,null,K(3,V=>e("div",{key:V,class:"animate-pulse"},[...j[29]||(j[29]=[e("div",{class:"h-16 bg-gray-200 rounded-xl"},null,-1)])])),64))])):(s(),a("div",Ps,[(s(!0),a(N,null,K(m.value,V=>(s(),a("div",{key:V.id,class:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl border border-gray-200 hover:shadow-sm transition-shadow duration-200"},[e("div",Os,[e("img",{src:_(V.description),alt:V.description,class:"w-12 h-12 rounded-xl object-cover shadow-sm"},null,8,Us),e("div",null,[e("div",Ns,t(V.description),1),e("div",Ks,t(V.customer_name),1)])]),e("div",qs,[e("div",Ws,t(p(V.amount)),1),e("div",Gs,t(k(V.created_at)),1)])]))),128))]))])]),e("div",Js,[j[32]||(j[32]=Y('<div class="px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50"><h3 class="text-xl font-bold text-gray-900 flex items-center"><svg class="w-6 h-6 mr-3 text-green-600" fill="currentColor" viewBox="0 0 20 20"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg> Senaste e-postutskick </h3></div>',1)),e("div",Ys,[i.value?(s(),a("div",Qs,[(s(),a(N,null,K(3,V=>e("div",{key:V,class:"animate-pulse"},[...j[31]||(j[31]=[e("div",{class:"h-16 bg-gray-200 rounded-xl"},null,-1)])])),64))])):(s(),a("div",Xs,[(s(!0),a(N,null,K(n.value,V=>(s(),a("div",{key:V.id,class:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-green-50 rounded-xl border border-gray-200 hover:shadow-sm transition-shadow duration-200"},[e("div",null,[e("div",ea,t(V.campaign_name),1),e("div",ta,t(V.template_name),1)]),e("div",sa,[e("div",aa,t(V.recipient_count)+" mottagare",1),e("div",oa,t(k(V.sent_at)),1)])]))),128))]))])])])])}}}),la={class:"bg-white rounded-lg shadow-sm border"},na={class:"px-6 py-4 border-b border-gray-200"},ia={class:"flex items-center justify-between"},da={class:"flex items-center space-x-4"},ua={class:"text-lg font-medium text-gray-900"},ca={key:0,class:"text-sm text-gray-600"},pa={class:"flex items-center space-x-2"},ma={key:0,class:"px-6 py-4 border-b border-gray-200"},ga={class:"overflow-x-auto"},va={class:"min-w-full divide-y divide-gray-200"},xa={class:"bg-white border-b-2 border-gray-300"},ba={key:0,class:"w-12 px-6 py-3 text-left"},fa=["checked"],ya=["onClick"],ha={class:"flex items-center space-x-1"},_a={class:"bg-white divide-y divide-gray-200"},wa=["onClick"],ka={key:0,class:"w-12 px-6 py-4"},$a=["checked","onChange"],Sa={key:1,class:"text-center py-12"},Ca={class:"text-gray-400 mb-4"},ja={class:"text-lg font-medium text-gray-900 mb-2"},Ta={class:"text-gray-600 mb-4"},Ma={key:2,class:"px-6 py-12"},Aa={class:"space-y-3"},Va={key:3,class:"px-6 py-4 border-t border-gray-200"},za={class:"flex items-center justify-between"},Ea={class:"text-sm text-gray-700"},La={class:"flex items-center space-x-2"},Ia=["disabled"],Ba={class:"text-sm text-gray-700"},Da=["disabled"],Re=se({__name:"DataTable",props:{title:{},items:{},columns:{},loading:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},selectedItems:{default:()=>[]},showFilters:{type:Boolean,default:!1},showPagination:{type:Boolean,default:!1},currentPage:{default:1},totalPages:{default:1},totalItems:{default:0},sortBy:{default:""},sortDirection:{default:"asc"},emptyTitle:{default:"Inga poster"},emptyMessage:{default:"Det finns inga poster att visa."},emptyIcon:{default:"div"},getItemKey:{type:Function,default:(r,i)=>r.id||i}},emits:["select-all","select-item","row-click","sort","page-change"],setup(r){const i=r,u=U(()=>{var w;return((w=i.selectedItems)==null?void 0:w.length)||0}),d=U(()=>{var w;return i.items.length>0&&((w=i.selectedItems)==null?void 0:w.length)===i.items.length}),c=U(()=>(i.currentPage-1)*10+1),g=U(()=>Math.min(i.currentPage*10,i.totalItems));function v(w,R){return R.split(".").reduce((m,n)=>m==null?void 0:m[n],w)}function b(w,R){return R.formatter?R.formatter(w):w==null?"-":String(w)}function T(w){var R;return((R=i.selectedItems)==null?void 0:R.some(m=>i.getItemKey(m,0)===i.getItemKey(w,0)))||!1}return(w,R)=>(s(),a("div",la,[e("div",na,[e("div",ia,[e("div",da,[e("h3",ua,t(r.title),1),u.value>0?(s(),a("div",ca,t(u.value)+" valda ",1)):E("",!0)]),e("div",pa,[pe(w.$slots,"header-actions")])])]),r.showFilters?(s(),a("div",ma,[pe(w.$slots,"filters")])):E("",!0),e("div",ga,[e("table",va,[e("thead",xa,[e("tr",null,[r.selectable?(s(),a("th",ba,[e("input",{type:"checkbox",checked:d.value,onChange:R[0]||(R[0]=m=>w.$emit("select-all",m.target.checked)),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,40,fa)])):E("",!0),(s(!0),a(N,null,K(r.columns,m=>(s(),a("th",{key:m.key,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:n=>m.sortable&&w.$emit("sort",m.key)},[e("div",ha,[e("span",null,t(m.label),1),m.sortable&&r.sortBy===m.key?(s(),oe(he(r.sortDirection==="asc"?"ChevronUpIcon":"ChevronDownIcon"),{key:0,class:"w-4 h-4"})):E("",!0)])],8,ya))),128))])]),e("tbody",_a,[(s(!0),a(N,null,K(r.items,(m,n)=>(s(),a("tr",{key:r.getItemKey(m,n),class:"hover:bg-gray-50 cursor-pointer",onClick:o=>w.$emit("row-click",m)},[r.selectable?(s(),a("td",ka,[e("input",{type:"checkbox",checked:T(m),onChange:ye(o=>w.$emit("select-item",m,o.target.checked),["stop"]),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,40,$a)])):E("",!0),(s(!0),a(N,null,K(r.columns,o=>(s(),a("td",{key:o.key,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},[pe(w.$slots,`cell-${o.key}`,{item:m,value:v(m,o.key)},()=>[te(t(b(v(m,o.key),o)),1)])]))),128))],8,wa))),128))])])]),!r.loading&&r.items.length===0?(s(),a("div",Sa,[e("div",Ca,[(s(),oe(he(r.emptyIcon),{class:"w-12 h-12 mx-auto"}))]),e("h3",ja,t(r.emptyTitle),1),e("p",Ta,t(r.emptyMessage),1),pe(w.$slots,"empty-actions")])):E("",!0),r.loading?(s(),a("div",Ma,[e("div",Aa,[(s(),a(N,null,K(5,m=>e("div",{key:m,class:"animate-pulse"},[...R[3]||(R[3]=[e("div",{class:"h-4 bg-gray-200 rounded"},null,-1)])])),64))])])):E("",!0),r.showPagination&&r.totalPages>1?(s(),a("div",Va,[e("div",za,[e("div",Ea," Visar "+t(c.value)+"-"+t(g.value)+" av "+t(r.totalItems)+" poster ",1),e("div",La,[e("button",{onClick:R[1]||(R[1]=m=>w.$emit("page-change",r.currentPage-1)),disabled:r.currentPage===1,class:"px-3 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed"}," Föregående ",8,Ia),e("span",Ba," Sida "+t(r.currentPage)+" av "+t(r.totalPages),1),e("button",{onClick:R[2]||(R[2]=m=>w.$emit("page-change",r.currentPage+1)),disabled:r.currentPage===r.totalPages,class:"px-3 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed"}," Nästa ",8,Da)])])])):E("",!0)]))}}),Ra={class:"bg-white rounded-lg border border-gray-200 shadow-sm"},Fa={class:"px-8 py-6 space-y-6"},Ha={class:"flex items-center space-x-4"},Za={class:"flex items-center gap-2 w-80"},Pa={key:0,class:"flex items-center space-x-4"},Oa={class:"flex items-center space-x-4 flex-1"},Ua={class:"flex items-center space-x-2"},Na={class:"flex items-center space-x-2"},Ka={key:1,class:"flex flex-wrap items-center gap-6"},qa={class:"text-sm font-medium text-gray-700 whitespace-nowrap"},Wa=["onUpdate:modelValue"],Ga={value:""},Ja=["value"],Ya={key:2,class:"mt-6 flex"},Qa={class:"block text-sm font-medium text-gray-700 mb-3"},Xa={class:"flex gap-3 flex-nowrap overflow-x-auto"},eo=["onClick"],to={class:"py-4 border-t border-gray-200 rounded-b-lg"},so={class:"flex items-center justify-between"},ao={class:"flex items-center space-x-3"},oo={class:"flex items-center space-x-2"},Fe=se({__name:"FilterBar",props:{showDateRange:{type:Boolean,default:!1},showSaveFilter:{type:Boolean,default:!1},selectFilters:{default:()=>[]},tagFilters:{default:()=>[]}},emits:["filter-change","save-filter"],setup(r,{emit:i}){const u=r,d=i,c=S(""),g=S(""),v=S(""),b=S({}),T=S({});xe(()=>u.selectFilters,n=>{n.forEach(o=>{o.key in b.value||(b.value[o.key]="")})},{immediate:!0}),xe(()=>u.tagFilters,n=>{n.forEach(o=>{o.key in T.value||(T.value[o.key]=[])})},{immediate:!0}),xe([c,g,v,b,T],()=>{const n={search:c.value,dateFrom:g.value,dateTo:v.value,...b.value,tags:T.value};d("filter-change",n)},{deep:!0});function w(n,o){T.value[n]||(T.value[n]=[]);const x=T.value[n].indexOf(o);x>-1?T.value[n].splice(x,1):T.value[n].push(o)}function R(n,o){var x;return((x=T.value[n])==null?void 0:x.includes(o))||!1}function m(){c.value="",g.value="",v.value="",Object.keys(b.value).forEach(n=>{b.value[n]=""}),Object.keys(T.value).forEach(n=>{T.value[n]=[]})}return(n,o)=>(s(),a("div",Ra,[o[8]||(o[8]=e("div",{class:"px-2 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Filter")],-1)),e("div",Fa,[e("div",Ha,[o[4]||(o[4]=e("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"Sök:",-1)),e("div",Za,[H(e("input",{"onUpdate:modelValue":o[0]||(o[0]=x=>c.value=x),type:"text",placeholder:"Sök efter namn, email, eller annan information...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,512),[[Q,c.value]])])]),r.showDateRange?(s(),a("div",Pa,[o[7]||(o[7]=e("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"Datumintervall:",-1)),e("div",Oa,[e("div",Ua,[o[5]||(o[5]=e("label",{class:"text-xs font-medium text-gray-600 whitespace-nowrap"},"Från:",-1)),H(e("input",{"onUpdate:modelValue":o[1]||(o[1]=x=>g.value=x),type:"date",class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,512),[[Q,g.value]])]),e("div",Na,[o[6]||(o[6]=e("label",{class:"text-xs font-medium text-gray-600 whitespace-nowrap"},"Till:",-1)),H(e("input",{"onUpdate:modelValue":o[2]||(o[2]=x=>v.value=x),type:"date",class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,512),[[Q,v.value]])])])])):E("",!0),r.selectFilters.length>0?(s(),a("div",Ka,[(s(!0),a(N,null,K(r.selectFilters,x=>(s(),a("div",{key:x.key,class:"flex items-center space-x-2"},[e("label",qa,t(x.label)+":",1),H(e("select",{"onUpdate:modelValue":p=>b.value[x.key]=p,class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-w-[120px]"},[e("option",Ga,t(x.placeholder||"Alla"),1),(s(!0),a(N,null,K(x.options,p=>(s(),a("option",{key:p.value,value:p.value},t(p.label),9,Ja))),128))],8,Wa),[[ie,b.value[x.key]]])]))),128))])):E("",!0),r.tagFilters.length>0?(s(),a("div",Ya,[(s(!0),a(N,null,K(r.tagFilters,x=>(s(),a("div",{key:x.key,class:"mb-6 flex first:mt-4 mt-2"},[e("label",Qa,t(x.label),1),e("div",Xa,[(s(!0),a(N,null,K(x.tags,p=>(s(),a("button",{key:p.value,onClick:k=>w(x.key,p.value),class:X(["px-3 py-1.5 text-sm font-medium rounded-full border transition-all duration-200",R(x.key,p.value)?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50 hover:border-gray-400"])},t(p.label),11,eo))),128))])]))),128))])):E("",!0)]),e("div",to,[e("div",so,[e("div",ao,[e("button",{onClick:m,class:"px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors"}," Rensa alla filter "),r.showSaveFilter?(s(),a("button",{key:0,onClick:o[3]||(o[3]=x=>n.$emit("save-filter")),class:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors"}," Spara filter ")):E("",!0)]),e("div",oo,[pe(n.$slots,"actions")])])])]))}}),ro={class:"bg-white rounded-lg shadow-sm border"},lo={class:"px-6 py-4 border-b border-gray-200"},no={class:"flex items-center justify-between"},io={class:"text-lg font-medium text-gray-900"},uo={class:"flex"},co={class:"w-48 border-r border-gray-200"},po={class:"flex flex-col"},mo=["onClick"],go={class:"flex items-center space-x-2"},vo={class:"flex-1"},xo={class:"p-6"},bo={key:0,class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},fo={class:"flex items-center justify-end space-x-3"},yo=["onClick"],He=se({__name:"DetailDrawer",props:{title:{},tabs:{},actions:{default:()=>[]},defaultTab:{default:""}},emits:["close","action"],setup(r){var d;const i=r,u=S(i.defaultTab||((d=i.tabs[0])==null?void 0:d.key));return(c,g)=>(s(),a("div",ro,[e("div",lo,[e("div",no,[e("h3",io,t(r.title),1),e("button",{onClick:g[0]||(g[0]=v=>c.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[W(G(ge),{class:"w-6 h-6"})])])]),e("div",uo,[e("div",co,[e("nav",po,[(s(!0),a(N,null,K(r.tabs,v=>(s(),a("button",{key:v.key,onClick:b=>u.value=v.key,class:X(["px-6 py-3 text-left text-sm font-medium border-b border-gray-200 hover:bg-gray-50",u.value===v.key?"bg-blue-50 text-blue-700 border-blue-200":"text-gray-600"])},[e("div",go,[(s(),oe(he(v.icon),{class:"w-4 h-4"})),e("span",null,t(v.label),1)])],10,mo))),128))])]),e("div",vo,[e("div",xo,[(s(!0),a(N,null,K(r.tabs,v=>H((s(),a("div",{key:v.key},[pe(c.$slots,`tab-${v.key}`)])),[[Ie,u.value===v.key]])),128))]),r.actions.length>0?(s(),a("div",bo,[e("div",fo,[(s(!0),a(N,null,K(r.actions,v=>(s(),a("button",{key:v.key,onClick:b=>c.$emit("action",v.key),class:X(["px-4 py-2 text-sm font-medium rounded-md",v.variant==="primary"?"bg-blue-600 text-white hover:bg-blue-700":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"])},t(v.label),11,yo))),128))])])):E("",!0)])])]))}}),ho={class:"fixed inset-0 z-50 overflow-y-auto"},_o={class:"flex min-h-screen items-center justify-center p-4"},wo={class:"relative bg-white rounded-lg shadow-xl max-w-md w-full"},ko={class:"px-6 py-4 border-b border-gray-200"},$o={class:"flex items-center justify-between"},So={class:"text-lg font-medium text-gray-900"},Co={class:"px-6 py-4"},jo={key:0,class:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-end space-x-3"},Ze=se({__name:"Modal",props:{title:{},showActions:{type:Boolean,default:!0},confirmText:{default:"Bekräfta"},cancelText:{default:"Avbryt"}},emits:["close","confirm"],setup(r){return(i,u)=>(s(),a("div",ho,[e("div",_o,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:u[0]||(u[0]=d=>i.$emit("close"))}),e("div",wo,[e("div",ko,[e("div",$o,[e("h3",So,t(r.title),1),e("button",{onClick:u[1]||(u[1]=d=>i.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[W(G(ge),{class:"w-6 h-6"})])])]),e("div",Co,[pe(i.$slots,"default")]),r.showActions?(s(),a("div",jo,[e("button",{onClick:u[2]||(u[2]=d=>i.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},t(r.cancelText),1),e("button",{onClick:u[3]||(u[3]=d=>i.$emit("confirm")),class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700"},t(r.confirmText),1)])):E("",!0)])])]))}}),To={class:"flex items-center space-x-2"},Mo=["onClick"],Ao={key:0,class:"relative"},xt=se({__name:"TagSelector",props:{tags:{},selectedTags:{default:()=>[]},allowAdd:{type:Boolean,default:!1},allowMultiple:{type:Boolean,default:!0}},emits:["update:selectedTags","tag-add"],setup(r,{emit:i}){const u=r,d=i,c=S(!1),g=S(""),v=S(),b=U({get:()=>u.selectedTags,set:o=>d("update:selectedTags",o)});function T(o){if(!u.allowMultiple){b.value=b.value.includes(o)?[]:[o];return}b.value.indexOf(o)>-1?b.value=b.value.filter(p=>p!==o):b.value=[...b.value,o]}function w(o){return b.value.includes(o)}function R(){c.value=!0,it(()=>{var o;(o=v.value)==null||o.focus()})}function m(){g.value.trim()&&(d("tag-add",g.value.trim()),g.value=""),c.value=!1}function n(){c.value=!1,g.value=""}return(o,x)=>(s(),a("div",To,[(s(!0),a(N,null,K(r.tags,p=>(s(),a("button",{key:p.value,onClick:k=>T(p.value),class:X(["px-3 py-1 text-sm rounded-full border transition-colors",w(p.value)?"bg-blue-100 text-blue-800 border-blue-200":"bg-gray-100 text-gray-700 border-gray-200 hover:bg-gray-200"])},t(p.label),11,Mo))),128)),r.allowAdd?(s(),a("div",Ao,[c.value?H((s(),a("input",{key:0,"onUpdate:modelValue":x[0]||(x[0]=p=>g.value=p),onKeyup:jt(m,["enter"]),onBlur:n,placeholder:"Ny tagg...",class:"px-3 py-1 text-sm border border-gray-300 rounded-full focus:outline-none focus:ring-1 focus:ring-blue-500",ref_key:"addInputRef",ref:v},null,544)),[[Q,g.value]]):(s(),a("button",{key:1,onClick:R,class:"px-3 py-1 text-sm text-gray-500 border border-dashed border-gray-300 rounded-full hover:border-gray-400 hover:text-gray-600"}," + Lägg till "))])):E("",!0)]))}}),bt=De("customers",{state:()=>({items:[],loading:!1,error:""}),actions:{async fetchAll(){this.loading=!0,this.error=null;try{const r=await ne.get("/api/customers");this.items=r.data.results??r.data.data??[]}catch(r){this.error=(r==null?void 0:r.message)??"Okänt fel"}finally{this.loading=!1}}}}),ft=De("purchaseOrders",{state:()=>({items:[],loading:!1,error:""}),actions:{async fetchAll(){this.loading=!0,this.error=null;try{const r=await ne.get("/api/purchase-orders");this.items=r.data.results??r.data.data??[]}catch(r){this.error=(r==null?void 0:r.message)??"Okänt fel"}finally{this.loading=!1}}}}),Vo={class:"space-y-6"},zo={class:"flex items-center justify-between"},Eo={class:"flex items-center space-x-3"},Lo={class:"bg-white rounded-lg shadow-sm border p-6"},Io={class:"flex items-center space-x-4"},Bo={class:"text-sm text-gray-600"},Do={class:"flex items-center space-x-3"},Ro={class:"text-sm font-medium text-gray-900"},Fo={class:"text-xs text-gray-500"},Ho={key:0,class:"text-sm text-gray-900"},Zo={key:1,class:"text-xs text-gray-500"},Po={class:"text-sm text-gray-600"},Oo={key:0,class:"flex items-center space-x-2"},Uo={class:"text-sm text-gray-600"},No={key:0,class:"fixed inset-0 z-50 overflow-hidden"},Ko={class:"absolute right-0 top-0 h-full w-96 bg-white shadow-xl"},qo={class:"space-y-4"},Wo={class:"space-y-2"},Go={class:"flex items-center space-x-2"},Jo={class:"text-sm"},Yo={class:"flex items-center space-x-2"},Qo={class:"text-sm"},Xo={class:"flex items-center space-x-2"},er={class:"text-sm"},tr={class:"grid grid-cols-2 gap-4"},sr={class:"text-center p-3 bg-white border border-gray-200 rounded"},ar={class:"text-lg font-semibold text-gray-900"},or={class:"text-center p-3 bg-white border border-gray-200 rounded"},rr={class:"text-lg font-semibold text-gray-900"},lr={class:"space-y-3"},nr=["onClick"],ir={class:"flex items-center justify-between"},dr={class:"text-sm font-medium text-gray-900"},ur={class:"text-xs text-gray-600"},cr={class:"text-right"},pr={class:"text-sm font-medium text-gray-900"},mr={class:"space-y-4"},gr={class:"space-y-4"},vr={class:"space-y-4"},xr=se({__name:"CustomersView",setup(r){const i=bt(),u=ft(),d=S(null),c=S([]),g=S(!1),v=S({}),b=S([]),T=S(""),w=S({name:"",email:"",phone:"",org_no:""}),R=[{key:"activity",label:"Aktivitet",options:[{value:"active",label:"Aktiva"},{value:"inactive",label:"Inaktiva"},{value:"new",label:"Nya"}]}],m=[{key:"tags",label:"Taggar",tags:[{value:"brf",label:"BRF"},{value:"kommersiell",label:"Kommersiell"},{value:"vip",label:"VIP"},{value:"problem",label:"Problem"}]}],n=[{key:"name",label:"Namn",sortable:!0},{key:"org_no",label:"Org.nr",sortable:!0},{key:"contact",label:"Kontakt",sortable:!1},{key:"last_order",label:"Senaste order",sortable:!0},{key:"created_at",label:"Skapad",sortable:!0}],o=[{key:"summary",label:"Sammanfattning",icon:"div"},{key:"orders",label:"Relaterade ordrar",icon:"div"},{key:"tags",label:"Taggar",icon:"div"},{key:"notes",label:"Anteckningar",icon:"div"}],x=[{key:"edit",label:"Redigera",variant:"secondary"},{key:"export",label:"Exportera",variant:"primary"}],p=[{value:"brf",label:"BRF"},{value:"kommersiell",label:"Kommersiell"},{value:"vip",label:"VIP"},{value:"problem",label:"Problem"},{value:"ny",label:"Ny"}],k=U(()=>{let I=i.items;if(v.value.search){const A=v.value.search.toLowerCase();I=I.filter(F=>{var $,ae;return F.name.toLowerCase().includes(A)||(($=F.email)==null?void 0:$.toLowerCase().includes(A))||((ae=F.org_no)==null?void 0:ae.includes(A))})}return v.value.activity&&(I=I.filter(A=>{const F=f(A.id);switch(v.value.activity){case"active":return F>0;case"inactive":return F===0;case"new":return Z(A.created_at);default:return!0}})),I});function _(I){v.value=I}function L(I){I?c.value=[...k.value]:c.value=[]}function j(I,A){if(A)c.value.push(I);else{const F=c.value.findIndex($=>$.id===I.id);F>-1&&c.value.splice(F,1)}}function ee(I){d.value=I,b.value=["brf"],T.value="Anteckningar om kunden..."}function V(){d.value=null}function M(I){I==="edit"?console.log("Edit customer"):I==="export"&&console.log("Export customer")}function f(I){return u.items.filter(A=>A.customer_id===I).length}function z(I){return u.items.filter(A=>A.customer_id===I).reduce((A,F)=>A+F.amount,0)}function P(I){return u.items.filter(A=>A.customer_id===I)}function y(I){const A=P(I);if(A.length===0)return"Inga ordrar";const F=A.sort(($,ae)=>new Date(ae.created_at).getTime()-new Date($.created_at).getTime())[0];return q(F.created_at)}function h(I){return{open:"bg-yellow-100 text-yellow-800",closed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"}[I]||"bg-gray-100 text-gray-800"}function Z(I){const A=new Date(I);return(new Date().getTime()-A.getTime())/(1e3*60*60*24)<=30}function q(I){return new Date(I).toLocaleDateString("sv-SE")}function re(I){console.log("View order:",I)}function le(I){b.value.includes(I)||b.value.push(I)}function O(){console.log("Saving notes:",T.value)}function B(){console.log("Exporting customers")}function D(){console.log("Bulk export:",c.value)}function C(){console.log("Creating customer:",w.value),g.value=!1,w.value={name:"",email:"",phone:"",org_no:""}}function l(I){console.log("Sort by:",I)}return de(async()=>{await i.fetchAll(),await u.fetchAll()}),(I,A)=>(s(),a("div",Vo,[e("div",zo,[A[9]||(A[9]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Kunder"),e("p",{class:"text-gray-600"}," Hantera kundinformation och relaterade ordrar ")],-1)),e("div",Eo,[e("button",{onClick:B,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:border-gray-400"}," Exportera CSV "),e("button",{onClick:A[0]||(A[0]=F=>g.value=!0),class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700"}," Skapa kund ")])]),e("div",Lo,[W(Fe,{"show-date-range":!1,"select-filters":R,"tag-filters":m,onFilterChange:_})]),W(Re,{title:"Kunder",items:k.value,columns:n,loading:G(i).loading,error:G(i).error,selectable:"","selected-items":c.value,"show-filters":"",onSelectAll:L,onSelectItem:j,onRowClick:ee,onSort:l},{filters:J(()=>[e("div",Io,[e("div",Bo,t(k.value.length)+" av "+t(G(i).items.length)+" kunder ",1)])]),"cell-name":J(({item:F})=>[e("div",Do,[e("div",null,[e("p",Ro,t(F.name),1),e("p",Fo,t(F.external_id),1)])])]),"cell-contact":J(({item:F})=>[e("div",null,[F.email?(s(),a("p",Ho,t(F.email),1)):E("",!0),F.phone?(s(),a("p",Zo,t(F.phone),1)):E("",!0)])]),"cell-last-order":J(({item:F})=>[e("span",Po,t(y(F.id)),1)]),"header-actions":J(()=>[c.value.length>0?(s(),a("div",Oo,[e("span",Uo,t(c.value.length)+" valda",1),e("button",{onClick:D,class:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700"}," Exportera valda ")])):E("",!0)]),"empty-actions":J(()=>[e("button",{onClick:A[1]||(A[1]=F=>g.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Skapa första kunden ")]),_:1},8,["items","loading","error","selected-items"]),d.value?(s(),a("div",No,[e("div",{class:"absolute inset-0 bg-gray-500 bg-opacity-75",onClick:V}),e("div",Ko,[W(He,{title:d.value.name,tabs:o,actions:x,onClose:V,onAction:M},{"tab-summary":J(()=>[e("div",qo,[e("div",null,[A[13]||(A[13]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"}," Kontaktinformation ",-1)),e("div",Wo,[e("div",Go,[A[10]||(A[10]=e("span",{class:"text-sm text-gray-600"},"Email:",-1)),e("span",Jo,t(d.value.email||"Ej angiven"),1)]),e("div",Yo,[A[11]||(A[11]=e("span",{class:"text-sm text-gray-600"},"Telefon:",-1)),e("span",Qo,t(d.value.phone||"Ej angiven"),1)]),e("div",Xo,[A[12]||(A[12]=e("span",{class:"text-sm text-gray-600"},"Org.nr:",-1)),e("span",er,t(d.value.org_no||"Ej angivet"),1)])])]),A[17]||(A[17]=e("div",{class:"border-t border-gray-200 my-4"},null,-1)),e("div",null,[A[16]||(A[16]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"}," Statistik ",-1)),e("div",tr,[e("div",sr,[e("p",ar,t(f(d.value.id)),1),A[14]||(A[14]=e("p",{class:"text-xs text-gray-600"},"Totalt ordrar",-1))]),e("div",or,[e("p",rr,t(z(d.value.id))+" SEK ",1),A[15]||(A[15]=e("p",{class:"text-xs text-gray-600"},"Totalt belopp",-1))])])])])]),"tab-orders":J(()=>[e("div",lr,[(s(!0),a(N,null,K(P(d.value.id),F=>(s(),a("div",{key:F.id,class:"p-3 bg-white border border-gray-200 rounded-md hover:border-gray-300 cursor-pointer transition-colors",onClick:$=>re(F)},[e("div",ir,[e("div",null,[e("p",dr,t(F.external_id),1),e("p",ur,t(F.description),1)]),e("div",cr,[e("p",pr,t(F.amount)+" SEK ",1),e("span",{class:X(["inline-flex px-2 py-1 text-xs font-medium rounded-full",h(F.status)])},t(F.status),3)])])],8,nr))),128))])]),"tab-tags":J(()=>[e("div",mr,[W(xt,{tags:p,"selected-tags":b.value,"onUpdate:selectedTags":A[2]||(A[2]=F=>b.value=F),"allow-add":"",onTagAdd:le},null,8,["selected-tags"])])]),"tab-notes":J(()=>[e("div",gr,[H(e("textarea",{"onUpdate:modelValue":A[3]||(A[3]=F=>T.value=F),placeholder:"Lägg till anteckningar om kunden...",class:"w-full p-3 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500",rows:"6"},null,512),[[Q,T.value]]),e("button",{onClick:O,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Spara anteckningar ")])]),_:1},8,["title"])])])):E("",!0),g.value?(s(),oe(Ze,{key:1,title:"Skapa ny kund",onClose:A[8]||(A[8]=F=>g.value=!1),onConfirm:C},{default:J(()=>[e("div",vr,[e("div",null,[A[18]||(A[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Namn *",-1)),H(e("input",{"onUpdate:modelValue":A[4]||(A[4]=F=>w.value.name=F),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,w.value.name]])]),e("div",null,[A[19]||(A[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),H(e("input",{"onUpdate:modelValue":A[5]||(A[5]=F=>w.value.email=F),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,w.value.email]])]),e("div",null,[A[20]||(A[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Telefon",-1)),H(e("input",{"onUpdate:modelValue":A[6]||(A[6]=F=>w.value.phone=F),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,w.value.phone]])]),e("div",null,[A[21]||(A[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Organisationsnummer",-1)),H(e("input",{"onUpdate:modelValue":A[7]||(A[7]=F=>w.value.org_no=F),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,w.value.org_no]])])])]),_:1})):E("",!0)]))}}),br={class:"space-y-6"},fr={class:"bg-white rounded-lg shadow-sm border p-6"},yr={class:"flex items-center space-x-4"},hr={class:"text-sm text-gray-600"},_r={class:"flex items-center space-x-2"},wr={class:"text-sm font-medium text-gray-900"},kr={class:"text-sm font-medium text-gray-900"},$r={class:"text-xs text-gray-500"},Sr={class:"text-sm font-medium text-gray-900"},Cr={key:0,class:"flex items-center space-x-2"},jr={class:"text-sm text-gray-600"},Tr={key:0,class:"fixed inset-0 z-50 overflow-hidden"},Mr={class:"absolute right-0 top-0 h-full w-96 bg-white shadow-xl"},Ar={class:"space-y-4"},Vr={class:"space-y-2"},zr={class:"flex items-center justify-between"},Er={class:"flex items-center justify-between"},Lr={class:"text-sm font-medium"},Ir={class:"flex items-center justify-between"},Br={class:"text-sm"},Dr={class:"flex items-center justify-between"},Rr={class:"text-sm"},Fr={class:"text-sm text-gray-600"},Hr={class:"space-y-4"},Zr={class:"space-y-3"},Pr={class:"flex items-start space-x-3"},Or={class:"text-xs text-gray-500"},Ur={class:"flex items-start space-x-3"},Nr={class:"text-xs text-gray-500"},Kr={key:0,class:"space-y-4"},qr={class:"space-y-2"},Wr={class:"flex items-center space-x-2"},Gr={class:"text-sm"},Jr={class:"flex items-center space-x-2"},Yr={class:"text-sm"},Qr={class:"flex items-center space-x-2"},Xr={class:"text-sm"},el=se({__name:"OrdersView",setup(r){const i=ft(),u=bt(),d=S(null),c=S([]),g=S({}),v=[{key:"status",label:"Status",options:[{value:"open",label:"Öppna"},{value:"closed",label:"Stängda"},{value:"cancelled",label:"Avbrutna"}]},{key:"customer",label:"Kund",options:u.items.map(O=>({value:O.id.toString(),label:O.name}))}],b=[{key:"id",label:"ID",sortable:!0},{key:"customer",label:"Kund",sortable:!0},{key:"amount",label:"Belopp",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"created_at",label:"Skapad",sortable:!0},{key:"updated_at",label:"Uppdaterad",sortable:!0}],T=[{key:"summary",label:"Sammanfattning",icon:"div"},{key:"timeline",label:"Tidslinje",icon:"div"},{key:"customer",label:"Relaterad kund",icon:"div"},{key:"export",label:"Exportera till BL",icon:"div"}],w=[{key:"edit",label:"Redigera",variant:"secondary"},{key:"export",label:"Exportera",variant:"primary"}],R=U(()=>{let O=i.items;if(g.value.search){const B=g.value.search.toLowerCase();O=O.filter(D=>{var C;return D.external_id.toLowerCase().includes(B)||((C=D.description)==null?void 0:C.toLowerCase().includes(B))})}return g.value.status&&(O=O.filter(B=>B.status===g.value.status)),g.value.customer&&(O=O.filter(B=>B.customer_id===parseInt(g.value.customer))),g.value.dateFrom&&(O=O.filter(B=>new Date(B.created_at)>=new Date(g.value.dateFrom))),g.value.dateTo&&(O=O.filter(B=>new Date(B.created_at)<=new Date(g.value.dateTo))),O}),m=U(()=>d.value?u.items.find(O=>O.id===d.value.customer_id):null);function n(O){g.value=O}function o(){g.value={}}function x(O){O?c.value=[...R.value]:c.value=[]}function p(O,B){if(B)c.value.push(O);else{const D=c.value.findIndex(C=>C.id===O.id);D>-1&&c.value.splice(D,1)}}function k(O){d.value=O}function _(){d.value=null}function L(O){O==="edit"?console.log("Edit order"):O==="export"&&console.log("Export order")}function j(O){if(!O)return"Okänd kund";const B=u.items.find(D=>D.id===O);return(B==null?void 0:B.name)||"Okänd kund"}function ee(O){return{open:"bg-yellow-100 text-yellow-800",closed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"}[O]||"bg-gray-100 text-gray-800"}function V(O){return{open:"Öppen",closed:"Stängd",cancelled:"Avbruten"}[O]||O}function M(O){return new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK"}).format(O)}function f(O){return new Date(O).toLocaleDateString("sv-SE")}function z(){console.log("Exporting all orders")}function P(){console.log("Exporting to BL Administration")}function y(){console.log("Bulk export:",c.value)}function h(){console.log("Create new order")}function Z(){m.value&&console.log("View customer:",m.value)}function q(){console.log("Export order as CSV:",d.value)}function re(){console.log("Export order to BL:",d.value)}function le(O){console.log("Sort by:",O)}return de(async()=>{await i.fetchAll(),await u.fetchAll()}),(O,B)=>(s(),a("div",br,[e("div",{class:"flex items-center justify-between"},[B[0]||(B[0]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Ordrar"),e("p",{class:"text-gray-600"},"Hantera köpordrar och deras status")],-1)),e("div",{class:"flex items-center space-x-3"},[e("button",{onClick:z,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Exportera CSV "),e("button",{onClick:P,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700"}," Exportera till BL ")])]),e("div",fr,[W(Fe,{"show-date-range":!0,"select-filters":v,onFilterChange:n},{actions:J(()=>[e("button",{onClick:o,class:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800"}," Rensa alla ")]),_:1})]),W(Re,{title:"Ordrar",items:R.value,columns:b,loading:G(i).loading,error:G(i).error,selectable:"","selected-items":c.value,"show-filters":"",onSelectAll:x,onSelectItem:p,onRowClick:k,onSort:le},{filters:J(()=>[e("div",yr,[e("div",hr,t(R.value.length)+" av "+t(G(i).items.length)+" ordrar ",1)])]),"cell-id":J(({item:D})=>[e("div",_r,[W(G(_e),{class:"w-4 h-4 text-gray-400"}),e("span",wr,t(D.external_id),1)])]),"cell-customer":J(({item:D})=>[e("div",null,[e("p",kr,t(j(D.customer_id)),1),e("p",$r,"ID: "+t(D.customer_id),1)])]),"cell-amount":J(({item:D})=>[e("span",Sr,t(M(D.amount)),1)]),"cell-status":J(({item:D})=>[e("span",{class:X(["inline-flex px-2 py-1 text-xs font-medium rounded-full",ee(D.status)])},t(V(D.status)),3)]),"header-actions":J(()=>[c.value.length>0?(s(),a("div",Cr,[e("span",jr,t(c.value.length)+" valda",1),e("button",{onClick:y,class:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700"}," Exportera valda ")])):E("",!0)]),"empty-actions":J(()=>[e("button",{onClick:h,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Skapa första ordern ")]),_:1},8,["items","loading","error","selected-items"]),d.value?(s(),a("div",Tr,[e("div",{class:"absolute inset-0 bg-gray-500 bg-opacity-75",onClick:_}),e("div",Mr,[W(He,{title:`Order ${d.value.external_id}`,tabs:T,actions:w,onClose:_,onAction:L},{"tab-summary":J(()=>[e("div",Ar,[e("div",null,[B[5]||(B[5]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"}," Orderinformation ",-1)),e("div",Vr,[e("div",zr,[B[1]||(B[1]=e("span",{class:"text-sm text-gray-600"},"Status:",-1)),e("span",{class:X(["inline-flex px-2 py-1 text-xs font-medium rounded-full",ee(d.value.status)])},t(V(d.value.status)),3)]),e("div",Er,[B[2]||(B[2]=e("span",{class:"text-sm text-gray-600"},"Belopp:",-1)),e("span",Lr,t(M(d.value.amount)),1)]),e("div",Ir,[B[3]||(B[3]=e("span",{class:"text-sm text-gray-600"},"Skapad:",-1)),e("span",Br,t(f(d.value.created_at)),1)]),e("div",Dr,[B[4]||(B[4]=e("span",{class:"text-sm text-gray-600"},"Uppdaterad:",-1)),e("span",Rr,t(f(d.value.updated_at)),1)])])]),e("div",null,[B[6]||(B[6]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"}," Beskrivning ",-1)),e("p",Fr,t(d.value.description||"Ingen beskrivning"),1)])])]),"tab-timeline":J(()=>[e("div",Hr,[e("div",Zr,[e("div",Pr,[B[8]||(B[8]=e("div",{class:"w-2 h-2 bg-blue-500 rounded-full mt-2"},null,-1)),e("div",null,[B[7]||(B[7]=e("p",{class:"text-sm font-medium text-gray-900"}," Order skapad ",-1)),e("p",Or,t(f(d.value.created_at)),1)])]),e("div",Ur,[B[10]||(B[10]=e("div",{class:"w-2 h-2 bg-yellow-500 rounded-full mt-2"},null,-1)),e("div",null,[B[9]||(B[9]=e("p",{class:"text-sm font-medium text-gray-900"}," Status uppdaterad ",-1)),e("p",Nr,t(f(d.value.updated_at)),1)])])])])]),"tab-customer":J(()=>[m.value?(s(),a("div",Kr,[e("div",null,[B[14]||(B[14]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"}," Kundinformation ",-1)),e("div",qr,[e("div",Wr,[B[11]||(B[11]=e("span",{class:"text-sm text-gray-600"},"Namn:",-1)),e("span",Gr,t(m.value.name),1)]),e("div",Jr,[B[12]||(B[12]=e("span",{class:"text-sm text-gray-600"},"Email:",-1)),e("span",Yr,t(m.value.email||"Ej angiven"),1)]),e("div",Qr,[B[13]||(B[13]=e("span",{class:"text-sm text-gray-600"},"Telefon:",-1)),e("span",Xr,t(m.value.phone||"Ej angiven"),1)])])]),e("button",{onClick:Z,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Visa kunddetaljer ")])):E("",!0)]),"tab-export":J(()=>[e("div",{class:"space-y-4"},[B[15]||(B[15]=e("div",null,[e("h4",{class:"text-sm font-medium text-gray-900 mb-2"}," Exportera order "),e("p",{class:"text-sm text-gray-600 mb-4"}," Välj format för export av denna order. ")],-1)),e("div",{class:"space-y-3"},[e("button",{onClick:q,class:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Exportera som CSV "),e("button",{onClick:re,class:"w-full px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700"}," Exportera till BL Administration ")])])]),_:1},8,["title"])])])):E("",!0)]))}}),tl={class:"space-y-6"},sl={class:"flex items-center justify-between"},al={class:"flex items-center space-x-3"},ol=["disabled"],rl=["disabled"],ll={class:"bg-white rounded-lg shadow-sm border"},nl={class:"border-b border-gray-200"},il={class:"flex space-x-8 px-6"},dl=["onClick"],ul={class:"p-6"},cl={key:0,class:"space-y-6"},pl={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ml={class:"flex items-center space-x-3"},gl={key:1,class:"space-y-6"},vl={class:"space-y-6"},xl={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},bl={class:"relative"},fl=["type"],yl={class:"relative"},hl=["type"],_l={key:2,class:"space-y-6"},wl={class:"space-y-6"},kl={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$l={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Sl={class:"relative"},Cl=["type"],jl={key:3,class:"space-y-6"},Tl={class:"space-y-6"},Ml={key:4,class:"space-y-6"},Al={class:"space-y-4"},Vl={class:"font-medium text-gray-900"},zl={class:"text-sm text-gray-600"},El={class:"flex items-center space-x-2"},Ll={class:"text-sm text-gray-600"},Il=["onClick"],Bl={class:"bg-white rounded-lg shadow-sm border p-6"},Dl={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Rl={class:"flex items-center space-x-3"},Fl={class:"flex items-center space-x-3"},Hl={class:"flex items-center space-x-3"},Zl=se({__name:"SettingsView",setup(r){const i=S("environment"),u=S(!1),d=S(!1),c=S(!1),g=S(!1),v=S(!1),b=S({environment:"development",debugMode:!1,apiBaseUrl:"http://localhost:8000",apiKey:"",apiSecret:"",apiTimeout:30,smtpServer:"smtp.example.com",smtpPort:587,smtpUsername:"",smtpPassword:"",fromEmail:"noreply@allanit.se",syncInterval:60,batchSize:100,maxRetries:3}),T=S({api:!0,email:!1,database:!0}),w=[{key:"environment",label:"Miljö"},{key:"api",label:"API"},{key:"email",label:"E-post"},{key:"sync",label:"Synk"},{key:"roles",label:"Roller"}],R=S([{id:1,name:"Administratör",description:"Fullständig åtkomst till alla funktioner",userCount:2},{id:2,name:"Operatör",description:"Kan hantera kunder och ordrar",userCount:5},{id:3,name:"Läsare",description:"Kan endast visa data",userCount:3}]);function m(){u.value=!0,setTimeout(()=>{T.value={api:Math.random()>.2,email:Math.random()>.3,database:Math.random()>.1},u.value=!1},2e3)}function n(){d.value=!0,setTimeout(()=>{d.value=!1,console.log("Settings saved:",b.value)},1e3)}function o(x){console.log("Edit role:",x)}return(x,p)=>(s(),a("div",tl,[e("div",sl,[p[17]||(p[17]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Inställningar"),e("p",{class:"text-gray-600"},"Konfigurera systeminställningar och API-anslutningar")],-1)),e("div",al,[e("button",{onClick:m,disabled:u.value,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50"},t(u.value?"Testar...":"Testa anslutningar"),9,ol),e("button",{onClick:n,disabled:d.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50"},t(d.value?"Sparar...":"Spara alla"),9,rl)])]),e("div",ll,[e("div",nl,[e("nav",il,[(s(),a(N,null,K(w,k=>e("button",{key:k.key,onClick:_=>i.value=k.key,class:X(["py-4 px-1 border-b-2 font-medium text-sm",i.value===k.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},t(k.label),11,dl)),64))])]),e("div",ul,[i.value==="environment"?(s(),a("div",cl,[e("div",null,[p[22]||(p[22]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Miljöinställningar",-1)),e("div",pl,[e("div",null,[p[19]||(p[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Miljö",-1)),H(e("select",{"onUpdate:modelValue":p[0]||(p[0]=k=>b.value.environment=k),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[...p[18]||(p[18]=[e("option",{value:"development"},"Development",-1),e("option",{value:"staging"},"Staging",-1),e("option",{value:"production"},"Production",-1)])],512),[[ie,b.value.environment]])]),e("div",null,[p[21]||(p[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Debug-läge",-1)),e("div",ml,[H(e("input",{"onUpdate:modelValue":p[1]||(p[1]=k=>b.value.debugMode=k),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[Be,b.value.debugMode]]),p[20]||(p[20]=e("span",{class:"text-sm text-gray-600"},"Aktivera debug-läge",-1))])])])])])):E("",!0),i.value==="api"?(s(),a("div",gl,[e("div",null,[p[27]||(p[27]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"API-inställningar",-1)),e("div",vl,[e("div",null,[p[23]||(p[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"API Base URL",-1)),H(e("input",{"onUpdate:modelValue":p[2]||(p[2]=k=>b.value.apiBaseUrl=k),type:"url",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,b.value.apiBaseUrl]])]),e("div",xl,[e("div",null,[p[24]||(p[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"API-nyckel",-1)),e("div",bl,[H(e("input",{"onUpdate:modelValue":p[3]||(p[3]=k=>b.value.apiKey=k),type:c.value?"text":"password",class:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,8,fl),[[$e,b.value.apiKey]]),e("button",{onClick:p[4]||(p[4]=k=>c.value=!c.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[c.value?(s(),oe(G(Ce),{key:1,class:"w-5 h-5 text-gray-400"})):(s(),oe(G(je),{key:0,class:"w-5 h-5 text-gray-400"}))])])]),e("div",null,[p[25]||(p[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"API Secret",-1)),e("div",yl,[H(e("input",{"onUpdate:modelValue":p[5]||(p[5]=k=>b.value.apiSecret=k),type:g.value?"text":"password",class:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,8,hl),[[$e,b.value.apiSecret]]),e("button",{onClick:p[6]||(p[6]=k=>g.value=!g.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[g.value?(s(),oe(G(Ce),{key:1,class:"w-5 h-5 text-gray-400"})):(s(),oe(G(je),{key:0,class:"w-5 h-5 text-gray-400"}))])])])]),e("div",null,[p[26]||(p[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Timeout (sekunder)",-1)),H(e("input",{"onUpdate:modelValue":p[7]||(p[7]=k=>b.value.apiTimeout=k),type:"number",min:"5",max:"300",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,b.value.apiTimeout]])])])])])):E("",!0),i.value==="email"?(s(),a("div",_l,[e("div",null,[p[33]||(p[33]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"E-postinställningar",-1)),e("div",wl,[e("div",kl,[e("div",null,[p[28]||(p[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"SMTP Server",-1)),H(e("input",{"onUpdate:modelValue":p[8]||(p[8]=k=>b.value.smtpServer=k),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,b.value.smtpServer]])]),e("div",null,[p[29]||(p[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"SMTP Port",-1)),H(e("input",{"onUpdate:modelValue":p[9]||(p[9]=k=>b.value.smtpPort=k),type:"number",min:"1",max:"65535",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,b.value.smtpPort]])])]),e("div",$l,[e("div",null,[p[30]||(p[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"SMTP Användarnamn",-1)),H(e("input",{"onUpdate:modelValue":p[10]||(p[10]=k=>b.value.smtpUsername=k),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,b.value.smtpUsername]])]),e("div",null,[p[31]||(p[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"SMTP Lösenord",-1)),e("div",Sl,[H(e("input",{"onUpdate:modelValue":p[11]||(p[11]=k=>b.value.smtpPassword=k),type:v.value?"text":"password",class:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,8,Cl),[[$e,b.value.smtpPassword]]),e("button",{onClick:p[12]||(p[12]=k=>v.value=!v.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[v.value?(s(),oe(G(Ce),{key:1,class:"w-5 h-5 text-gray-400"})):(s(),oe(G(je),{key:0,class:"w-5 h-5 text-gray-400"}))])])])]),e("div",null,[p[32]||(p[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Från-adress",-1)),H(e("input",{"onUpdate:modelValue":p[13]||(p[13]=k=>b.value.fromEmail=k),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,b.value.fromEmail]])])])])])):E("",!0),i.value==="sync"?(s(),a("div",jl,[e("div",null,[p[37]||(p[37]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Synkroniseringsinställningar",-1)),e("div",Tl,[e("div",null,[p[34]||(p[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Synkintervall (minuter)",-1)),H(e("input",{"onUpdate:modelValue":p[14]||(p[14]=k=>b.value.syncInterval=k),type:"number",min:"5",max:"1440",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,b.value.syncInterval]])]),e("div",null,[p[35]||(p[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Batch-storlek",-1)),H(e("input",{"onUpdate:modelValue":p[15]||(p[15]=k=>b.value.batchSize=k),type:"number",min:"1",max:"1000",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,b.value.batchSize]])]),e("div",null,[p[36]||(p[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Max försök",-1)),H(e("input",{"onUpdate:modelValue":p[16]||(p[16]=k=>b.value.maxRetries=k),type:"number",min:"1",max:"10",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,b.value.maxRetries]])])])])])):E("",!0),i.value==="roles"?(s(),a("div",Ml,[e("div",null,[p[38]||(p[38]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Användarroller",-1)),e("div",Al,[(s(!0),a(N,null,K(R.value,k=>(s(),a("div",{key:k.id,class:"flex items-center justify-between p-4 border rounded-lg"},[e("div",null,[e("h4",Vl,t(k.name),1),e("p",zl,t(k.description),1)]),e("div",El,[e("span",Ll,t(k.userCount)+" användare",1),e("button",{onClick:_=>o(k),class:"px-3 py-1 text-sm text-blue-600 hover:text-blue-800"}," Redigera ",8,Il)])]))),128))])])])):E("",!0)])]),e("div",Bl,[p[42]||(p[42]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Anslutningsstatus",-1)),e("div",Dl,[e("div",Rl,[e("div",{class:X(["w-3 h-3 rounded-full",T.value.api?"bg-green-500":"bg-red-500"])},null,2),p[39]||(p[39]=e("span",{class:"text-sm text-gray-600"},"API",-1))]),e("div",Fl,[e("div",{class:X(["w-3 h-3 rounded-full",T.value.email?"bg-green-500":"bg-red-500"])},null,2),p[40]||(p[40]=e("span",{class:"text-sm text-gray-600"},"E-post",-1))]),e("div",Hl,[e("div",{class:X(["w-3 h-3 rounded-full",T.value.database?"bg-green-500":"bg-red-500"])},null,2),p[41]||(p[41]=e("span",{class:"text-sm text-gray-600"},"Databas",-1))])])])]))}}),Pl={class:"max-w-screen-xl mx-auto px-4"},Ol={class:"flex items-center justify-between mb-8"},Ul={class:"flex items-center space-x-16"},Nl={class:"flex items-center space-x-4"},Kl={class:"grid grid-cols-12 gap-6"},ql={class:"col-span-12 xl:col-span-7"},Wl={class:"bg-white rounded-2xl shadow-sm border border-gray-200 mb-6 overflow-hidden"},Gl={class:"flex"},Jl=["onClick"],Yl={key:0,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},Ql={key:1,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},Xl={key:2,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},en={key:3,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},tn={key:0,class:"space-y-6"},sn={key:0,class:"flex items-center justify-center py-12"},an={key:1,class:"text-center py-12"},on={key:2,class:"space-y-6"},rn={class:"flex items-center justify-between"},ln={class:"flex items-center space-x-4"},nn={class:"text-sm text-gray-500"},dn={class:"flex items-center space-x-2"},un=["disabled"],cn={class:"text-sm text-gray-500 px-2"},pn=["disabled"],mn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},gn=["onClick"],vn={class:"p-4 border-b border-gray-100"},xn={class:"flex items-start justify-between"},bn={class:"flex-1 min-w-0"},fn={class:"text-base font-bold text-gray-900 group-hover:text-blue-600 transition-colors mb-1"},yn={class:"text-xs text-gray-600 line-clamp-1"},hn={class:"flex space-x-1 ml-2"},_n=["onClick"],wn=["onClick"],kn={class:"p-4"},$n={key:0,class:"mb-3"},Sn={class:"flex flex-wrap gap-1"},Cn={key:0,class:"inline-flex px-1.5 py-0.5 text-xs font-medium rounded-full bg-gray-100 text-gray-600"},jn={class:"mb-3"},Tn={class:"bg-gradient-to-br from-gray-50 to-blue-50 rounded-lg p-2 border border-gray-200 shadow-inner max-h-16 overflow-hidden"},Mn={class:"text-xs text-gray-700 line-clamp-2"},An={class:"flex items-center justify-between text-xs text-gray-500"},Vn={class:"flex items-center space-x-1"},zn={key:1,class:"space-y-6"},En={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},Ln={class:"p-8"},In={class:"space-y-8"},Bn={class:"space-y-3"},Dn=["value"],Rn={class:"space-y-3"},Fn={class:"space-y-3"},Hn=["id","value"],Zn=["for"],Pn={class:"font-medium"},On={class:"text-xs text-gray-500"},Un={class:"space-y-3"},Nn={key:0},Kn={class:"border-2 border-gray-200 rounded-2xl bg-white shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-200"},qn={class:"px-6 py-4 bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 border-b border-gray-200"},Wn={class:"flex items-center justify-between"},Gn={class:"flex items-center space-x-3"},Jn={class:"text-lg font-bold text-gray-900"},Yn={class:"text-sm text-gray-600 mt-1"},Qn={class:"text-right"},Xn={class:"text-sm font-medium text-gray-900"},ei={class:"p-6"},ti={key:0,class:"space-y-6"},si={class:"bg-gradient-to-r from-gray-50 to-blue-50 p-4 rounded-xl border border-gray-200"},ai={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},oi={class:"flex items-center space-x-3"},ri={class:"text-gray-600"},li={class:"border-2 border-gray-200 rounded-xl bg-white shadow-inner overflow-hidden"},ni={class:"p-6 min-h-[200px]"},ii=["innerHTML"],di={class:"bg-gradient-to-r from-gray-50 to-blue-50 p-4 rounded-xl border border-gray-200"},ui={class:"flex items-center justify-between"},ci={key:0,class:"flex items-center space-x-2"},pi={class:"flex space-x-1"},mi={key:0,class:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-600"},gi={key:1,class:"flex items-center justify-center h-48 text-gray-400"},vi={class:"flex justify-end pt-6 border-t border-gray-200"},xi=["disabled"],bi={key:2,class:"space-y-6"},fi={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},yi={key:0,class:"text-center py-12"},hi={key:1,class:"overflow-x-auto"},_i={class:"min-w-full divide-y divide-gray-200"},wi={class:"bg-white divide-y divide-gray-200"},ki={class:"px-6 py-4 whitespace-nowrap"},$i={class:"flex items-center space-x-3"},Si={class:"text-sm font-semibold text-gray-900"},Ci={class:"px-6 py-4 whitespace-nowrap"},ji={class:"text-sm text-gray-900"},Ti={class:"px-6 py-4 whitespace-nowrap"},Mi={class:"flex items-center space-x-2"},Ai={class:"text-sm font-medium text-gray-900"},Vi={class:"px-6 py-4 whitespace-nowrap"},zi={class:"flex items-center space-x-2"},Ei={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800"},Li={class:"text-xs text-gray-500"},Ii={class:"px-6 py-4 whitespace-nowrap"},Bi={class:"flex items-center space-x-2"},Di={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800"},Ri={class:"text-xs text-gray-500"},Fi={class:"px-6 py-4 whitespace-nowrap"},Hi={class:"flex items-center space-x-2"},Zi={class:"text-sm text-gray-900"},Pi={class:"px-6 py-4 whitespace-nowrap"},Oi=["onClick"],Ui={key:3,class:"space-y-6"},Ni={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},Ki={key:0,class:"text-center py-12"},qi={key:1,class:"overflow-x-auto"},Wi={class:"min-w-full divide-y divide-gray-200"},Gi={class:"bg-white divide-y divide-gray-200"},Ji={class:"px-6 py-4 whitespace-nowrap"},Yi={class:"flex items-center space-x-3"},Qi={class:"text-sm font-semibold text-gray-900"},Xi={class:"px-6 py-4 whitespace-nowrap"},ed={class:"text-sm text-gray-900"},td={class:"px-6 py-4 whitespace-nowrap"},sd={class:"flex items-center space-x-2"},ad={class:"text-sm font-medium text-gray-900"},od={class:"px-6 py-4 whitespace-nowrap"},rd={class:"flex items-center space-x-2"},ld={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800"},nd={class:"text-xs text-gray-500"},id={class:"px-6 py-4 whitespace-nowrap"},dd={class:"flex items-center space-x-2"},ud={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800"},cd={class:"text-xs text-gray-500"},pd={class:"px-6 py-4 whitespace-nowrap"},md={class:"flex items-center space-x-2"},gd={class:"text-sm text-gray-900"},vd={class:"col-span-12 xl:col-span-5 xl:sticky xl:top-4"},xd={class:"space-y-6"},bd={key:0,class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},fd={class:"p-6"},yd={class:"mb-4"},hd={class:"font-semibold text-gray-900 mb-2"},_d={class:"text-sm text-gray-600 mb-4"},wd={class:"border border-gray-200 rounded-xl bg-gray-50 overflow-hidden mb-4"},kd={class:"p-4 bg-white"},$d=["innerHTML"],Sd={class:"flex space-x-3"},Cd={key:1,class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},jd={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},Td={class:"p-6"},Md={key:0,class:"text-center py-8"},Ad={key:1,class:"space-y-3"},Vd={class:"flex-1 min-w-0"},zd={class:"text-sm font-semibold text-gray-900 truncate"},Ed={class:"text-xs text-gray-500 mt-1"},Ld={class:"text-right ml-3"},Id={class:"text-sm font-semibold text-gray-900"},Bd={class:"text-xs text-gray-500"},Dd={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},Rd={class:"p-6"},Fd={class:"space-y-4"},Hd={class:"flex items-center justify-between p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl"},Zd={class:"text-lg font-bold text-blue-600"},Pd={class:"flex items-center justify-between p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl"},Od={class:"text-lg font-bold text-green-600"},Ud={class:"flex items-center justify-between p-3 bg-gradient-to-r from-red-50 to-pink-50 rounded-xl"},Nd={class:"text-lg font-bold text-red-600"},Kd={class:"flex items-center justify-between p-3 bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl"},qd={class:"text-lg font-bold text-gray-600"},Wd={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Gd={class:"relative bg-white rounded-2xl shadow-2xl w-full max-w-8xl h-[95vh] flex flex-col overflow-hidden border border-gray-200"},Jd={class:"px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50"},Yd={class:"flex items-center justify-between"},Qd={class:"flex items-center space-x-4"},Xd={class:"text-2xl font-bold text-gray-900"},e0={class:"text-sm text-gray-600 mt-1"},t0={class:"flex-1 overflow-hidden flex"},s0={class:"w-1/2 p-8 border-r border-gray-200 overflow-y-auto bg-gradient-to-b from-gray-50 to-white"},a0={class:"space-y-8"},o0={class:"space-y-2"},r0={class:"space-y-2"},l0={class:"space-y-2"},n0={class:"space-y-2"},i0={class:"relative"},d0={class:"w-1/2 p-8 bg-white"},u0={class:"h-full flex flex-col"},c0={class:"flex-1 border-2 border-gray-200 rounded-2xl bg-gray-50 overflow-hidden shadow-inner"},p0={class:"h-full overflow-y-auto bg-white"},m0={class:"p-8"},g0={key:0,class:"mb-6 pb-4 border-b border-gray-200"},v0={class:"text-xl font-bold text-gray-900"},x0={key:1,class:"space-y-4"},b0=["innerHTML"],f0={key:2,class:"flex items-center justify-center h-64 text-gray-400"},y0={class:"px-8 py-6 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-white flex justify-between items-center"},h0={class:"text-sm text-gray-500"},_0={class:"font-medium"},w0={class:"ml-1"},k0={class:"flex space-x-4"},$0=["disabled"],S0=se({__name:"EmailManagementView",setup(r){const i=S("templates"),u=S([]),d=S([]),c=S([]),g=S(null),v=S(!1),b=S(null),T=S(!1),w=S(!1),R=S(!1),m=S(0),n=S(2),o=S({templateId:"",segmentIds:[],customRecipients:""}),x=S({name:"",subject:"",tagsString:"",html:""}),p=[{key:"templates",label:"Mallar"},{key:"send",label:"Skicka"},{key:"utskick",label:"Utskick"},{key:"history",label:"Historik"}],k=U(()=>o.value.templateId&&(o.value.segmentIds.length>0||o.value.customRecipients.trim())),_=U(()=>u.value.find(C=>C.id===o.value.templateId)),L=U(()=>u.value.slice(m.value,m.value+n.value));function j(){const C=o.value.segmentIds.length,l=o.value.customRecipients.split(`
`).filter(I=>I.trim()).length;return C+l}const ee=U(()=>c.value.sort((C,l)=>new Date(l.sent_at).getTime()-new Date(C.sent_at).getTime()).slice(0,5)),V=U(()=>{const C=c.value.reduce((F,$)=>F+$.to_count,0),l=c.value.reduce((F,$)=>F+$.delivered,0),I=c.value.reduce((F,$)=>F+$.opened,0),A=c.value.reduce((F,$)=>F+($.to_count-$.delivered),0);return{totalSent:C,openRate:l>0?Math.round(I/l*100):0,clickRate:l>0?Math.round(I*.3/l*100):0,bounceRate:C>0?Math.round(A/C*100):0}});async function M(){var C,l,I,A,F,$;if(!T.value){T.value=!0;try{const ae=[];(i.value==="templates"||i.value==="send")&&(ae.push(ne.get("/api/mail/templates")),ae.push(ne.get("/api/segments"))),(i.value==="utskick"||i.value==="history")&&ae.push(ne.get("/api/sent-emails"));const ue=await Promise.all(ae);let ke=0;(i.value==="templates"||i.value==="send")&&(u.value=((l=(C=ue[ke++])==null?void 0:C.data)==null?void 0:l.results)||[],d.value=((A=(I=ue[ke++])==null?void 0:I.data)==null?void 0:A.results)||[]),(i.value==="utskick"||i.value==="history")&&(c.value=(($=(F=ue[ke])==null?void 0:F.data)==null?void 0:$.results)||[])}catch(ae){console.error("Error loading data:",ae)}finally{T.value=!1}}}function f(C){g.value=C,o.value.templateId=C.id}function z(C){b.value=C,x.value={name:C.name,subject:C.subject,tagsString:C.tags.join(", "),html:C.html},v.value=!0}function P(C){confirm(`Är du säker på att du vill ta bort mallen "${C.name}"?`)&&(u.value=u.value.filter(l=>l.id!==C.id))}function y(){v.value=!1,b.value=null,x.value={name:"",subject:"",tagsString:"",html:""}}function h(){var l;const C={id:((l=b.value)==null?void 0:l.id)||`tmpl_${Date.now()}`,name:x.value.name,subject:x.value.subject,tags:x.value.tagsString.split(",").map(I=>I.trim()).filter(I=>I),html:x.value.html};if(b.value){const I=u.value.findIndex(A=>A.id===b.value.id);u.value[I]=C}else u.value.unshift(C);y()}function Z(){if(!k.value)return;const C=u.value.find(F=>F.id===o.value.templateId);if(!C)return;const l=o.value.customRecipients.split(`
`).map(F=>F.trim()).filter(F=>F),I=o.value.segmentIds.length+l.length,A={id:`send_${Date.now()}`,campaign_name:`Utskick ${C.name}`,template_name:C.name,recipient_count:I,delivered:I,opened:Math.floor(I*.7),failed:0,sent_at:new Date().toISOString()};c.value.unshift(A),o.value={templateId:"",segmentIds:[],customRecipients:""},alert(`E-postutskick skickat till ${I} mottagare!`)}function q(C){console.log("View email details:",C)}function re(){g.value&&(console.log("Sending test email for template:",g.value.name),alert(`Test-e-post skickat för "${g.value.name}"`))}function le(C){return new Date(C).toLocaleDateString("sv-SE")}function O(C){const l=document.createElement("div");l.innerHTML=C;const I=l.textContent||l.innerText||"",A=I.trim().substring(0,100);return A.length<I.trim().length?A+"...":A}function B(){m.value>0&&(m.value-=n.value)}function D(){m.value<u.value.length-n.value&&(m.value+=n.value)}return xe(i,()=>{M()}),de(()=>{M()}),(C,l)=>{var I,A,F;return s(),a("div",Pl,[e("div",Ol,[e("div",Ul,[l[13]||(l[13]=Y('<div class="flex items-center space-x-4"><div class="p-3 bg-blue-100 rounded-xl"><svg class="w-8 h-8 text-blue-600" fill="currentColor" viewBox="0 0 20 20"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg></div><div><h1 class="text-3xl font-bold text-gray-900">E-posthantering</h1><p class="text-gray-600 mt-1">Hantera e-postmallar och skicka utskick</p></div></div>',1)),e("div",Nl,[e("button",{onClick:l[0]||(l[0]=$=>w.value=!0),class:"px-6 py-3 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 shadow-sm hover:shadow-md flex items-center space-x-2"},[...l[11]||(l[11]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),e("span",null,"Ny mall",-1)])]),e("button",{onClick:l[1]||(l[1]=$=>R.value=!0),class:"px-6 py-3 text-sm font-semibold text-white bg-blue-600 border border-transparent rounded-xl hover:bg-blue-700 hover:shadow-lg transition-all duration-200 shadow-sm flex items-center space-x-2"},[...l[12]||(l[12]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})],-1),e("span",null,"Skicka e-post",-1)])])])])]),e("div",Kl,[e("section",ql,[e("div",Wl,[e("nav",Gl,[(s(),a(N,null,K(p,$=>e("button",{key:$.key,onClick:ae=>i.value=$.key,class:X(["px-8 py-4 text-sm font-semibold border-b-3 transition-all duration-200 whitespace-nowrap flex items-center space-x-2 relative",i.value===$.key?"border-blue-500 text-blue-600 bg-gradient-to-r from-blue-50 to-indigo-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"])},[$.key==="templates"?(s(),a("svg",Yl,[...l[14]||(l[14]=[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a2 2 0 114 0 2 2 0 01-4 0zm8 0a2 2 0 114 0 2 2 0 01-4 0z","clip-rule":"evenodd"},null,-1)])])):$.key==="send"?(s(),a("svg",Ql,[...l[15]||(l[15]=[e("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"},null,-1),e("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"},null,-1)])])):$.key==="utskick"?(s(),a("svg",Xl,[...l[16]||(l[16]=[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"},null,-1)])])):$.key==="history"?(s(),a("svg",en,[...l[17]||(l[17]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"},null,-1)])])):E("",!0),e("span",null,t($.label),1)],10,Jl)),64))])]),i.value==="templates"?(s(),a("div",tn,[T.value?(s(),a("div",sn,[...l[18]||(l[18]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e("span",{class:"ml-2 text-sm text-gray-600 mt-2 block"},"Laddar mallar...")],-1)])])):u.value.length===0?(s(),a("div",an,[l[19]||(l[19]=Y('<div class="p-4 bg-gray-100 rounded-2xl mb-4 inline-block"><svg class="w-12 h-12 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">Inga mallar än</h3><p class="text-gray-500 mb-4">Skapa din första e-postmall för att komma igång</p>',3)),e("button",{onClick:l[2]||(l[2]=$=>w.value=!0),class:"px-6 py-3 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-xl hover:bg-blue-700 transition-colors"}," Skapa första mallen ")])):(s(),a("div",on,[e("div",rn,[e("div",ln,[l[20]||(l[20]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Mallar",-1)),e("span",nn,t(u.value.length)+" mallar",1)]),e("div",dn,[e("button",{onClick:B,disabled:m.value===0,class:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[...l[21]||(l[21]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,un),e("span",cn,t(m.value+1)+" / "+t(u.value.length),1),e("button",{onClick:D,disabled:m.value>=u.value.length-n.value,class:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[...l[22]||(l[22]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,pn)])]),e("div",mn,[(s(!0),a(N,null,K(L.value,$=>{var ae;return s(),a("div",{key:$.id,class:"bg-white rounded-2xl shadow-sm border border-gray-200 hover:shadow-lg hover:border-blue-300 transition-all duration-200 cursor-pointer group",onClick:ue=>f($)},[e("div",vn,[e("div",xn,[e("div",bn,[e("h3",fn,t($.name),1),e("p",yn,t($.subject),1)]),e("div",hn,[e("button",{onClick:ye(ue=>z($),["stop"]),class:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"Redigera"},[W(G(Qt),{class:"w-3.5 h-3.5"})],8,_n),e("button",{onClick:ye(ue=>P($),["stop"]),class:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Ta bort"},[W(G(Xt),{class:"w-3.5 h-3.5"})],8,wn)])])]),e("div",kn,[(ae=$.tags)!=null&&ae.length?(s(),a("div",$n,[e("div",Sn,[(s(!0),a(N,null,K($.tags.slice(0,2),ue=>(s(),a("span",{key:ue,class:"inline-flex px-1.5 py-0.5 text-xs font-medium rounded-full bg-blue-100 text-blue-800"},t(ue),1))),128)),$.tags.length>2?(s(),a("span",Cn," +"+t($.tags.length-2),1)):E("",!0)])])):E("",!0),e("div",jn,[l[23]||(l[23]=e("div",{class:"text-xs text-gray-500 mb-1 font-medium flex items-center"},[e("svg",{class:"w-3 h-3 mr-1 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),te(" Förhandsvisning ")],-1)),e("div",Tn,[e("div",Mn,t(O($.html)),1)])]),e("div",An,[e("div",Vn,[l[24]||(l[24]=e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),e("span",null,t(le($.updated_at||$.created_at)),1)]),l[25]||(l[25]=e("div",{class:"flex items-center space-x-1 text-blue-600 group-hover:text-blue-700"},[e("span",{class:"text-xs"},"Välj"),e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))])])],8,gn)}),128))])]))])):E("",!0),i.value==="send"?(s(),a("div",zn,[e("div",En,[l[42]||(l[42]=Y('<div class="px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50"><div class="flex items-center space-x-3"><div class="p-2 bg-green-100 rounded-lg"><svg class="w-6 h-6 text-green-600" fill="currentColor" viewBox="0 0 20 20"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg></div><div><h3 class="text-xl font-bold text-gray-900"> Skicka e-postutskick </h3><p class="text-sm text-gray-600 mt-1"> Välj mall och mottagare för att skicka e-postutskick </p></div></div></div>',1)),e("div",Ln,[e("div",In,[e("div",Bn,[l[27]||(l[27]=e("label",{class:"block text-sm font-semibold text-gray-800 flex items-center"},[e("svg",{class:"w-4 h-4 mr-2 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a2 2 0 114 0 2 2 0 01-4 0zm8 0a2 2 0 114 0 2 2 0 01-4 0z","clip-rule":"evenodd"})]),te(" Välj mall ")],-1)),H(e("select",{"onUpdate:modelValue":l[3]||(l[3]=$=>o.value.templateId=$),class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md"},[l[26]||(l[26]=e("option",{value:""},"Välj en mall...",-1)),(s(!0),a(N,null,K(u.value,$=>(s(),a("option",{key:$.id,value:$.id},t($.name),9,Dn))),128))],512),[[ie,o.value.templateId]])]),e("div",Rn,[l[28]||(l[28]=e("label",{class:"block text-sm font-semibold text-gray-800 flex items-center"},[e("svg",{class:"w-4 h-4 mr-2 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zM8 7a3 3 0 000 6h4a3 3 0 000-6H8z","clip-rule":"evenodd"})]),te(" Målgrupper ")],-1)),e("div",Fn,[(s(!0),a(N,null,K(d.value,$=>(s(),a("div",{key:$.id,class:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl border border-gray-200 hover:bg-blue-50 hover:border-blue-300 transition-all duration-200"},[H(e("input",{id:$.id,"onUpdate:modelValue":l[4]||(l[4]=ae=>o.value.segmentIds=ae),value:$.id,type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,Hn),[[Be,o.value.segmentIds]]),e("label",{for:$.id,class:"text-sm text-gray-700 flex-1 cursor-pointer"},[e("div",Pn,t($.name),1),e("div",On,t($.count_hint)+" mottagare",1)],8,Zn)]))),128))])]),e("div",Un,[l[29]||(l[29]=e("label",{class:"block text-sm font-semibold text-gray-800 flex items-center"},[e("svg",{class:"w-4 h-4 mr-2 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]),te(" Anpassade mottagare ")],-1)),H(e("textarea",{"onUpdate:modelValue":l[5]||(l[5]=$=>o.value.customRecipients=$),placeholder:"En e-postadress per rad...",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md resize-none",rows:"4"},null,512),[[Q,o.value.customRecipients]]),l[30]||(l[30]=e("div",{class:"text-xs text-gray-500 flex items-center"},[e("svg",{class:"w-4 h-4 mr-1 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),te(" Lägg till specifika e-postadresser som ska få meddelandet ")],-1))]),o.value.templateId?(s(),a("div",Nn,[l[40]||(l[40]=Y('<div class="flex items-center justify-between mb-4"><label class="block text-sm font-semibold text-gray-800 flex items-center"><svg class="w-5 h-5 mr-2 text-blue-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> Förhandsvisning av e-post </label><div class="flex items-center space-x-2 text-xs text-gray-500 bg-green-50 px-3 py-1 rounded-full"><div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div><span class="font-medium">Live förhandsvisning</span></div></div>',1)),e("div",Kn,[e("div",qn,[e("div",Wn,[e("div",Gn,[l[31]||(l[31]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})])],-1)),e("div",null,[e("h4",Jn,t(((I=_.value)==null?void 0:I.subject)||"Välj en mall för att se förhandsvisning"),1),e("p",Yn,t(((A=_.value)==null?void 0:A.name)||"Ingen mall vald"),1)])]),e("div",Qn,[e("div",Xn,t(j())+" mottagare",1),l[32]||(l[32]=e("div",{class:"text-xs text-gray-500"},"kommer att få detta meddelande",-1))])])]),e("div",ei,[_.value?(s(),a("div",ti,[e("div",si,[e("div",ai,[l[35]||(l[35]=Y('<div class="flex items-center space-x-3"><div class="p-2 bg-white rounded-lg shadow-sm"><svg class="w-4 h-4 text-blue-600" fill="currentColor" viewBox="0 0 20 20"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg></div><div><div class="font-medium text-gray-900">Från</div><div class="text-gray-600">Allanit Service</div></div></div>',1)),e("div",oi,[l[34]||(l[34]=e("div",{class:"p-2 bg-white rounded-lg shadow-sm"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zM8 7a3 3 0 000 6h4a3 3 0 000-6H8z","clip-rule":"evenodd"})])],-1)),e("div",null,[l[33]||(l[33]=e("div",{class:"font-medium text-gray-900"},"Till",-1)),e("div",ri,t(j())+" mottagare",1)])])])]),e("div",li,[l[36]||(l[36]=Y('<div class="bg-gray-50 px-4 py-2 border-b border-gray-200"><div class="flex items-center space-x-2 text-xs text-gray-500"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><span class="font-medium">E-POSTINNEHÅLL</span></div></div>',1)),e("div",ni,[e("div",{innerHTML:_.value.html,class:"text-gray-700 prose prose-sm max-w-none prose-headings:text-gray-900 prose-p:text-gray-700 prose-a:text-blue-600 prose-strong:text-gray-900"},null,8,ii)])]),e("div",di,[e("div",ui,[l[38]||(l[38]=e("div",{class:"flex items-center space-x-2 text-sm text-gray-600"},[e("svg",{class:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),e("span",null,"Detta är en förhandsvisning av e-postmeddelandet")],-1)),(F=_.value.tags)!=null&&F.length?(s(),a("div",ci,[l[37]||(l[37]=e("span",{class:"text-xs text-gray-500"},"Taggar:",-1)),e("div",pi,[(s(!0),a(N,null,K(_.value.tags.slice(0,3),$=>(s(),a("span",{key:$,class:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"},t($),1))),128)),_.value.tags.length>3?(s(),a("span",mi," +"+t(_.value.tags.length-3),1)):E("",!0)])])):E("",!0)])])])):(s(),a("div",gi,[...l[39]||(l[39]=[Y('<div class="text-center"><div class="p-4 bg-gray-100 rounded-2xl mb-4"><svg class="w-12 h-12 mx-auto text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><p class="text-sm font-medium">Välj en mall ovan för att se förhandsvisning</p><p class="text-xs text-gray-400 mt-1">Förhandsvisningen uppdateras automatiskt</p></div>',1)])]))])])])):E("",!0),e("div",vi,[e("button",{onClick:Z,disabled:!k.value,class:"px-8 py-4 text-sm font-semibold text-white bg-blue-600 border border-transparent rounded-xl hover:bg-blue-700 hover:shadow-lg transition-all duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[...l[41]||(l[41]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})],-1),e("span",null,"Skicka e-postutskick",-1)])],8,xi)])])])])])):E("",!0),i.value==="utskick"?(s(),a("div",bi,[e("div",fi,[l[49]||(l[49]=Y('<div class="px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50"><div class="flex items-center space-x-3"><div class="p-2 bg-blue-100 rounded-lg"><svg class="w-6 h-6 text-blue-600" fill="currentColor" viewBox="0 0 20 20"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg></div><div><h3 class="text-xl font-bold text-gray-900"> Skickade e-postmeddelanden </h3><p class="text-sm text-gray-600 mt-1"> Visa alla skickade e-postutskick och deras statistik </p></div></div></div>',1)),c.value.length===0?(s(),a("div",yi,[...l[43]||(l[43]=[Y('<div class="p-4 bg-gray-100 rounded-2xl mb-4 inline-block"><svg class="w-12 h-12 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">Inga utskick än</h3><p class="text-gray-500 mb-4">Skicka ditt första e-postutskick för att se statistik här</p>',3)])])):(s(),a("div",hi,[e("table",_i,[l[48]||(l[48]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Kampanj "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Mall "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Mottagare "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Levererat "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Öppnat "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Skickat "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Åtgärder ")])],-1)),e("tbody",wi,[(s(!0),a(N,null,K(c.value,$=>(s(),a("tr",{key:$.id,class:"hover:bg-blue-50 transition-colors duration-200"},[e("td",ki,[e("div",$i,[l[44]||(l[44]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})])],-1)),e("div",null,[e("div",Si,t($.campaign_name),1)])])]),e("td",Ci,[e("div",ji,t($.template_name),1)]),e("td",Ti,[e("div",Mi,[l[45]||(l[45]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zM8 7a3 3 0 000 6h4a3 3 0 000-6H8z","clip-rule":"evenodd"})],-1)),e("span",Ai,t($.to_count),1)])]),e("td",Vi,[e("div",zi,[e("span",Ei,t($.delivered),1),e("span",Li,t(Math.round($.delivered/$.to_count*100))+"% ",1)])]),e("td",Ii,[e("div",Bi,[e("span",Di,t($.opened),1),e("span",Ri,t(Math.round($.opened/$.delivered*100))+"% ",1)])]),e("td",Fi,[e("div",Hi,[l[46]||(l[46]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),e("span",Zi,t(le($.sent_at)),1)])]),e("td",Pi,[e("button",{onClick:ae=>q($),class:"inline-flex items-center space-x-2 px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors duration-200"},[...l[47]||(l[47]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),e("path",{"fill-rule":"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})],-1),e("span",null,"Visa detaljer",-1)])],8,Oi)])]))),128))])])]))])])):E("",!0),i.value==="history"?(s(),a("div",Ui,[e("div",Ni,[l[55]||(l[55]=Y('<div class="px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50"><div class="flex items-center space-x-3"><div class="p-2 bg-indigo-100 rounded-lg"><svg class="w-6 h-6 text-indigo-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg></div><div><h3 class="text-xl font-bold text-gray-900"> Utskickshistorik </h3><p class="text-sm text-gray-600 mt-1"> Komplett historik över alla e-postutskick och deras prestanda </p></div></div></div>',1)),c.value.length===0?(s(),a("div",Ki,[...l[50]||(l[50]=[Y('<div class="p-4 bg-gray-100 rounded-2xl mb-4 inline-block"><svg class="w-12 h-12 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">Ingen historik än</h3><p class="text-gray-500 mb-4">Skicka e-postutskick för att se historik och statistik här</p>',3)])])):(s(),a("div",qi,[e("table",Wi,[l[54]||(l[54]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Kampanj "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Mall "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Mottagare "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Levererat "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Öppnat "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Skickat ")])],-1)),e("tbody",Gi,[(s(!0),a(N,null,K(c.value,$=>(s(),a("tr",{key:$.id,class:"hover:bg-indigo-50 transition-colors duration-200"},[e("td",Ji,[e("div",Yi,[l[51]||(l[51]=e("div",{class:"p-2 bg-indigo-100 rounded-lg"},[e("svg",{class:"w-4 h-4 text-indigo-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})])],-1)),e("div",null,[e("div",Qi,t($.campaign_name),1)])])]),e("td",Xi,[e("div",ed,t($.template_name),1)]),e("td",td,[e("div",sd,[l[52]||(l[52]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zM8 7a3 3 0 000 6h4a3 3 0 000-6H8z","clip-rule":"evenodd"})],-1)),e("span",ad,t($.to_count),1)])]),e("td",od,[e("div",rd,[e("span",ld,t($.delivered),1),e("span",nd,t(Math.round($.delivered/$.to_count*100))+"% ",1)])]),e("td",id,[e("div",dd,[e("span",ud,t($.opened),1),e("span",cd,t(Math.round($.opened/$.delivered*100))+"% ",1)])]),e("td",pd,[e("div",md,[l[53]||(l[53]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),e("span",gd,t(le($.sent_at)),1)])])]))),128))])])]))])])):E("",!0)]),e("aside",vd,[e("div",xd,[g.value&&i.value==="templates"?(s(),a("div",bd,[l[59]||(l[59]=Y('<div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50"><div class="flex items-center space-x-3"><div class="p-2 bg-blue-100 rounded-lg"><svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg></div><h3 class="text-lg font-bold text-gray-900"> Förhandsvisning </h3></div></div>',1)),e("div",fd,[e("div",yd,[e("h4",hd,t(g.value.subject),1),e("div",_d,t(g.value.name),1)]),e("div",wd,[l[56]||(l[56]=Y('<div class="bg-gray-100 px-3 py-2 border-b border-gray-200"><div class="flex items-center space-x-2 text-xs text-gray-500"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><span class="font-medium">FÖRHANDSVISNING</span></div></div>',1)),e("div",kd,[e("div",{innerHTML:g.value.html,class:"text-sm text-gray-700 prose prose-sm max-w-none prose-headings:text-gray-900 prose-p:text-gray-700 prose-a:text-blue-600 prose-strong:text-gray-900"},null,8,$d)])]),e("div",Sd,[e("button",{onClick:l[6]||(l[6]=$=>z(g.value)),class:"flex-1 px-4 py-3 text-sm font-semibold text-white bg-blue-600 rounded-xl hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center space-x-2"},[...l[57]||(l[57]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1),e("span",null,"Redigera",-1)])]),e("button",{onClick:re,class:"flex-1 px-4 py-3 text-sm font-semibold text-gray-700 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors duration-200 flex items-center justify-center space-x-2"},[...l[58]||(l[58]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})],-1),e("span",null,"Skicka test",-1)])])])])])):i.value==="templates"?(s(),a("div",Cd,[...l[60]||(l[60]=[Y('<div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50"><div class="flex items-center space-x-3"><div class="p-2 bg-gray-100 rounded-lg"><svg class="w-5 h-5 text-gray-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg></div><h3 class="text-lg font-bold text-gray-900"> Välj en mall </h3></div></div><div class="p-6 text-center"><div class="p-4 bg-gray-100 rounded-2xl mb-4 inline-block"><svg class="w-12 h-12 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><p class="text-sm text-gray-500">Klicka på en mall för att se förhandsvisning</p></div>',2)])])):E("",!0),e("div",jd,[l[62]||(l[62]=Y('<div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50"><div class="flex items-center space-x-3"><div class="p-2 bg-green-100 rounded-lg"><svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 20 20"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg></div><h3 class="text-lg font-bold text-gray-900"> Senaste utskick </h3></div></div>',1)),e("div",Td,[ee.value.length===0?(s(),a("div",Md,[...l[61]||(l[61]=[e("div",{class:"p-3 bg-gray-100 rounded-xl mb-3 inline-block"},[e("svg",{class:"w-8 h-8 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})])],-1),e("p",{class:"text-sm text-gray-500"},"Inga utskick än",-1)])])):(s(),a("div",Ad,[(s(!0),a(N,null,K(ee.value,$=>(s(),a("div",{key:$.id,class:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl border border-gray-200 hover:shadow-sm transition-shadow duration-200"},[e("div",Vd,[e("div",zd,t($.campaign_name),1),e("div",Ed,t(le($.sent_at)),1)]),e("div",Ld,[e("div",Id,t($.delivered)+"/"+t($.to_count),1),e("div",Bd,t(Math.round($.opened/$.delivered*100)||0)+"% öppnat ",1)])]))),128))]))])]),e("div",Dd,[l[67]||(l[67]=Y('<div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50"><div class="flex items-center space-x-3"><div class="p-2 bg-purple-100 rounded-lg"><svg class="w-5 h-5 text-purple-600" fill="currentColor" viewBox="0 0 20 20"><path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"></path></svg></div><h3 class="text-lg font-bold text-gray-900">Statistik</h3></div></div>',1)),e("div",Rd,[e("div",Fd,[e("div",Hd,[l[63]||(l[63]=Y('<div class="flex items-center space-x-3"><div class="p-2 bg-blue-100 rounded-lg"><svg class="w-4 h-4 text-blue-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path></svg></div><span class="text-sm font-medium text-gray-700">Öppningsgrad</span></div>',1)),e("span",Zd,t(V.value.openRate)+"%",1)]),e("div",Pd,[l[64]||(l[64]=Y('<div class="flex items-center space-x-3"><div class="p-2 bg-green-100 rounded-lg"><svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg></div><span class="text-sm font-medium text-gray-700">Klickgrad</span></div>',1)),e("span",Od,t(V.value.clickRate)+"%",1)]),e("div",Ud,[l[65]||(l[65]=Y('<div class="flex items-center space-x-3"><div class="p-2 bg-red-100 rounded-lg"><svg class="w-4 h-4 text-red-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div><span class="text-sm font-medium text-gray-700">Studsgrad</span></div>',1)),e("span",Nd,t(V.value.bounceRate)+"%",1)]),e("div",Kd,[l[66]||(l[66]=Y('<div class="flex items-center space-x-3"><div class="p-2 bg-gray-100 rounded-lg"><svg class="w-4 h-4 text-gray-600" fill="currentColor" viewBox="0 0 20 20"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg></div><span class="text-sm font-medium text-gray-700">Totalt skickat</span></div>',1)),e("span",qd,t(V.value.totalSent),1)])])])])])])]),v.value?(s(),a("div",Wd,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:y}),e("div",Gd,[e("div",Jd,[e("div",Yd,[e("div",Qd,[l[68]||(l[68]=e("div",{class:"p-3 bg-blue-100 rounded-xl"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",null,[e("h3",Xd,t(b.value?"Redigera mall":"Skapa ny mall"),1),e("p",e0,t(b.value?"Uppdatera din e-postmall":"Skapa en ny e-postmall från grunden"),1)])]),e("button",{onClick:y,class:"p-3 text-gray-400 hover:text-gray-600 hover:bg-white/80 rounded-xl transition-all duration-200 group"},[W(G(ge),{class:"w-6 h-6 group-hover:scale-110 transition-transform"})])])]),e("div",t0,[e("div",s0,[e("div",a0,[e("div",o0,[l[69]||(l[69]=e("label",{class:"block text-sm font-semibold text-gray-800 flex items-center"},[e("svg",{class:"w-4 h-4 mr-2 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a2 2 0 114 0 2 2 0 01-4 0zm8 0a2 2 0 114 0 2 2 0 01-4 0z","clip-rule":"evenodd"})]),te(" Mallnamn ")],-1)),H(e("input",{"onUpdate:modelValue":l[7]||(l[7]=$=>x.value.name=$),type:"text",placeholder:"T.ex. Veckorapport BRF",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md"},null,512),[[Q,x.value.name]])]),e("div",r0,[l[70]||(l[70]=e("label",{class:"block text-sm font-semibold text-gray-800 flex items-center"},[e("svg",{class:"w-4 h-4 mr-2 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]),te(" E-postämne ")],-1)),H(e("input",{"onUpdate:modelValue":l[8]||(l[8]=$=>x.value.subject=$),type:"text",placeholder:"T.ex. Veckorapport från Allanit Service",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md"},null,512),[[Q,x.value.subject]])]),e("div",l0,[l[71]||(l[71]=e("label",{class:"block text-sm font-semibold text-gray-800 flex items-center"},[e("svg",{class:"w-4 h-4 mr-2 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})]),te(" Taggar ")],-1)),H(e("input",{"onUpdate:modelValue":l[9]||(l[9]=$=>x.value.tagsString=$),type:"text",placeholder:"brf, vinter, info (komma-separerat)",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md"},null,512),[[Q,x.value.tagsString]]),l[72]||(l[72]=e("div",{class:"flex items-start space-x-2 text-xs text-gray-500"},[e("svg",{class:"w-4 h-4 mt-0.5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),e("span",null,"Använd taggar för att kategorisera och organisera dina mallar")],-1))]),e("div",n0,[l[74]||(l[74]=e("label",{class:"block text-sm font-semibold text-gray-800 flex items-center"},[e("svg",{class:"w-4 h-4 mr-2 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})]),te(" HTML-innehåll ")],-1)),e("div",i0,[H(e("textarea",{"onUpdate:modelValue":l[10]||(l[10]=$=>x.value.html=$),placeholder:"<h1>Hej!</h1><p>Detta är din mall...</p>",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 font-mono text-sm bg-white shadow-sm resize-none hover:shadow-md",rows:"20"},null,512),[[Q,x.value.html]]),l[73]||(l[73]=e("div",{class:"absolute top-3 right-3 text-xs text-gray-400 bg-white px-2 py-1 rounded-md border"}," HTML ",-1))]),l[75]||(l[75]=e("div",{class:"flex items-start space-x-2 text-xs text-gray-500"},[e("svg",{class:"w-4 h-4 mt-0.5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),e("span",null,"Använd HTML för att formatera e-postmeddelandet professionellt")],-1))])])]),e("div",d0,[e("div",u0,[l[79]||(l[79]=Y('<div class="flex items-center justify-between mb-6"><div class="flex items-center space-x-3"><div class="p-2 bg-green-100 rounded-lg"><svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg></div><h4 class="text-xl font-bold text-gray-900"> Live-förhandsvisning </h4></div><div class="flex items-center space-x-2 text-sm text-gray-500 bg-green-50 px-3 py-1 rounded-full"><div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div><span class="font-medium">Live</span></div></div>',1)),e("div",c0,[e("div",p0,[e("div",m0,[x.value.subject?(s(),a("div",g0,[l[76]||(l[76]=Y('<div class="flex items-center space-x-2 mb-2"><svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg><span class="text-xs text-gray-500 font-medium">ÄMNE</span></div>',1)),e("h2",v0,t(x.value.subject),1)])):E("",!0),x.value.html?(s(),a("div",x0,[l[77]||(l[77]=e("div",{class:"flex items-center space-x-2 mb-4"},[e("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})]),e("span",{class:"text-xs text-gray-500 font-medium"},"INNEHÅLL")],-1)),e("div",{innerHTML:x.value.html,class:"text-gray-700 prose prose-sm max-w-none prose-headings:text-gray-900 prose-p:text-gray-700 prose-a:text-blue-600 prose-strong:text-gray-900"},null,8,b0)])):(s(),a("div",f0,[...l[78]||(l[78]=[Y('<div class="text-center"><div class="p-4 bg-gray-100 rounded-2xl mb-4"><svg class="w-12 h-12 mx-auto text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><p class="text-sm font-medium">Skriv HTML-innehåll för att se förhandsvisning</p><p class="text-xs text-gray-400 mt-1">Förhandsvisningen uppdateras automatiskt</p></div>',1)])]))])])])])])]),e("div",y0,[e("div",h0,[e("span",_0,t(b.value?"Redigerar":"Skapar")+":",1),e("span",w0,t(x.value.name||"Namnlös mall"),1)]),e("div",k0,[e("button",{onClick:y,class:"px-6 py-3 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 shadow-sm hover:shadow-md"}," Avbryt "),e("button",{onClick:h,class:"px-8 py-3 text-sm font-semibold text-white bg-blue-600 border border-transparent rounded-xl hover:bg-blue-700 hover:shadow-lg transition-all duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",disabled:!x.value.name||!x.value.subject},t(b.value?"Uppdatera mall":"Skapa mall"),9,$0)])])])])):E("",!0)])}}});async function C0(){return[...as].sort((r,i)=>new Date(i.createdAt).getTime()-new Date(r.createdAt).getTime())}const j0={class:"text-xs font-semibold text-gray-900 mb-1 line-clamp-1"},T0={class:"text-[10px] text-gray-500 mb-1"},M0={class:"text-[10px] text-gray-600 line-clamp-2"},A0=se({__name:"JournalCard",props:{journal:{}},emits:["click"],setup(r){function i(u){return new Date(u).toLocaleDateString("sv-SE")}return(u,d)=>(s(),a("article",{class:"rounded-md border p-2 bg-white shadow-sm hover:shadow-md transition cursor-pointer",onClick:d[0]||(d[0]=c=>u.$emit("click",r.journal))},[e("h4",j0,t(r.journal.title),1),e("p",T0,t(i(r.journal.createdAt)),1),e("p",M0,t(r.journal.body),1)]))}}),yt=(r,i)=>{const u=r.__vccOpts||r;for(const[d,c]of i)u[d]=c;return u},V0=yt(A0,[["__scopeId","data-v-e32a4dba"]]),z0={class:"space-y-6"},E0={class:"flex items-center justify-between mb-6"},L0={class:"flex items-center space-x-3"},I0={key:0,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},B0={key:1,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},D0={class:"flex items-center space-x-4 mb-4"},R0={class:"relative"},F0=["src","alt"],H0={class:"flex-1 min-w-0"},Z0={class:"text-lg font-semibold text-gray-900 truncate"},P0={class:"text-sm text-gray-600"},O0={class:"text-xs text-gray-500 truncate"},U0={class:"space-y-2 mb-4"},N0={class:"flex items-center space-x-2"},K0={class:"text-sm text-gray-600 truncate"},q0={class:"flex items-center space-x-2"},W0={class:"text-sm text-gray-600"},G0={class:"mt-4"},J0={key:0,class:"grid grid-cols-3 gap-2"},Y0={key:1,class:"text-xs text-gray-500 py-2 text-center"},Q0={class:"pt-4 border-t border-gray-100 mt-4"},X0=["onClick"],eu={key:2,class:"fixed inset-0 z-50 overflow-hidden"},tu={class:"absolute inset-0 flex items-center justify-center p-4"},su={class:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden"},au={class:"px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50"},ou={class:"flex items-center justify-between"},ru={class:"flex items-center space-x-4"},lu={class:"relative"},nu=["src","alt"],iu={class:"text-2xl font-bold text-gray-900"},du={class:"text-lg text-gray-600"},uu={class:"text-sm text-gray-500"},cu={class:"flex-1 overflow-y-auto p-8"},pu={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},mu={class:"space-y-6"},gu={class:"bg-gradient-to-br from-gray-50 to-blue-50 rounded-xl p-6 border border-gray-200"},vu={class:"space-y-3"},xu={class:"flex items-center space-x-3"},bu={class:"text-gray-700"},fu={class:"flex items-center space-x-3"},yu={class:"text-gray-700"},hu={class:"flex items-center space-x-3"},_u={class:"text-gray-700"},wu={class:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border border-gray-200"},ku={class:"space-y-3"},$u={class:"flex justify-between"},Su={class:"flex justify-between"},Cu={class:"font-medium text-gray-900"},ju={class:"flex justify-between"},Tu={class:"font-medium text-gray-900"},Mu={class:"space-y-6"},Au={class:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border border-gray-200"},Vu={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},zu={key:0,class:"space-y-3 max-h-64 overflow-y-auto"},Eu=["onClick"],Lu={class:"font-medium text-gray-900 text-sm"},Iu={class:"text-xs text-gray-600 mt-1 line-clamp-2"},Bu={class:"flex items-center justify-between mt-2"},Du={class:"text-xs text-gray-500"},Ru={class:"text-xs text-gray-500"},Fu={key:1,class:"text-center py-8"},Hu={key:3,class:"fixed inset-0 z-50 overflow-hidden"},Zu={class:"absolute right-0 top-0 h-full w-96 bg-white shadow-xl"},Pu={class:"h-full flex flex-col"},Ou={class:"px-6 py-4 border-b border-gray-200"},Uu={class:"flex items-center justify-between"},Nu={class:"text-lg font-semibold text-gray-900"},Ku={class:"flex-1 overflow-y-auto p-6"},qu={class:"space-y-4"},Wu={class:"text-sm text-gray-700 leading-relaxed"},Gu={class:"pt-4 border-t border-gray-200"},Ju={class:"space-y-2 text-sm text-gray-600"},Yu={class:"flex justify-between"},Qu={class:"flex justify-between"},Xu=se({__name:"EmployeesView",setup(r){const i=S([]),u=S([]),d=S(null),c=S(null),g=S(!0);let v;const b=U(()=>{const V=new Map;for(const M of u.value){const f=V.get(M.employeeId)??[];f.push(M),V.set(M.employeeId,f)}return V});async function T(){try{const[V,M]=await Promise.all([ne.get("/api/employees"),C0()]);i.value=V.data.results,u.value=M}catch(V){console.error("Error loading data:",V)}finally{g.value=!1}}function w(V){return b.value.get(V.toString())??[]}function R(V){d.value=V}function m(){d.value=null}function n(V){c.value=V}function o(){c.value=null}function x(){console.log("Edit journal:",c.value)}function p(V){return{active:"bg-green-500",inactive:"bg-gray-500",on_leave:"bg-yellow-500"}[V]||"bg-gray-500"}function k(V){return{active:"text-green-600",inactive:"text-gray-600",on_leave:"text-yellow-600"}[V]||"text-gray-600"}function _(V){return{active:"Aktiv",inactive:"Inaktiv",on_leave:"Ledig"}[V]||V}function L(){console.log("Edit employee:",d.value),alert(`Redigera medarbetare: ${d.value.name}`)}function j(V){return new Date(V).toLocaleDateString("sv-SE")}function ee(V){const M=V.target;M.src="/src/resources/medarbetare/default.jpg"}return de(()=>{T()}),(V,M)=>(s(),a("div",z0,[e("div",E0,[M[1]||(M[1]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Medarbetare"),e("p",{class:"text-gray-600"},"Hantera medarbetare och deras journaler")],-1)),e("div",L0,[e("button",{onClick:M[0]||(M[0]=f=>console.log("Add employee")),class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700"}," Lägg till medarbetare ")])]),g.value?(s(),a("div",I0,[(s(),a(N,null,K(3,f=>e("div",{key:f,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse"},[...M[2]||(M[2]=[Y('<div class="flex items-center space-x-4 mb-4" data-v-56ff08cb><div class="w-16 h-16 bg-gray-300 rounded-full" data-v-56ff08cb></div><div class="flex-1" data-v-56ff08cb><div class="h-4 bg-gray-300 rounded w-1/3 mb-2" data-v-56ff08cb></div><div class="h-3 bg-gray-300 rounded w-1/4 mb-1" data-v-56ff08cb></div><div class="h-3 bg-gray-300 rounded w-1/5" data-v-56ff08cb></div></div></div><div class="space-y-2" data-v-56ff08cb><div class="h-3 bg-gray-300 rounded w-1/2" data-v-56ff08cb></div><div class="h-3 bg-gray-300 rounded w-1/3" data-v-56ff08cb></div></div>',2)])])),64))])):(s(),a("div",B0,[(s(!0),a(N,null,K(i.value,f=>(s(),a("div",{key:f.id,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg hover:border-blue-300 transition-all duration-200"},[e("div",D0,[e("div",R0,[e("img",{src:f.image,alt:f.name,class:"w-16 h-16 rounded-full object-cover border-2 border-gray-200",onError:ee},null,40,F0),e("div",{class:X(["absolute -bottom-1 -right-1 w-5 h-5 rounded-full border-2 border-white shadow-sm",p(f.status)])},null,2)]),e("div",H0,[e("h3",Z0,t(f.name),1),e("p",P0,t(f.role),1),e("p",O0,t(f.subsidiary),1)])]),e("div",U0,[e("div",N0,[W(G(qe),{class:"w-4 h-4 text-gray-400 flex-shrink-0"}),e("span",K0,t(f.email),1)]),e("div",q0,[W(G(We),{class:"w-4 h-4 text-gray-400 flex-shrink-0"}),e("span",W0,t(f.phone),1)])]),e("section",G0,[M[3]||(M[3]=e("h3",{class:"text-sm font-medium text-gray-900 mb-3"},"Journaler",-1)),(fe(v)?v.value=w(f.id):v=w(f.id))&&G(v).length?(s(),a("div",J0,[(s(!0),a(N,null,K(G(v),z=>(s(),oe(V0,{key:z.id,journal:z,onClick:n},null,8,["journal"]))),128))])):(s(),a("p",Y0,"Inga journaler ännu."))]),e("div",Q0,[e("button",{onClick:z=>R(f),class:"w-full px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 transition-colors"}," Visa detaljer ",8,X0)])]))),128))])),d.value?(s(),a("div",eu,[e("div",{class:"absolute inset-0 bg-gray-500 bg-opacity-75",onClick:m}),e("div",tu,[e("div",su,[e("div",au,[e("div",ou,[e("div",ru,[e("div",lu,[e("img",{src:d.value.image,alt:d.value.name,class:"w-16 h-16 rounded-full object-cover border-4 border-white shadow-lg",onError:ee},null,40,nu),e("div",{class:X(["absolute -bottom-1 -right-1 w-6 h-6 rounded-full border-4 border-white shadow-sm",p(d.value.status)])},null,2)]),e("div",null,[e("h3",iu,t(d.value.name),1),e("p",du,t(d.value.role),1),e("p",uu,t(d.value.subsidiary),1)])]),e("button",{onClick:m,class:"p-3 text-gray-400 hover:text-gray-600 hover:bg-white/80 rounded-xl transition-all duration-200"},[W(G(ge),{class:"w-6 h-6"})])])]),e("div",cu,[e("div",pu,[e("div",mu,[e("div",gu,[M[5]||(M[5]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})]),te(" Kontaktinformation ")],-1)),e("div",vu,[e("div",xu,[W(G(qe),{class:"w-5 h-5 text-gray-400"}),e("span",bu,t(d.value.email),1)]),e("div",fu,[W(G(We),{class:"w-5 h-5 text-gray-400"}),e("span",yu,t(d.value.phone),1)]),e("div",hu,[M[4]||(M[4]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),e("span",_u,t(d.value.address||"Adress inte angiven"),1)])])]),e("div",wu,[M[9]||(M[9]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z","clip-rule":"evenodd"})]),te(" Anställningsinformation ")],-1)),e("div",ku,[e("div",$u,[M[6]||(M[6]=e("span",{class:"text-gray-600"},"Status:",-1)),e("span",{class:X(["font-medium",k(d.value.status)])},t(_(d.value.status)),3)]),e("div",Su,[M[7]||(M[7]=e("span",{class:"text-gray-600"},"Anställningsdatum:",-1)),e("span",Cu,t(d.value.hireDate||"Ej angivet"),1)]),e("div",ju,[M[8]||(M[8]=e("span",{class:"text-gray-600"},"Avdelning:",-1)),e("span",Tu,t(d.value.department||"Ej angivet"),1)])])])]),e("div",Mu,[e("div",Au,[e("h4",Vu,[M[10]||(M[10]=e("svg",{class:"w-5 h-5 mr-2 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"})],-1)),te(" Journaler ("+t(w(d.value.id).length)+") ",1)]),w(d.value.id).length>0?(s(),a("div",zu,[(s(!0),a(N,null,K(w(d.value.id),f=>(s(),a("div",{key:f.id,onClick:z=>n(f),class:"p-3 bg-white rounded-lg border border-gray-200 hover:border-blue-300 hover:shadow-sm transition-all duration-200 cursor-pointer"},[e("h5",Lu,t(f.title),1),e("p",Iu,t(f.body),1),e("div",Bu,[e("span",Du,t(f.author),1),e("span",Ru,t(j(f.createdAt)),1)])],8,Eu))),128))])):(s(),a("div",Fu,[...M[11]||(M[11]=[e("svg",{class:"w-12 h-12 text-gray-300 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"text-sm text-gray-500"},"Inga journaler ännu",-1)])]))])])])]),e("div",{class:"px-8 py-6 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-white"},[e("div",{class:"flex space-x-4"},[e("button",{onClick:m,class:"px-6 py-3 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 shadow-sm hover:shadow-md"}," Stäng "),e("button",{onClick:L,class:"px-6 py-3 text-sm font-semibold text-white bg-blue-600 border border-transparent rounded-xl hover:bg-blue-700 hover:shadow-lg transition-all duration-200 shadow-sm"}," Redigera medarbetare ")])])])])])):E("",!0),c.value?(s(),a("div",Hu,[e("div",{class:"absolute inset-0 bg-gray-500 bg-opacity-75",onClick:o}),e("div",Zu,[e("div",Pu,[e("div",Ou,[e("div",Uu,[e("h3",Nu,t(c.value.title),1),e("button",{onClick:o,class:"text-gray-400 hover:text-gray-600"},[W(G(ge),{class:"w-6 h-6"})])])]),e("div",Ku,[e("div",qu,[e("div",null,[M[12]||(M[12]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Innehåll",-1)),e("p",Wu,t(c.value.body),1)]),e("div",Gu,[M[15]||(M[15]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Metadata",-1)),e("div",Ju,[e("div",Yu,[M[13]||(M[13]=e("span",null,"Författare:",-1)),e("span",null,t(c.value.author),1)]),e("div",Qu,[M[14]||(M[14]=e("span",null,"Skapad:",-1)),e("span",null,t(j(c.value.createdAt)),1)])])])])]),e("div",{class:"px-6 py-4 border-t border-gray-200"},[e("div",{class:"flex space-x-3"},[e("button",{onClick:x,class:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Redigera "),e("button",{onClick:o,class:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700"}," Stäng ")])])])])])):E("",!0)]))}}),e1=yt(Xu,[["__scopeId","data-v-56ff08cb"]]),t1={class:"space-y-6"},s1={class:"flex items-center justify-between"},a1={class:"flex items-center space-x-3"},o1={class:"bg-white rounded-lg shadow-sm border p-6"},r1={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},l1={class:"pl-4"},n1=["value"],i1={class:"bg-white rounded-lg shadow-sm border"},d1={class:"px-6 py-4 border-b border-gray-200"},u1={class:"flex items-center justify-between"},c1={class:"flex items-center space-x-2"},p1={class:"text-sm text-gray-600"},m1={class:"text-sm font-medium text-gray-900"},g1={class:"overflow-x-auto"},v1={class:"min-w-full divide-y divide-gray-200"},x1={class:"bg-white divide-y divide-gray-200"},b1={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},f1={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},y1={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},h1={class:"px-6 py-4 whitespace-nowrap"},_1={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},w1={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},k1={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},$1={class:"flex space-x-2"},S1=["onClick"],C1=["onClick"],j1=["onClick"],T1={key:0,class:"fixed inset-0 z-50 overflow-hidden"},M1={class:"absolute inset-0 flex items-center justify-center p-4"},A1={class:"bg-white rounded-lg shadow-xl w-full max-w-2xl"},V1={class:"px-6 py-4 border-b border-gray-200"},z1={class:"text-lg font-medium text-gray-900"},E1={class:"px-6 py-4 space-y-4"},L1={class:"grid grid-cols-2 gap-4"},I1={class:"pl-4"},B1=["value"],D1={class:"px-6 py-4 border-t border-gray-200 flex space-x-3"},R1={key:1,class:"fixed inset-0 z-50 overflow-hidden"},F1={class:"absolute inset-0 flex items-center justify-center p-4"},H1={class:"bg-white rounded-lg shadow-xl w-full max-w-md"},Z1={class:"px-6 py-4"},P1={class:"text-center"},O1={class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 p-2"},U1={class:"text-sm text-gray-600 mb-4"},N1={class:"text-xs text-gray-500"},K1={class:"px-6 py-4 border-t border-gray-200"},q1={key:2,class:"fixed inset-0 z-50 overflow-hidden"},W1={class:"absolute inset-0 flex items-center justify-center p-4"},G1={class:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden"},J1={class:"px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50"},Y1={class:"flex items-center justify-between"},Q1={class:"flex items-center space-x-4"},X1={class:"text-2xl font-bold text-gray-900"},ec={class:"text-lg text-gray-600"},tc={class:"flex items-center space-x-2 mt-1"},sc={class:"flex-1 overflow-y-auto p-8"},ac={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},oc={class:"space-y-6"},rc={class:"bg-gradient-to-br from-gray-50 to-blue-50 rounded-xl p-6 border border-gray-200"},lc={class:"space-y-3"},nc={class:"flex justify-between"},ic={class:"font-medium text-gray-900"},dc={class:"flex justify-between"},uc={class:"font-bold text-gray-900 text-lg"},cc={class:"flex justify-between"},pc={class:"flex justify-between"},mc={class:"font-medium text-gray-900"},gc={class:"flex justify-between"},vc={class:"font-medium text-gray-900"},xc={class:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border border-gray-200"},bc={class:"space-y-3"},fc={class:"flex justify-between"},yc={class:"font-medium text-gray-900"},hc={class:"flex justify-between"},_c={class:"font-medium text-gray-900"},wc={class:"space-y-6"},kc={class:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border border-gray-200"},$c={class:"bg-white rounded-lg p-4 border border-gray-200"},Sc={class:"text-gray-700"},Cc={class:"bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-6 border border-gray-200"},jc={class:"space-y-3"},Tc=se({__name:"InvoicesView",setup(r){const i=S([]),u=S([]),d=S(!1),c=S(!1),g=S(0),v=S(null),b=S(null),T=S({status:"",customerId:"",dateFrom:"",dateTo:""}),w=S({customerId:"",amount:"",description:"",dueDate:""}),R=U(()=>{let y=i.value;return T.value.status&&(y=y.filter(h=>h.status===T.value.status)),T.value.customerId&&(y=y.filter(h=>h.customer_id===parseInt(T.value.customerId))),T.value.dateFrom&&(y=y.filter(h=>new Date(h.created_at)>=new Date(T.value.dateFrom))),T.value.dateTo&&(y=y.filter(h=>new Date(h.created_at)<=new Date(T.value.dateTo))),y}),m=U(()=>R.value.reduce((y,h)=>y+h.amount,0));async function n(){try{const[y,h]=await Promise.all([ne.get("/api/invoices"),ne.get("/api/customers")]);i.value=y.data.results,u.value=h.data.results}catch(y){console.error("Error loading data:",y)}}function o(y){const h=u.value.find(Z=>Z.id===y);return(h==null?void 0:h.name)||"Okänd kund"}function x(y){return{draft:"bg-gray-100 text-gray-800",sent:"bg-blue-100 text-blue-800",paid:"bg-green-100 text-green-800",overdue:"bg-red-100 text-red-800"}[y]||"bg-gray-100 text-gray-800"}function p(y){return{draft:"Utkast",sent:"Skickad",paid:"Betalad",overdue:"Förfallen"}[y]||y}function k(y){return{draft:"text-gray-600",sent:"text-blue-600",paid:"text-green-600",overdue:"text-red-600"}[y]||"text-gray-600"}function _(y){return new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK"}).format(y)}function L(y){return new Date(y).toLocaleDateString("sv-SE")}function j(y){b.value=y}function ee(y){v.value=y,w.value={customerId:y.customer_id.toString(),amount:y.amount.toString(),description:y.description||"",dueDate:y.due_date},d.value=!0}function V(y){console.log("Export invoice to BL:",y),alert(`Faktura ${y.invoice_number} exporterad till Björn Lunden!`)}function M(){d.value=!1,v.value=null,w.value={customerId:"",amount:"",description:"",dueDate:""}}function f(){b.value=null}function z(){const y=R.value.filter(h=>h.status!=="draft");if(g.value=y.length,g.value===0){alert("Inga fakturor att exportera. Välj fakturor som inte är utkast.");return}console.log("Exporting to Björn Lunden:",y),c.value=!0}function P(){if(!w.value.customerId||!w.value.amount){alert("Vänligen fyll i alla obligatoriska fält.");return}if(v.value){const y=i.value.findIndex(h=>h.id===v.value.id);y!==-1&&(i.value[y]={...i.value[y],customer_id:parseInt(w.value.customerId),amount:parseFloat(w.value.amount),due_date:w.value.dueDate,description:w.value.description},alert(`Faktura ${v.value.invoice_number} uppdaterad!`))}else{const y={id:Date.now(),invoice_number:`INV-2025-${String(i.value.length+1).padStart(3,"0")}`,customer_id:parseInt(w.value.customerId),amount:parseFloat(w.value.amount),status:"draft",due_date:w.value.dueDate||new Date(Date.now()+2592e6).toISOString().split("T")[0],created_at:new Date().toISOString(),description:w.value.description};i.value.unshift(y),alert(`Faktura ${y.invoice_number} skapad!`)}M()}return de(()=>{n()}),(y,h)=>(s(),a("div",t1,[e("div",s1,[h[13]||(h[13]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Fakturor"),e("p",{class:"text-gray-600"}," Hantera fakturor och export till Björn Lunden ")],-1)),e("div",a1,[e("button",{onClick:z,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Exportera till Björn Lunden "),e("button",{onClick:h[0]||(h[0]=Z=>d.value=!0),class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700"}," Skapa faktura ")])]),e("div",o1,[e("div",r1,[e("div",null,[h[15]||(h[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),H(e("select",{"onUpdate:modelValue":h[1]||(h[1]=Z=>T.value.status=Z),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[...h[14]||(h[14]=[Y('<option value="">Alla status</option><option value="draft">Utkast</option><option value="sent">Skickad</option><option value="paid">Betalad</option><option value="overdue">Förfallen</option>',5)])],512),[[ie,T.value.status]])]),e("div",l1,[h[17]||(h[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Kund",-1)),H(e("select",{"onUpdate:modelValue":h[2]||(h[2]=Z=>T.value.customerId=Z),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[h[16]||(h[16]=e("option",{value:""},"Alla kunder",-1)),(s(!0),a(N,null,K(u.value,Z=>(s(),a("option",{key:Z.id,value:Z.id},t(Z.name),9,n1))),128))],512),[[ie,T.value.customerId]])]),e("div",null,[h[18]||(h[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Från datum",-1)),H(e("input",{"onUpdate:modelValue":h[3]||(h[3]=Z=>T.value.dateFrom=Z),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,T.value.dateFrom]])]),e("div",null,[h[19]||(h[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Till datum",-1)),H(e("input",{"onUpdate:modelValue":h[4]||(h[4]=Z=>T.value.dateTo=Z),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,T.value.dateTo]])])])]),e("div",i1,[e("div",d1,[e("div",u1,[h[20]||(h[20]=e("h3",{class:"text-lg font-medium text-gray-900"},"Fakturor",-1)),e("div",c1,[e("span",p1,t(R.value.length)+" fakturor",1),e("span",m1," Totalt: "+t(_(m.value)),1)])])]),e("div",g1,[e("table",v1,[h[21]||(h[21]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fakturanr "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Kund "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Belopp "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Förfallodatum "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Skapad "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Åtgärder ")])],-1)),e("tbody",x1,[(s(!0),a(N,null,K(R.value,Z=>(s(),a("tr",{key:Z.id,class:"hover:bg-gray-50"},[e("td",b1,t(Z.invoice_number),1),e("td",f1,t(o(Z.customer_id)),1),e("td",y1,t(_(Z.amount)),1),e("td",h1,[e("span",{class:X(["inline-flex px-2 py-1 text-xs font-medium rounded-full",x(Z.status)])},t(p(Z.status)),3)]),e("td",_1,t(L(Z.due_date)),1),e("td",w1,t(L(Z.created_at)),1),e("td",k1,[e("div",$1,[e("button",{onClick:q=>j(Z),class:"text-blue-600 hover:text-blue-800"}," Visa ",8,S1),e("button",{onClick:q=>ee(Z),class:"text-gray-600 hover:text-gray-800"}," Redigera ",8,C1),e("button",{onClick:q=>V(Z),class:"text-green-600 hover:text-green-800"}," Exportera till BL ",8,j1)])])]))),128))])])])]),d.value?(s(),a("div",T1,[e("div",{class:"absolute inset-0 bg-gray-500 bg-opacity-75",onClick:M}),e("div",M1,[e("div",A1,[e("div",V1,[e("h3",z1,t(v.value?"Redigera faktura":"Skapa ny faktura"),1)]),e("div",E1,[e("div",L1,[e("div",I1,[h[23]||(h[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Kund",-1)),H(e("select",{"onUpdate:modelValue":h[5]||(h[5]=Z=>w.value.customerId=Z),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[h[22]||(h[22]=e("option",{value:""},"Välj kund...",-1)),(s(!0),a(N,null,K(u.value,Z=>(s(),a("option",{key:Z.id,value:Z.id},t(Z.name),9,B1))),128))],512),[[ie,w.value.customerId]])]),e("div",null,[h[24]||(h[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Belopp",-1)),H(e("input",{"onUpdate:modelValue":h[6]||(h[6]=Z=>w.value.amount=Z),type:"number",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,w.value.amount]])])]),e("div",null,[h[25]||(h[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Beskrivning",-1)),H(e("input",{"onUpdate:modelValue":h[7]||(h[7]=Z=>w.value.description=Z),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,w.value.description]])]),e("div",null,[h[26]||(h[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Förfallodatum",-1)),H(e("input",{"onUpdate:modelValue":h[8]||(h[8]=Z=>w.value.dueDate=Z),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,w.value.dueDate]])])]),e("div",D1,[e("button",{onClick:M,class:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Avbryt "),e("button",{onClick:P,class:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700"},t(v.value?"Uppdatera faktura":"Skapa faktura"),1)])])])])):E("",!0),c.value?(s(),a("div",R1,[e("div",{class:"absolute inset-0 bg-gray-500 bg-opacity-75",onClick:h[9]||(h[9]=Z=>c.value=!1)}),e("div",F1,[e("div",H1,[h[28]||(h[28]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"}," Export till Björn Lunden ")],-1)),e("div",Z1,[e("div",P1,[e("div",O1,[W(G(qt),{class:"w-8 h-8 text-green-600",style:{"margin-top":"4px"}})]),h[27]||(h[27]=e("h4",{class:"text-lg font-medium text-gray-900 mb-2"}," Export slutförd! ",-1)),e("p",U1,t(g.value)+" fakturor har exporterats till Björn Lunden Administration. ",1),e("p",N1," Filen har sparats lokalt: invoices_export_"+t(new Date().toISOString().split("T")[0])+".csv ",1)])]),e("div",K1,[e("button",{onClick:h[10]||(h[10]=Z=>c.value=!1),class:"w-full px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700"}," Stäng ")])])])])):E("",!0),b.value?(s(),a("div",q1,[e("div",{class:"absolute inset-0 bg-gray-500 bg-opacity-75",onClick:f}),e("div",W1,[e("div",G1,[e("div",J1,[e("div",Y1,[e("div",Q1,[h[29]||(h[29]=e("div",{class:"p-3 bg-blue-100 rounded-xl"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a2 2 0 114 0 2 2 0 01-4 0zm8 0a2 2 0 114 0 2 2 0 01-4 0z","clip-rule":"evenodd"})])],-1)),e("div",null,[e("h3",X1,t(b.value.invoice_number),1),e("p",ec,t(o(b.value.customer_id)),1),e("div",tc,[e("span",{class:X(["inline-flex px-3 py-1 text-sm font-medium rounded-full",x(b.value.status)])},t(p(b.value.status)),3)])])]),e("button",{onClick:f,class:"p-3 text-gray-400 hover:text-gray-600 hover:bg-white/80 rounded-xl transition-all duration-200"},[...h[30]||(h[30]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",sc,[e("div",ac,[e("div",oc,[e("div",rc,[h[36]||(h[36]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a2 2 0 114 0 2 2 0 01-4 0zm8 0a2 2 0 114 0 2 2 0 01-4 0z","clip-rule":"evenodd"})]),te(" Fakturainformation ")],-1)),e("div",lc,[e("div",nc,[h[31]||(h[31]=e("span",{class:"text-gray-600"},"Fakturanummer:",-1)),e("span",ic,t(b.value.invoice_number),1)]),e("div",dc,[h[32]||(h[32]=e("span",{class:"text-gray-600"},"Belopp:",-1)),e("span",uc,t(_(b.value.amount)),1)]),e("div",cc,[h[33]||(h[33]=e("span",{class:"text-gray-600"},"Status:",-1)),e("span",{class:X(["font-medium",k(b.value.status)])},t(p(b.value.status)),3)]),e("div",pc,[h[34]||(h[34]=e("span",{class:"text-gray-600"},"Förfallodatum:",-1)),e("span",mc,t(L(b.value.due_date)),1)]),e("div",gc,[h[35]||(h[35]=e("span",{class:"text-gray-600"},"Skapad:",-1)),e("span",vc,t(L(b.value.created_at)),1)])])]),e("div",xc,[h[39]||(h[39]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zM8 7a3 3 0 000 6h4a3 3 0 000-6H8z","clip-rule":"evenodd"})]),te(" Kundinformation ")],-1)),e("div",bc,[e("div",fc,[h[37]||(h[37]=e("span",{class:"text-gray-600"},"Kund:",-1)),e("span",yc,t(o(b.value.customer_id)),1)]),e("div",hc,[h[38]||(h[38]=e("span",{class:"text-gray-600"},"Kund-ID:",-1)),e("span",_c,"#"+t(b.value.customer_id),1)])])])]),e("div",wc,[e("div",kc,[h[40]||(h[40]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"})]),te(" Beskrivning ")],-1)),e("div",$c,[e("p",Sc,t(b.value.description||"Ingen beskrivning angiven"),1)])]),e("div",Cc,[h[43]||(h[43]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z","clip-rule":"evenodd"})]),te(" Snabbåtgärder ")],-1)),e("div",jc,[e("button",{onClick:h[11]||(h[11]=Z=>{ee(b.value),f()}),class:"w-full px-4 py-3 text-sm font-semibold text-white bg-blue-600 rounded-xl hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center space-x-2"},[...h[41]||(h[41]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1),e("span",null,"Redigera faktura",-1)])]),e("button",{onClick:h[12]||(h[12]=Z=>V(b.value)),class:"w-full px-4 py-3 text-sm font-semibold text-white bg-green-600 rounded-xl hover:bg-green-700 transition-colors duration-200 flex items-center justify-center space-x-2"},[...h[42]||(h[42]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),e("span",null,"Exportera till Björn Lunden",-1)])])])])])])]),e("div",{class:"px-8 py-6 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-white"},[e("div",{class:"flex space-x-4"},[e("button",{onClick:f,class:"px-6 py-3 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 shadow-sm hover:shadow-md"}," Stäng ")])])])])])):E("",!0)]))}}),Mc={class:"space-y-6"},Ac={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Vc={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-200"},zc={class:"text-center"},Ec={class:"text-3xl font-bold text-blue-600 mb-2"},Lc={class:"text-xs text-gray-400 mt-1"},Ic={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-200"},Bc={class:"text-center"},Dc={class:"text-3xl font-bold text-green-600 mb-2"},Rc={class:"text-xs text-gray-400 mt-1"},Fc={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-200"},Hc={class:"text-center"},Zc={class:"text-3xl font-bold text-purple-600 mb-2"},Pc={class:"text-xs text-gray-400 mt-1"},Oc={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-200"},Uc={class:"text-center"},Nc={class:"text-3xl font-bold text-red-600 mb-2"},Kc={class:"text-xs text-gray-400 mt-1"},qc={class:"bg-white rounded-lg shadow-sm border"},Wc={class:"overflow-x-auto"},Gc={class:"min-w-full divide-y divide-gray-200"},Jc={class:"bg-white divide-y divide-gray-200"},Yc={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Qc={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Xc={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ep={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},tp={class:"flex items-center space-x-2"},sp={class:"font-medium"},ap={class:"text-xs text-gray-500"},op={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},rp={class:"flex items-center space-x-2"},lp={class:"font-medium"},np={class:"text-xs text-gray-500"},ip={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},dp=se({__name:"EmailHistoryView",setup(r){const i=S([]),u=U(()=>i.value.reduce((o,x)=>o+x.to_count,0)),d=U(()=>i.value.reduce((o,x)=>o+x.delivered,0)),c=U(()=>i.value.reduce((o,x)=>o+x.opened,0)),g=U(()=>i.value.reduce((o,x)=>o+x.clicked,0)),v=U(()=>i.value.reduce((o,x)=>o+x.bounced,0)),b=U(()=>d.value===0?0:Math.round(c.value/d.value*100)),T=U(()=>c.value===0?0:Math.round(g.value/c.value*100)),w=U(()=>u.value===0?0:Math.round(v.value/u.value*100));U(()=>u.value===0?0:Math.round(d.value/u.value*100));async function R(){try{const o=await ne.get("/api/sent-emails");i.value=o.data.results}catch(o){console.error("Error loading data:",o)}}function m(){R()}function n(o){return new Date(o).toLocaleDateString("sv-SE")}return de(()=>{R()}),(o,x)=>(s(),a("div",Mc,[e("div",{class:"flex items-center justify-between"},[x[0]||(x[0]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"E-posthistorik"),e("p",{class:"text-gray-600"},"Visa skickade e-postutskick och statistik")],-1)),e("div",{class:"flex items-center space-x-3"},[e("button",{onClick:m,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Uppdatera ")])]),e("div",Ac,[e("div",Vc,[e("div",zc,[e("div",Ec,t(u.value.toLocaleString()),1),x[1]||(x[1]=e("div",{class:"text-sm text-gray-500 font-medium"},"Totalt skickade",-1)),e("div",Lc,t(i.value.length)+" kampanjer",1)])]),e("div",Ic,[e("div",Bc,[e("div",Dc,t(b.value)+"%",1),x[2]||(x[2]=e("div",{class:"text-sm text-gray-500 font-medium"},"Öppningsgrad",-1)),e("div",Rc,t(c.value.toLocaleString())+" öppnade",1)])]),e("div",Fc,[e("div",Hc,[e("div",Zc,t(T.value)+"%",1),x[3]||(x[3]=e("div",{class:"text-sm text-gray-500 font-medium"},"Klickgrad",-1)),e("div",Pc,t(g.value.toLocaleString())+" klick",1)])]),e("div",Oc,[e("div",Uc,[e("div",Nc,t(w.value)+"%",1),x[4]||(x[4]=e("div",{class:"text-sm text-gray-500 font-medium"},"Studsgrad",-1)),e("div",Kc,t(v.value.toLocaleString())+" studsade",1)])])]),e("div",qc,[x[6]||(x[6]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"}," Skickade e-postutskick ")],-1)),e("div",Wc,[e("table",Gc,[x[5]||(x[5]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Kampanj "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Mall "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Mottagare "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Levererade "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Öppnade "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Skickad ")])],-1)),e("tbody",Jc,[(s(!0),a(N,null,K(i.value,p=>(s(),a("tr",{key:p.id,class:"hover:bg-gray-50"},[e("td",Yc,t(p.campaign_name),1),e("td",Qc,t(p.template_name),1),e("td",Xc,t(p.to_count),1),e("td",ep,[e("div",tp,[e("span",sp,t(p.delivered),1),e("span",ap,"("+t(Math.round(p.delivered/p.to_count*100))+"%)",1)])]),e("td",op,[e("div",rp,[e("span",lp,t(p.opened),1),e("span",np,"("+t(Math.round(p.opened/p.delivered*100))+"%)",1)])]),e("td",ip,t(n(p.sent_at)),1)]))),128))])])])])]))}}),up={class:"space-y-6"},cp={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},pp={class:"flex items-center justify-between mb-6"},mp={class:"flex items-center space-x-4"},gp={class:"text-xl font-bold text-gray-900"},vp={class:"text-sm text-gray-600"},xp={class:"text-right"},bp={class:"text-sm font-medium text-gray-900"},fp={class:"text-gray-600 mb-6"},yp={class:"grid grid-cols-2 gap-6 mb-6"},hp={class:"text-center p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl"},_p={class:"text-2xl font-bold text-blue-600"},wp={class:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl"},kp={class:"text-2xl font-bold text-green-600"},$p={class:"text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl"},Sp={class:"text-2xl font-bold text-purple-600"},Cp={class:"text-center p-4 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl"},jp={class:"text-2xl font-bold text-yellow-600"},Tp={class:"mb-6"},Mp={class:"space-y-3"},Ap={class:"flex items-center justify-between"},Vp={class:"flex items-center space-x-2"},zp={class:"w-16 bg-gray-200 rounded-full h-2"},Ep={class:"text-sm font-medium text-gray-900"},Lp={class:"flex items-center justify-between"},Ip={class:"flex items-center space-x-2"},Bp={class:"w-16 bg-gray-200 rounded-full h-2"},Dp={class:"text-sm font-medium text-gray-900"},Rp={class:"flex items-center justify-between"},Fp={class:"flex items-center space-x-2"},Hp={class:"w-16 bg-gray-200 rounded-full h-2"},Zp={class:"text-sm font-medium text-gray-900"},Pp={class:"mb-6"},Op={class:"flex flex-wrap gap-2"},Up={key:0,class:"inline-flex px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"},Np={class:"border-t border-gray-200 pt-4"},Kp={class:"space-y-2 text-sm text-gray-600"},qp={class:"flex items-center space-x-2"},Wp={class:"flex items-center space-x-2"},Gp={class:"flex items-center space-x-2"},Jp={class:"mt-6 border-t border-gray-200 pt-4"},Yp={class:"space-y-2"},Qp={class:"flex-1 min-w-0"},Xp={class:"text-gray-900"},em={class:"text-xs text-gray-500"},tm={class:"bg-white rounded-lg shadow-sm border p-6"},sm={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},am={class:"text-center"},om={class:"text-2xl font-bold text-gray-900"},rm={class:"text-center"},lm={class:"text-2xl font-bold text-gray-900"},nm={class:"text-center"},im={class:"text-2xl font-bold text-gray-900"},dm={class:"text-center"},um={class:"text-2xl font-bold text-gray-900"},cm=se({__name:"SubsidiariesView",setup(r){const i=S([]),u=U(()=>i.value.reduce((n,o)=>n+o.customers,0)),d=U(()=>i.value.reduce((n,o)=>n+o.employees,0)),c=U(()=>i.value.reduce((n,o)=>n+o.active_orders,0)),g=U(()=>i.value.reduce((n,o)=>n+o.monthly_revenue,0));async function v(){try{const n=await ne.get("/api/subsidiaries");i.value=n.data.results}catch(n){console.error("Error loading data:",n)}}function b(){v()}function T(n){return new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK",minimumFractionDigits:0}).format(n)}function w(n){return new Date(n).toLocaleDateString("sv-SE")}function R(n){const o=new Date(n),p=new Date().getTime()-o.getTime(),k=Math.floor(p/6e4);return k<1?"Nu":k<60?`${k}m sedan`:k<1440?`${Math.floor(k/60)}h sedan`:o.toLocaleDateString("sv-SE")}function m(n){return{order:"bg-blue-500",customer:"bg-green-500",employee:"bg-purple-500",maintenance:"bg-yellow-500"}[n]||"bg-gray-500"}return de(()=>{v()}),(n,o)=>(s(),a("div",up,[e("div",{class:"flex items-center justify-between"},[o[0]||(o[0]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Dotterbolag"),e("p",{class:"text-gray-600"},"Översikt över Allanit Service och Industrimålning")],-1)),e("div",{class:"flex items-center space-x-3"},[e("button",{onClick:b,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Uppdatera ")])]),e("div",cp,[(s(!0),a(N,null,K(i.value,x=>(s(),a("div",{key:x.id,class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-8 hover:shadow-lg transition-all duration-200"},[e("div",pp,[e("div",mp,[e("div",{class:"w-6 h-6 rounded-full shadow-sm",style:ve({backgroundColor:x.color})},null,4),e("div",null,[e("h3",gp,t(x.name),1),e("p",vp,t(x.location),1)])]),e("div",xp,[o[1]||(o[1]=e("div",{class:"text-sm text-gray-500"},"Etablerad",-1)),e("div",bp,t(w(x.established)),1)])]),e("p",fp,t(x.description),1),e("div",yp,[e("div",hp,[e("div",_p,t(x.customers),1),o[2]||(o[2]=e("div",{class:"text-sm text-gray-600 font-medium"},"Kunder",-1))]),e("div",wp,[e("div",kp,t(x.active_orders),1),o[3]||(o[3]=e("div",{class:"text-sm text-gray-600 font-medium"},"Aktiva uppdrag",-1))]),e("div",$p,[e("div",Sp,t(x.employees),1),o[4]||(o[4]=e("div",{class:"text-sm text-gray-600 font-medium"},"Medarbetare",-1))]),e("div",Cp,[e("div",jp,t(T(x.monthly_revenue)),1),o[5]||(o[5]=e("div",{class:"text-sm text-gray-600 font-medium"},"Månadsomsättning",-1))])]),e("div",Tp,[o[9]||(o[9]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Prestanda",-1)),e("div",Mp,[e("div",Ap,[o[6]||(o[6]=e("span",{class:"text-sm text-gray-600"},"Kundnöjdhet",-1)),e("div",Vp,[e("div",zp,[e("div",{class:"bg-green-500 h-2 rounded-full",style:ve({width:`${x.performance.customer_satisfaction*20}%`})},null,4)]),e("span",Ep,t(x.performance.customer_satisfaction)+"/5",1)])]),e("div",Lp,[o[7]||(o[7]=e("span",{class:"text-sm text-gray-600"},"Genomförandegrad",-1)),e("div",Ip,[e("div",Bp,[e("div",{class:"bg-blue-500 h-2 rounded-full",style:ve({width:`${x.performance.completion_rate}%`})},null,4)]),e("span",Dp,t(x.performance.completion_rate)+"%",1)])]),e("div",Rp,[o[8]||(o[8]=e("span",{class:"text-sm text-gray-600"},"Tillväxt",-1)),e("div",Fp,[e("div",Hp,[e("div",{class:"bg-purple-500 h-2 rounded-full",style:ve({width:`${x.performance.growth_rate}%`})},null,4)]),e("span",Zp,t(x.performance.growth_rate)+"%",1)])])])]),e("div",Pp,[o[10]||(o[10]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Tjänster",-1)),e("div",Op,[(s(!0),a(N,null,K(x.services.slice(0,4),p=>(s(),a("span",{key:p,class:"inline-flex px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800"},t(p),1))),128)),x.services.length>4?(s(),a("span",Up," +"+t(x.services.length-4)+" fler ",1)):E("",!0)])]),e("div",Np,[o[14]||(o[14]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Kontakt",-1)),e("div",Kp,[e("div",qp,[o[11]||(o[11]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})],-1)),e("span",null,t(x.contact.email),1)]),e("div",Wp,[o[12]||(o[12]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.01.42l-.66 3.438a1 1 0 01-.5.5l-3.438.66a1 1 0 01-.42-.01L2.836 6.153a1 1 0 01-.836-.986L2 3z"})],-1)),e("span",null,t(x.contact.phone),1)]),e("div",Gp,[o[13]||(o[13]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),e("span",null,t(x.contact.address),1)])])]),e("div",Jp,[o[15]||(o[15]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Senaste aktiviteter",-1)),e("div",Yp,[(s(!0),a(N,null,K(x.recent_activities.slice(0,3),p=>(s(),a("div",{key:p.id,class:"flex items-start space-x-3 text-sm"},[e("div",{class:X(["w-2 h-2 rounded-full mt-2 flex-shrink-0",m(p.type)])},null,2),e("div",Qp,[e("p",Xp,t(p.description),1),e("p",em,t(R(p.date)),1)])]))),128))])])]))),128))]),e("div",tm,[o[20]||(o[20]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Kombinerad statistik",-1)),e("div",sm,[e("div",am,[e("div",om,t(u.value),1),o[16]||(o[16]=e("div",{class:"text-sm text-gray-500"},"Totalt kunder",-1))]),e("div",rm,[e("div",lm,t(d.value),1),o[17]||(o[17]=e("div",{class:"text-sm text-gray-500"},"Totalt medarbetare",-1))]),e("div",nm,[e("div",im,t(c.value),1),o[18]||(o[18]=e("div",{class:"text-sm text-gray-500"},"Totalt aktiva uppdrag",-1))]),e("div",dm,[e("div",um,t(T(g.value)),1),o[19]||(o[19]=e("div",{class:"text-sm text-gray-500"},"Total månadsomsättning",-1))])])])]))}}),pm={class:"max-w-screen-xl mx-auto px-4"},mm={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},gm={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-200"},vm={class:"text-center"},xm={class:"text-3xl font-bold text-blue-600 mb-2"},bm={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-200"},fm={class:"text-center"},ym={class:"text-3xl font-bold text-red-600 mb-2"},hm={class:"text-xs text-gray-400 mt-1"},_m={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-200"},wm={class:"text-center"},km={class:"text-3xl font-bold text-yellow-600 mb-2"},$m={class:"text-xs text-gray-400 mt-1"},Sm={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-200"},Cm={class:"text-center"},jm={class:"text-3xl font-bold text-green-600 mb-2"},Tm={class:"text-xs text-gray-400 mt-1"},Mm={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 mb-6"},Am={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Vm={class:"flex justify-between items-center mt-4"},zm={class:"text-sm text-gray-500"},Em={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},Lm={class:"overflow-x-auto"},Im={class:"min-w-full divide-y divide-gray-200"},Bm={class:"bg-white divide-y divide-gray-200"},Dm={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Rm={class:"flex items-center space-x-2"},Fm={class:"px-6 py-4 whitespace-nowrap"},Hm={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Zm={class:"flex items-center space-x-2"},Pm={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Om={class:"font-mono text-xs bg-gray-100 px-2 py-1 rounded"},Um={class:"px-6 py-4 text-sm text-gray-900 max-w-md"},Nm={class:"truncate"},Km={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},qm=["onClick"],Wm={colspan:"6",class:"px-6 py-4"},Gm={class:"bg-white rounded-lg p-4 border border-gray-200"},Jm={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ym={class:"space-y-2 text-sm"},Qm={class:"flex justify-between"},Xm={class:"font-mono"},eg={class:"flex justify-between"},tg={class:"flex justify-between"},sg={key:0},ag={class:"space-y-2 text-sm"},og={key:0,class:"flex justify-between"},rg={key:1,class:"flex justify-between"},lg={key:2,class:"flex justify-between"},ng={class:"font-mono text-red-600"},ig={key:3,class:"flex justify-between"},dg={key:4,class:"flex justify-between"},ug={class:"font-mono"},cg={key:5,class:"flex justify-between"},pg={class:"font-mono text-xs"},mg={class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},gg={class:"flex items-center justify-between"},vg={class:"text-sm text-gray-500"},xg={class:"flex space-x-2"},bg=["disabled"],fg={class:"px-3 py-2 text-sm text-gray-700"},yg=["disabled"],hg=se({__name:"DeveloperView",setup(r){const i=S([]),u=S(new Set),d=S(1),c=S(20),g=S({level:"",module:"",action:"",search:""}),v=U(()=>i.value.filter(M=>!(g.value.level&&M.level!==g.value.level||g.value.module&&M.module!==g.value.module||g.value.action&&M.action!==g.value.action||g.value.search&&!M.custom_msg.toLowerCase().includes(g.value.search.toLowerCase())))),b=U(()=>{const M=(d.value-1)*c.value,f=M+c.value;return v.value.slice(M,f)}),T=U(()=>Math.ceil(v.value.length/c.value)),w=U(()=>i.value.length),R=U(()=>i.value.filter(M=>M.level==="ERROR").length),m=U(()=>i.value.filter(M=>M.level==="WARN").length),n=U(()=>i.value.filter(M=>M.level==="INFO").length);function o(M){switch(M){case"ERROR":return"bg-red-100 text-red-800";case"WARN":return"bg-yellow-100 text-yellow-800";case"INFO":return"bg-blue-100 text-blue-800";case"DEBUG":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function x(M){return new Date(M).toLocaleTimeString("sv-SE")}function p(M){return new Date(M).toLocaleString("sv-SE")}function k(M){u.value.has(M)?u.value.delete(M):u.value.add(M)}function _(){g.value={level:"",module:"",action:"",search:""},d.value=1}function L(){V()}function j(){confirm("Är du säker på att du vill rensa alla loggar? Detta går inte att ångra.")&&(i.value=[],u.value.clear(),d.value=1)}function ee(){const M=JSON.stringify(v.value,null,2),f=new Blob([M],{type:"application/json"}),z=URL.createObjectURL(f),P=document.createElement("a");P.href=z,P.download=`logs_${new Date().toISOString().split("T")[0]}.json`,P.click(),URL.revokeObjectURL(z)}async function V(){try{const M=await ne.get("/api/logs");i.value=M.data.results||M.data}catch(M){console.error("Error loading logs:",M)}}return de(()=>{V()}),(M,f)=>(s(),a("div",pm,[e("div",{class:"flex items-center justify-between mb-8"},[f[8]||(f[8]=Y('<div class="flex items-center space-x-4"><div class="p-3 bg-purple-100 rounded-xl"><svg class="w-8 h-8 text-purple-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></div><div><h1 class="text-3xl font-bold text-gray-900">Utvecklarvy</h1><p class="text-gray-600 mt-1">Systemloggar, debugging och utvecklingsverktyg</p></div></div>',1)),e("div",{class:"flex items-center space-x-4"},[e("button",{onClick:L,class:"px-6 py-3 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 shadow-sm hover:shadow-md flex items-center space-x-2"},[...f[6]||(f[6]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1),e("span",null,"Uppdatera",-1)])]),e("button",{onClick:j,class:"px-6 py-3 text-sm font-semibold text-white bg-red-600 border border-transparent rounded-xl hover:bg-red-700 hover:shadow-lg transition-all duration-200 shadow-sm flex items-center space-x-2"},[...f[7]||(f[7]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z","clip-rule":"evenodd"}),e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),e("span",null,"Rensa loggar",-1)])])])]),e("div",mm,[e("div",gm,[e("div",vm,[e("div",xm,t(w.value.toLocaleString()),1),f[9]||(f[9]=e("div",{class:"text-sm text-gray-500 font-medium"},"Totalt loggar",-1)),f[10]||(f[10]=e("div",{class:"text-xs text-gray-400 mt-1"},"Senaste 24h",-1))])]),e("div",bm,[e("div",fm,[e("div",ym,t(R.value.toLocaleString()),1),f[11]||(f[11]=e("div",{class:"text-sm text-gray-500 font-medium"},"Fel",-1)),e("div",hm,t(Math.round(R.value/w.value*100))+"% av totalt",1)])]),e("div",_m,[e("div",wm,[e("div",km,t(m.value.toLocaleString()),1),f[12]||(f[12]=e("div",{class:"text-sm text-gray-500 font-medium"},"Varningar",-1)),e("div",$m,t(Math.round(m.value/w.value*100))+"% av totalt",1)])]),e("div",Sm,[e("div",Cm,[e("div",jm,t(n.value.toLocaleString()),1),f[13]||(f[13]=e("div",{class:"text-sm text-gray-500 font-medium"},"Info",-1)),e("div",Tm,t(Math.round(n.value/w.value*100))+"% av totalt",1)])])]),e("div",Mm,[f[21]||(f[21]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Filtrera loggar",-1)),e("div",Am,[e("div",null,[f[15]||(f[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nivå",-1)),H(e("select",{"onUpdate:modelValue":f[0]||(f[0]=z=>g.value.level=z),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},[...f[14]||(f[14]=[Y('<option value="">Alla nivåer</option><option value="ERROR">Error</option><option value="WARN">Warning</option><option value="INFO">Info</option><option value="DEBUG">Debug</option>',5)])],512),[[ie,g.value.level]])]),e("div",null,[f[17]||(f[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Modul",-1)),H(e("select",{"onUpdate:modelValue":f[1]||(f[1]=z=>g.value.module=z),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},[...f[16]||(f[16]=[Y('<option value="">Alla moduler</option><option value="Fetcher">Fetcher</option><option value="Ingestor">Ingestor</option><option value="DbWriter">DbWriter</option><option value="DeadLetter">DeadLetter</option><option value="CommandBus">CommandBus</option><option value="Rocket">Rocket</option><option value="EmailService">EmailService</option><option value="AuthService">AuthService</option><option value="PaymentService">PaymentService</option><option value="NotificationService">NotificationService</option>',11)])],512),[[ie,g.value.module]])]),e("div",null,[f[19]||(f[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Åtgärd",-1)),H(e("select",{"onUpdate:modelValue":f[2]||(f[2]=z=>g.value.action=z),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},[...f[18]||(f[18]=[Y('<option value="">Alla åtgärder</option><option value="FETCH">Fetch</option><option value="UPSERT">Upsert</option><option value="REPROCESS">Reprocess</option><option value="ERROR">Error</option><option value="SUCCESS">Success</option><option value="RETRY">Retry</option><option value="TIMEOUT">Timeout</option><option value="VALIDATION">Validation</option><option value="SEND">Send</option><option value="RECEIVE">Receive</option><option value="PROCESS">Process</option><option value="ARCHIVE">Archive</option>',13)])],512),[[ie,g.value.action]])]),e("div",null,[f[20]||(f[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sök",-1)),H(e("input",{"onUpdate:modelValue":f[3]||(f[3]=z=>g.value.search=z),type:"text",placeholder:"Sök i meddelanden...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},null,512),[[Q,g.value.search]])])]),e("div",Vm,[e("div",zm," Visar "+t(v.value.length)+" av "+t(w.value)+" loggar ",1),e("div",{class:"flex space-x-2"},[e("button",{onClick:_,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"}," Rensa filter "),e("button",{onClick:ee,class:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors"}," Exportera ")])])]),e("div",Em,[f[37]||(f[37]=Y('<div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50"><div class="flex items-center space-x-3"><div class="p-2 bg-purple-100 rounded-lg"><svg class="w-5 h-5 text-purple-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></div><h3 class="text-lg font-bold text-gray-900"> Systemloggar </h3></div></div>',1)),e("div",Lm,[e("table",Im,[f[36]||(f[36]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Tid "),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Nivå "),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Modul "),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Åtgärd "),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Meddelande "),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Detaljer ")])],-1)),e("tbody",Bm,[(s(!0),a(N,null,K(b.value,z=>(s(),a("tr",{key:z.id,class:"hover:bg-gray-50 transition-colors duration-200"},[e("td",Dm,[e("div",Rm,[f[22]||(f[22]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),e("span",null,t(x(z.created_at)),1)])]),e("td",Fm,[e("span",{class:X(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold",o(z.level)])},t(z.level),3)]),e("td",Hm,[e("div",Zm,[f[23]||(f[23]=e("div",{class:"p-1 bg-gray-100 rounded"},[e("svg",{class:"w-3 h-3 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})])],-1)),e("span",null,t(z.module),1)])]),e("td",Pm,[e("span",Om,t(z.action),1)]),e("td",Um,[e("div",Nm,t(z.custom_msg),1)]),e("td",Km,[e("button",{onClick:P=>k(z.id),class:"text-purple-600 hover:text-purple-800 font-medium"},t(u.value.has(z.id)?"Dölj":"Visa"),9,qm)])]))),128)),(s(!0),a(N,null,K(b.value,z=>H((s(),a("tr",{key:`details-${z.id}`,class:"bg-gray-50"},[e("td",Wm,[e("div",Gm,[f[35]||(f[35]=e("h4",{class:"font-semibold text-gray-900 mb-3"},"Loggdetaljer",-1)),e("div",Jm,[e("div",null,[f[27]||(f[27]=e("h5",{class:"text-sm font-medium text-gray-700 mb-2"},"Grundläggande information",-1)),e("div",Ym,[e("div",Qm,[f[24]||(f[24]=e("span",{class:"text-gray-500"},"ID:",-1)),e("span",Xm,t(z.id),1)]),e("div",eg,[f[25]||(f[25]=e("span",{class:"text-gray-500"},"Skapad:",-1)),e("span",null,t(p(z.created_at)),1)]),e("div",tg,[f[26]||(f[26]=e("span",{class:"text-gray-500"},"Expirerar:",-1)),e("span",null,t(p(z.expires_at)),1)])])]),z.details?(s(),a("div",sg,[f[34]||(f[34]=e("h5",{class:"text-sm font-medium text-gray-700 mb-2"},"Detaljer",-1)),e("div",ag,[z.details.duration?(s(),a("div",og,[f[28]||(f[28]=e("span",{class:"text-gray-500"},"Varaktighet:",-1)),e("span",null,t(z.details.duration)+"ms",1)])):E("",!0),z.details.records_affected?(s(),a("div",rg,[f[29]||(f[29]=e("span",{class:"text-gray-500"},"Poster påverkade:",-1)),e("span",null,t(z.details.records_affected),1)])):E("",!0),z.details.error_code?(s(),a("div",lg,[f[30]||(f[30]=e("span",{class:"text-gray-500"},"Felkod:",-1)),e("span",ng,t(z.details.error_code),1)])):E("",!0),z.details.retry_count?(s(),a("div",ig,[f[31]||(f[31]=e("span",{class:"text-gray-500"},"Försök:",-1)),e("span",null,t(z.details.retry_count),1)])):E("",!0),z.details.user_id?(s(),a("div",dg,[f[32]||(f[32]=e("span",{class:"text-gray-500"},"Användar-ID:",-1)),e("span",ug,t(z.details.user_id),1)])):E("",!0),z.details.request_id?(s(),a("div",cg,[f[33]||(f[33]=e("span",{class:"text-gray-500"},"Request-ID:",-1)),e("span",pg,t(z.details.request_id),1)])):E("",!0)])])):E("",!0)])])])])),[[Ie,u.value.has(z.id)]])),128))])])]),e("div",mg,[e("div",gg,[e("div",vg," Visar "+t((d.value-1)*c.value+1)+" till "+t(Math.min(d.value*c.value,v.value.length))+" av "+t(v.value.length)+" loggar ",1),e("div",xg,[e("button",{onClick:f[4]||(f[4]=z=>d.value=Math.max(1,d.value-1)),disabled:d.value===1,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Föregående ",8,bg),e("span",fg," Sida "+t(d.value)+" av "+t(T.value),1),e("button",{onClick:f[5]||(f[5]=z=>d.value=Math.min(T.value,d.value+1)),disabled:d.value===T.value,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Nästa ",8,yg)])])])])]))}}),_g=De("mail",{state:()=>({templates:[],loading:!1,error:null}),actions:{async fetchTemplates(){this.loading=!0,this.error=null;try{const r=await ne.get("/api/mail/templates");this.templates=r.data.results??[]}catch(r){this.error=(r==null?void 0:r.message)??"Fel"}finally{this.loading=!1}}}}),wg={class:"space-y-6"},kg={class:"flex items-center justify-between"},$g={class:"flex items-center space-x-3"},Sg={key:0,class:"bg-white rounded-lg shadow-sm border p-6"},Cg={class:"flex items-center justify-between mb-6"},jg={class:"mb-8"},Tg={class:"flex items-center"},Mg={class:"min-h-96"},Ag={key:0,class:"space-y-6"},Vg={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},zg={key:1,class:"space-y-6"},Eg={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Lg=["onClick"],Ig={class:"font-medium text-gray-900"},Bg={class:"text-sm text-gray-600 mt-1"},Dg={class:"mt-2 flex flex-wrap gap-1"},Rg={key:2,class:"space-y-6"},Fg={key:3,class:"space-y-6"},Hg={class:"border rounded-lg p-6 bg-gray-50"},Zg={class:"bg-white rounded-lg p-4 shadow-sm"},Pg={class:"font-medium text-gray-900 mb-2"},Og=["innerHTML"],Ug={class:"text-sm text-gray-600"},Ng={key:4,class:"space-y-6"},Kg={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},qg={class:"flex"},Wg={class:"space-y-4"},Gg={class:"flex items-center justify-between"},Jg={class:"text-sm font-medium"},Yg={class:"flex items-center justify-between"},Qg={class:"text-sm font-medium"},Xg={class:"flex items-center justify-between"},e2={class:"text-sm font-medium"},t2={class:"flex items-center justify-between pt-6 border-t border-gray-200"},s2={key:1},a2={class:"flex items-center space-x-3"},o2=["disabled"],r2=["disabled"],l2={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},n2={class:"bg-white rounded-lg shadow-sm border p-6"},i2={class:"space-y-3"},d2={class:"text-sm font-medium text-gray-900"},u2={class:"text-xs text-gray-600"},c2={class:"space-y-4"},p2={class:"font-medium text-gray-900"},m2={class:"text-sm text-gray-600"},g2={class:"text-right"},v2={class:"text-xs text-gray-500 mt-1"},x2=se({__name:"CampaignsView",setup(r){const i=_g(),u=S(!1),d=S(!1),c=S(0),g=S(!1),v=S({customerType:"",tags:[],template:null,subject:"",content:"",recipientCount:0}),b=[{key:"audience",label:"Målgrupp"},{key:"template",label:"Mall"},{key:"content",label:"Innehåll"},{key:"preview",label:"Förhandsvisa"},{key:"send",label:"Skicka"}],T=[{value:"brf",label:"BRF"},{value:"kommersiell",label:"Kommersiell"},{value:"vip",label:"VIP"},{value:"problem",label:"Problem"}],w=S([{id:1,name:"Vinterunderhåll 2024",recipients:45,status:"Skickad",sentAt:"2025-01-05T10:00:00Z"},{id:2,name:"Nyårsönskningar",recipients:38,status:"Skickad",sentAt:"2025-01-01T09:00:00Z"}]),R=S([{id:1,name:"Vinterunderhåll 2024",recipients:45,status:"Skickad",sentAt:"2025-01-05T10:00:00Z",openRate:72},{id:2,name:"Nyårsönskningar",recipients:38,status:"Skickad",sentAt:"2025-01-01T09:00:00Z",openRate:68},{id:3,name:"Miljörum tips",recipients:42,status:"Skickad",sentAt:"2024-12-28T14:00:00Z",openRate:65}]),m=U(()=>i.templates),n=U(()=>{switch(c.value){case 0:return v.value.customerType||v.value.tags.length>0;case 1:return v.value.template;case 2:return v.value.subject&&v.value.content;case 3:return!0;case 4:return!0;default:return!1}});function o(P){return P<c.value?"bg-green-500 text-white":P===c.value?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}function x(P){return P<=c.value?"text-gray-900":"text-gray-500"}function p(P){return{Skickad:"bg-green-100 text-green-800",Pågår:"bg-yellow-100 text-yellow-800",Avbruten:"bg-red-100 text-red-800",Schemalagd:"bg-blue-100 text-blue-800"}[P]||"bg-gray-100 text-gray-800"}function k(){u.value=!0,c.value=0,v.value={customerType:"",tags:[],template:null,subject:"",content:"",recipientCount:0}}function _(){u.value=!1,c.value=0}function L(){c.value<b.length-1&&c.value++}function j(){c.value>0&&c.value--}function ee(P){v.value.template=P,v.value.subject=P.subject,v.value.content=P.html}function V(){g.value=!0,setTimeout(()=>{g.value=!1,u.value=!1,console.log("Campaign sent:",v.value)},2e3)}function M(){console.log("Sending test email")}function f(){console.log("Create new template")}function z(P){return new Date(P).toLocaleDateString("sv-SE")}return de(async()=>{await i.fetchTemplates()}),(P,y)=>{var h,Z;return s(),a("div",wg,[e("div",kg,[y[7]||(y[7]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Kampanjer"),e("p",{class:"text-gray-600"},"Skapa och hantera e-postkampanjer")],-1)),e("div",$g,[e("button",{onClick:y[0]||(y[0]=q=>d.value=!0),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Visa historik "),e("button",{onClick:k,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700"}," Skapa kampanj ")])]),u.value?(s(),a("div",Sg,[e("div",Cg,[y[8]||(y[8]=e("h2",{class:"text-lg font-medium text-gray-900"},"Skapa kampanj",-1)),e("button",{onClick:_,class:"text-gray-400 hover:text-gray-600"},[W(G(ge),{class:"w-6 h-6"})])]),e("div",jg,[e("div",Tg,[(s(),a(N,null,K(b,(q,re)=>e("div",{key:q.key,class:"flex items-center"},[e("div",{class:X(["flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium",o(re)])},t(re+1),3),e("span",{class:X(["ml-2 text-sm font-medium",x(re)])},t(q.label),3),re<b.length-1?(s(),oe(G(Ve),{key:0,class:"w-5 h-5 mx-4 text-gray-400"})):E("",!0)])),64))])]),e("div",Mg,[c.value===0?(s(),a("div",Ag,[y[13]||(y[13]=e("h3",{class:"text-lg font-medium text-gray-900"},"Välj målgrupp",-1)),e("div",Vg,[e("div",null,[y[10]||(y[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kundtyp",-1)),H(e("select",{"onUpdate:modelValue":y[1]||(y[1]=q=>v.value.customerType=q),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[...y[9]||(y[9]=[e("option",{value:""},"Alla kunder",-1),e("option",{value:"brf"},"BRF",-1),e("option",{value:"kommersiell"},"Kommersiell",-1),e("option",{value:"vip"},"VIP",-1)])],512),[[ie,v.value.customerType]])]),e("div",null,[y[11]||(y[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Antal mottagare",-1)),H(e("input",{"onUpdate:modelValue":y[2]||(y[2]=q=>v.value.recipientCount=q),type:"number",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"},null,512),[[Q,v.value.recipientCount]])])]),e("div",null,[y[12]||(y[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Taggar",-1)),W(xt,{tags:T,"selected-tags":v.value.tags,"onUpdate:selectedTags":y[3]||(y[3]=q=>v.value.tags=q),"allow-multiple":""},null,8,["selected-tags"])])])):E("",!0),c.value===1?(s(),a("div",zg,[y[14]||(y[14]=e("h3",{class:"text-lg font-medium text-gray-900"},"Välj mall",-1)),e("div",Eg,[(s(!0),a(N,null,K(m.value,q=>{var re;return s(),a("div",{key:q.id,onClick:le=>ee(q),class:X(["p-4 border rounded-lg cursor-pointer hover:border-blue-500 hover:bg-blue-50",((re=v.value.template)==null?void 0:re.id)===q.id?"border-blue-500 bg-blue-50":"border-gray-300"])},[e("h4",Ig,t(q.name),1),e("p",Bg,t(q.subject),1),e("div",Dg,[(s(!0),a(N,null,K(q.tags,le=>(s(),a("span",{key:le,class:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded"},t(le),1))),128))])],10,Lg)}),128))])])):E("",!0),c.value===2?(s(),a("div",Rg,[y[17]||(y[17]=e("h3",{class:"text-lg font-medium text-gray-900"},"Anpassa innehåll",-1)),e("div",null,[y[15]||(y[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ämne",-1)),H(e("input",{"onUpdate:modelValue":y[4]||(y[4]=q=>v.value.subject=q),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,v.value.subject]])]),e("div",null,[y[16]||(y[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Innehåll",-1)),H(e("textarea",{"onUpdate:modelValue":y[5]||(y[5]=q=>v.value.content=q),rows:"8",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,v.value.content]])])])):E("",!0),c.value===3?(s(),a("div",Fg,[y[18]||(y[18]=e("h3",{class:"text-lg font-medium text-gray-900"},"Förhandsvisning",-1)),e("div",Hg,[e("div",Zg,[e("h4",Pg,t(v.value.subject),1),e("div",{class:"text-sm text-gray-600",innerHTML:v.value.content},null,8,Og)])]),e("div",Ug,[e("p",null,"Mottagare: "+t(v.value.recipientCount)+" kunder",1),e("p",null,"Mall: "+t((h=v.value.template)==null?void 0:h.name),1)])])):E("",!0),c.value===4?(s(),a("div",Ng,[y[23]||(y[23]=e("h3",{class:"text-lg font-medium text-gray-900"},"Skicka kampanj",-1)),e("div",Kg,[e("div",qg,[W(G(ze),{class:"w-5 h-5 text-yellow-400"}),y[19]||(y[19]=e("div",{class:"ml-3"},[e("h4",{class:"text-sm font-medium text-yellow-800"},"Viktigt"),e("p",{class:"text-sm text-yellow-700 mt-1"}," Kontrollera att all information är korrekt innan du skickar kampanjen. ")],-1))])]),e("div",Wg,[e("div",Gg,[y[20]||(y[20]=e("span",{class:"text-sm text-gray-600"},"Mottagare:",-1)),e("span",Jg,t(v.value.recipientCount)+" kunder",1)]),e("div",Yg,[y[21]||(y[21]=e("span",{class:"text-sm text-gray-600"},"Mall:",-1)),e("span",Qg,t((Z=v.value.template)==null?void 0:Z.name),1)]),e("div",Xg,[y[22]||(y[22]=e("span",{class:"text-sm text-gray-600"},"Ämne:",-1)),e("span",e2,t(v.value.subject),1)])])])):E("",!0)]),e("div",t2,[c.value>0?(s(),a("button",{key:0,onClick:j,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Föregående ")):(s(),a("div",s2)),e("div",a2,[c.value<b.length-1?(s(),a("button",{key:0,onClick:L,disabled:!n.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"}," Nästa ",8,o2)):(s(),a("button",{key:1,onClick:V,disabled:g.value,class:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},t(g.value?"Skickar...":"Skicka kampanj"),9,r2))])])])):E("",!0),u.value?E("",!0):(s(),a("div",l2,[e("div",{class:"bg-white rounded-lg shadow-sm border p-6"},[y[24]||(y[24]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Snabbval",-1)),e("div",{class:"space-y-3"},[e("button",{onClick:M,class:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Skicka testmail "),e("button",{onClick:f,class:"w-full px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100"}," Skapa ny mall ")])]),e("div",n2,[y[25]||(y[25]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Senaste kampanjer",-1)),e("div",i2,[(s(!0),a(N,null,K(w.value,q=>(s(),a("div",{key:q.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-md"},[e("div",null,[e("p",d2,t(q.name),1),e("p",u2,t(q.recipients)+" mottagare",1)]),e("span",{class:X(["inline-flex px-2 py-1 text-xs font-medium rounded-full",p(q.status)])},t(q.status),3)]))),128))])]),y[26]||(y[26]=Y('<div class="bg-white rounded-lg shadow-sm border p-6"><h3 class="text-lg font-medium text-gray-900 mb-4">Statistik</h3><div class="space-y-3"><div class="flex items-center justify-between"><span class="text-sm text-gray-600">Skickade denna månad:</span><span class="text-sm font-medium">12</span></div><div class="flex items-center justify-between"><span class="text-sm text-gray-600">Öppningsgrad:</span><span class="text-sm font-medium">68%</span></div><div class="flex items-center justify-between"><span class="text-sm text-gray-600">Klickgrad:</span><span class="text-sm font-medium">12%</span></div></div></div>',1))])),d.value?(s(),oe(Ze,{key:2,title:"Kampanjhistorik",onClose:y[6]||(y[6]=q=>d.value=!1),"show-actions":!1},{default:J(()=>[e("div",c2,[(s(!0),a(N,null,K(R.value,q=>(s(),a("div",{key:q.id,class:"flex items-center justify-between p-4 border rounded-lg"},[e("div",null,[e("h4",p2,t(q.name),1),e("p",m2,t(q.recipients)+" mottagare • "+t(z(q.sentAt)),1)]),e("div",g2,[e("span",{class:X(["inline-flex px-2 py-1 text-xs font-medium rounded-full",p(q.status)])},t(q.status),3),e("p",v2,t(q.openRate)+"% öppningsgrad",1)])]))),128))])]),_:1})):E("",!0)])}}}),b2={class:"space-y-6"},f2={class:"flex items-center justify-between"},y2={class:"flex items-center space-x-3"},h2=["disabled"],_2=["disabled"],w2={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},k2={class:"bg-white rounded-lg shadow-sm border p-6"},$2={class:"flex items-center"},S2={class:"flex-shrink-0"},C2={class:"ml-4"},j2={class:"text-2xl font-semibold text-gray-900"},T2={class:"bg-white rounded-lg shadow-sm border p-6"},M2={class:"flex items-center"},A2={class:"flex-shrink-0"},V2={class:"ml-4"},z2={class:"text-2xl font-semibold text-gray-900"},E2={class:"bg-white rounded-lg shadow-sm border p-6"},L2={class:"flex items-center"},I2={class:"flex-shrink-0"},B2={class:"ml-4"},D2={class:"text-2xl font-semibold text-gray-900"},R2={class:"bg-white rounded-lg shadow-sm border p-6"},F2={class:"flex items-center"},H2={class:"flex-shrink-0"},Z2={class:"ml-4"},P2={class:"text-2xl font-semibold text-gray-900"},O2={class:"bg-white rounded-lg shadow-sm border p-6"},U2={class:"flex items-center space-x-4"},N2={class:"text-sm text-gray-600"},K2={class:"flex items-center space-x-2"},q2={class:"text-sm font-medium text-gray-900"},W2={class:"text-sm text-gray-600"},G2={class:"flex items-center space-x-2"},J2={class:"text-sm"},Y2={class:"text-sm text-gray-900"},Q2={class:"text-xs text-gray-500"},X2={key:0,class:"flex items-center space-x-2"},ev={class:"text-sm text-gray-600"},tv=["disabled"],sv={class:"text-center"},av={key:0,class:"fixed inset-0 z-50 overflow-hidden"},ov={class:"absolute right-0 top-0 h-full w-96 bg-white shadow-xl"},rv={class:"space-y-4"},lv={class:"space-y-2"},nv={class:"flex items-center justify-between"},iv={class:"text-sm font-medium"},dv={class:"flex items-center justify-between"},uv={class:"text-sm"},cv={class:"flex items-center justify-between"},pv={class:"text-sm"},mv={class:"flex items-center justify-between"},gv={class:"text-sm"},vv={class:"bg-red-50 border border-red-200 rounded-lg p-3"},xv={class:"text-sm text-red-800"},bv={class:"space-y-4"},fv={class:"space-y-3"},yv={class:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg"},hv={class:"text-sm text-yellow-700"},_v={class:"p-3 bg-blue-50 border border-blue-200 rounded-lg"},wv={class:"text-sm text-blue-700"},kv={class:"space-y-4"},$v={class:"space-y-3"},Sv={class:"flex-1"},Cv={class:"flex items-center justify-between"},jv={class:"text-sm font-medium text-gray-900"},Tv={class:"text-xs text-gray-500"},Mv={class:"text-sm text-gray-600 mt-1"},Av=se({__name:"DeadLettersView",setup(r){const i=S(!1),u=S(!1),d=S(null),c=S(null),g=S([]),v=S({}),b=S([{id:1,errorType:"Email Delivery Failed",source:"Campaign System",attempts:3,lastError:"SMTP server timeout",lastErrorAt:"2025-01-08T14:30:00Z",attemptHistory:[{timestamp:"2025-01-08T14:30:00Z",success:!1,error:"SMTP server timeout"},{timestamp:"2025-01-08T14:25:00Z",success:!1,error:"Connection refused"},{timestamp:"2025-01-08T14:20:00Z",success:!1,error:"Invalid recipient"}]},{id:2,errorType:"Order Export Failed",source:"Order Management",attempts:2,lastError:"BL API authentication failed",lastErrorAt:"2025-01-08T13:45:00Z",attemptHistory:[{timestamp:"2025-01-08T13:45:00Z",success:!1,error:"BL API authentication failed"},{timestamp:"2025-01-08T13:40:00Z",success:!1,error:"Invalid order format"}]},{id:3,errorType:"Customer Sync Failed",source:"Sync Service",attempts:5,lastError:"Database connection timeout",lastErrorAt:"2025-01-08T12:15:00Z",attemptHistory:[{timestamp:"2025-01-08T12:15:00Z",success:!1,error:"Database connection timeout"},{timestamp:"2025-01-08T12:10:00Z",success:!1,error:"Database connection timeout"},{timestamp:"2025-01-08T12:05:00Z",success:!1,error:"Database connection timeout"},{timestamp:"2025-01-08T12:00:00Z",success:!1,error:"Database connection timeout"},{timestamp:"2025-01-08T11:55:00Z",success:!1,error:"Database connection timeout"}]}]),T=[{key:"errorType",label:"Feltyp",options:[{value:"Email Delivery Failed",label:"Email Delivery Failed"},{value:"Order Export Failed",label:"Order Export Failed"},{value:"Customer Sync Failed",label:"Customer Sync Failed"},{value:"API Timeout",label:"API Timeout"}]},{key:"source",label:"Källa",options:[{value:"Campaign System",label:"Campaign System"},{value:"Order Management",label:"Order Management"},{value:"Sync Service",label:"Sync Service"},{value:"Email Service",label:"Email Service"}]}],w=[{key:"error-type",label:"Feltyp",sortable:!0},{key:"source",label:"Källa",sortable:!0},{key:"attempts",label:"Försök",sortable:!0},{key:"last-error",label:"Senaste fel",sortable:!0},{key:"lastErrorAt",label:"Senaste fel",sortable:!0}],R=[{key:"summary",label:"Sammanfattning",icon:"div"},{key:"root-cause",label:"Root Cause",icon:"div"},{key:"attempts",label:"Försök",icon:"div"}],m=[{key:"reprocess",label:"Reprocessa",variant:"primary"},{key:"ignore",label:"Ignorera",variant:"secondary"}],n=U(()=>{let D=b.value;if(v.value.search){const C=v.value.search.toLowerCase();D=D.filter(l=>l.errorType.toLowerCase().includes(C)||l.source.toLowerCase().includes(C)||l.lastError.toLowerCase().includes(C))}return v.value.errorType&&(D=D.filter(C=>C.errorType===v.value.errorType)),v.value.source&&(D=D.filter(C=>C.source===v.value.source)),v.value.dateFrom&&(D=D.filter(C=>new Date(C.lastErrorAt)>=new Date(v.value.dateFrom))),v.value.dateTo&&(D=D.filter(C=>new Date(C.lastErrorAt)<=new Date(v.value.dateTo))),D.sort((C,l)=>new Date(l.lastErrorAt).getTime()-new Date(C.lastErrorAt).getTime())}),o=U(()=>b.value.filter(D=>D.attempts<5).length),x=U(()=>12),p=U(()=>b.value.filter(D=>D.attempts>=5).length);function k(D){v.value=D}function _(){v.value={}}function L(D){D?g.value=[...n.value]:g.value=[]}function j(D,C){if(C)g.value.push(D);else{const l=g.value.findIndex(I=>I.id===D.id);l>-1&&g.value.splice(l,1)}}function ee(D){c.value=D}function V(){c.value=null}function M(D){D==="reprocess"?O(c.value):D==="ignore"&&B(c.value)}function f(D){console.log("Sort by:",D)}function z(D){return D>=5?"bg-red-100 text-red-800":D>=3?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}function P(D){return D>=5?"Permanent fel":D>=3?"Många försök":"Nya försök"}function y(D){return{"Email Delivery Failed":"SMTP-server är otillgänglig eller konfigurationen är felaktig","Order Export Failed":"BL Administration API-nycklar är ogiltiga eller har upphört","Customer Sync Failed":"Databasanslutning är instabil eller överbelastad","API Timeout":"Externa API:er svarar för långsamt eller är otillgängliga"}[D]||"Okänd orsak"}function h(D){return{"Email Delivery Failed":"Kontrollera SMTP-inställningar och testa anslutningen","Order Export Failed":"Uppdatera API-nycklar i inställningar och testa anslutningen","Customer Sync Failed":"Kontrollera databasanslutning och överväg att skala upp","API Timeout":"Implementera retry-logik med exponentiell backoff"}[D]||"Kontakta systemadministratör"}function Z(D){const C=new Date(D),I=new Date().getTime()-C.getTime(),A=Math.floor(I/6e4);return A<1?"Nu":A<60?`${A}m sedan`:A<1440?`${Math.floor(A/60)}h sedan`:C.toLocaleDateString("sv-SE")}function q(D){return new Date(D).toLocaleString("sv-SE")}function re(){i.value=!0,setTimeout(()=>{i.value=!1},1e3)}function le(){u.value=!0,setTimeout(()=>{u.value=!1,g.value=[],console.log("Reprocessed dead letters:",g.value)},2e3)}function O(D){console.log("Reprocessing dead letter:",D),V()}function B(D){console.log("Ignoring dead letter:",D),V()}return(D,C)=>(s(),a("div",b2,[e("div",f2,[C[0]||(C[0]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Dead Letters"),e("p",{class:"text-gray-600"},"Hantera misslyckade meddelanden och fel")],-1)),e("div",y2,[e("button",{onClick:re,disabled:i.value,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50"},t(i.value?"Laddar...":"Uppdatera"),9,h2),g.value.length>0?(s(),a("button",{key:0,onClick:le,disabled:u.value,class:"px-4 py-2 text-sm font-medium text-white bg-orange-600 border border-transparent rounded-md hover:bg-orange-700 disabled:opacity-50"},t(u.value?"Reprocessar...":`Reprocessa ${g.value.length} valda`),9,_2)):E("",!0)])]),e("div",w2,[e("div",k2,[e("div",$2,[e("div",S2,[W(G(ze),{class:"w-8 h-8 text-red-500"})]),e("div",C2,[C[1]||(C[1]=e("p",{class:"text-sm font-medium text-gray-600"},"Totalt fel",-1)),e("p",j2,t(b.value.length),1)])])]),e("div",T2,[e("div",M2,[e("div",A2,[W(G(Gt),{class:"w-8 h-8 text-yellow-500"})]),e("div",V2,[C[2]||(C[2]=e("p",{class:"text-sm font-medium text-gray-600"},"Väntar på reprocess",-1)),e("p",z2,t(o.value),1)])])]),e("div",E2,[e("div",L2,[e("div",I2,[W(G(Ne),{class:"w-8 h-8 text-green-500"})]),e("div",B2,[C[3]||(C[3]=e("p",{class:"text-sm font-medium text-gray-600"},"Reprocessade idag",-1)),e("p",D2,t(x.value),1)])])]),e("div",R2,[e("div",F2,[e("div",H2,[W(G(es),{class:"w-8 h-8 text-gray-500"})]),e("div",Z2,[C[4]||(C[4]=e("p",{class:"text-sm font-medium text-gray-600"},"Permanent fel",-1)),e("p",P2,t(p.value),1)])])])]),e("div",O2,[W(Fe,{"show-date-range":!0,"select-filters":T,onFilterChange:k},{actions:J(()=>[e("button",{onClick:_,class:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800"}," Rensa alla ")]),_:1})]),W(Re,{title:"Dead Letters",items:n.value,columns:w,loading:i.value,error:d.value,selectable:"","selected-items":g.value,"show-filters":"",onSelectAll:L,onSelectItem:j,onRowClick:ee,onSort:f},{filters:J(()=>[e("div",U2,[e("div",N2,t(n.value.length)+" av "+t(b.value.length)+" fel ",1)])]),"cell-error-type":J(({item:l})=>[e("div",K2,[W(G(ze),{class:"w-4 h-4 text-red-500"}),e("span",q2,t(l.errorType),1)])]),"cell-source":J(({item:l})=>[e("span",W2,t(l.source),1)]),"cell-attempts":J(({item:l})=>[e("div",G2,[e("span",J2,t(l.attempts),1),e("span",{class:X(["inline-flex px-2 py-1 text-xs font-medium rounded-full",z(l.attempts)])},t(P(l.attempts)),3)])]),"cell-last-error":J(({item:l})=>[e("div",null,[e("p",Y2,t(l.lastError),1),e("p",Q2,t(Z(l.lastErrorAt)),1)])]),"header-actions":J(()=>[g.value.length>0?(s(),a("div",X2,[e("span",ev,t(g.value.length)+" valda",1),e("button",{onClick:le,disabled:u.value,class:"px-3 py-1 text-sm bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50"}," Reprocessa valda ",8,tv)])):E("",!0)]),"empty-actions":J(()=>[e("div",sv,[W(G(Ne),{class:"w-12 h-12 text-green-500 mx-auto mb-4"}),C[5]||(C[5]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Inga dead letters",-1)),C[6]||(C[6]=e("p",{class:"text-gray-600"},"Alla meddelanden har bearbetats framgångsrikt!",-1))])]),_:1},8,["items","loading","error","selected-items"]),c.value?(s(),a("div",av,[e("div",{class:"absolute inset-0 bg-gray-500 bg-opacity-75",onClick:V}),e("div",ov,[W(He,{title:`Dead Letter ${c.value.id}`,tabs:R,actions:m,onClose:V,onAction:M},{"tab-summary":J(()=>[e("div",rv,[e("div",null,[C[11]||(C[11]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Felinformation",-1)),e("div",lv,[e("div",nv,[C[7]||(C[7]=e("span",{class:"text-sm text-gray-600"},"Feltyp:",-1)),e("span",iv,t(c.value.errorType),1)]),e("div",dv,[C[8]||(C[8]=e("span",{class:"text-sm text-gray-600"},"Källa:",-1)),e("span",uv,t(c.value.source),1)]),e("div",cv,[C[9]||(C[9]=e("span",{class:"text-sm text-gray-600"},"Försök:",-1)),e("span",pv,t(c.value.attempts),1)]),e("div",mv,[C[10]||(C[10]=e("span",{class:"text-sm text-gray-600"},"Senaste fel:",-1)),e("span",gv,t(q(c.value.lastErrorAt)),1)])])]),e("div",null,[C[12]||(C[12]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Felmeddelande",-1)),e("div",vv,[e("p",xv,t(c.value.lastError),1)])])])]),"tab-root-cause":J(()=>[e("div",bv,[e("div",null,[C[15]||(C[15]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Root Cause Analysis",-1)),e("div",fv,[e("div",yv,[C[13]||(C[13]=e("h5",{class:"text-sm font-medium text-yellow-800 mb-1"},"Identifierat problem",-1)),e("p",hv,t(y(c.value.errorType)),1)]),e("div",_v,[C[14]||(C[14]=e("h5",{class:"text-sm font-medium text-blue-800 mb-1"},"Föreslagen lösning",-1)),e("p",wv,t(h(c.value.errorType)),1)])])])])]),"tab-attempts":J(()=>[e("div",kv,[e("div",null,[C[16]||(C[16]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Försökshistorik",-1)),e("div",$v,[(s(!0),a(N,null,K(c.value.attemptHistory,(l,I)=>(s(),a("div",{key:I,class:"flex items-start space-x-3 p-3 border rounded-lg"},[e("div",{class:X(["w-2 h-2 rounded-full mt-2",l.success?"bg-green-500":"bg-red-500"])},null,2),e("div",Sv,[e("div",Cv,[e("span",jv,"Försök "+t(I+1),1),e("span",Tv,t(q(l.timestamp)),1)]),e("p",Mv,t(l.error||"Framgångsrikt"),1)])]))),128))])])])]),_:1},8,["title"])])])):E("",!0)]))}}),Vv={class:"max-w-screen-xl mx-auto px-4"},zv={class:"flex items-center justify-between mb-8"},Ev={class:"flex items-center space-x-4"},Lv={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Iv={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-200"},Bv={class:"text-center"},Dv={class:"text-3xl font-bold text-blue-600 mb-2"},Rv={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-200"},Fv={class:"text-center"},Hv={class:"text-3xl font-bold text-red-600 mb-2"},Zv={class:"text-xs text-gray-400 mt-1"},Pv={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-200"},Ov={class:"text-center"},Uv={class:"text-3xl font-bold text-yellow-600 mb-2"},Nv={class:"text-xs text-gray-400 mt-1"},Kv={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-200"},qv={class:"text-center"},Wv={class:"text-3xl font-bold text-green-600 mb-2"},Gv={class:"text-xs text-gray-400 mt-1"},Jv={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 mb-6"},Yv={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Qv={class:"flex justify-between items-center mt-4"},Xv={class:"text-sm text-gray-500"},ex={class:"flex space-x-2"},tx={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},sx={class:"overflow-x-auto"},ax={class:"min-w-full divide-y divide-gray-200"},ox={class:"bg-white divide-y divide-gray-200"},rx={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},lx={class:"flex items-center space-x-2"},nx={class:"px-6 py-4 whitespace-nowrap"},ix={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},dx={class:"flex items-center space-x-2"},ux={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},cx={class:"font-mono text-xs bg-gray-100 px-2 py-1 rounded"},px={class:"px-6 py-4 text-sm text-gray-900 max-w-md"},mx={class:"truncate"},gx={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},vx=["onClick"],xx={colspan:"6",class:"px-6 py-4"},bx={class:"bg-white rounded-lg p-4 border border-gray-200"},fx={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},yx={class:"space-y-2 text-sm"},hx={class:"flex justify-between"},_x={class:"font-mono"},wx={class:"flex justify-between"},kx={class:"flex justify-between"},$x={key:0},Sx={class:"space-y-2 text-sm"},Cx={key:0,class:"flex justify-between"},jx={key:1,class:"flex justify-between"},Tx={key:2,class:"flex justify-between"},Mx={class:"font-mono text-red-600"},Ax={key:3,class:"flex justify-between"},Vx={key:4,class:"flex justify-between"},zx={class:"font-mono"},Ex={key:5,class:"flex justify-between"},Lx={class:"font-mono text-xs"},Ix={class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},Bx={class:"flex items-center justify-between"},Dx={class:"text-sm text-gray-500"},Rx={class:"flex space-x-2"},Fx=["disabled"],Hx={class:"px-3 py-2 text-sm text-gray-700"},Zx=["disabled"],Px=se({__name:"LogsView",setup(r){const i=S(!1);S(!1),S(!1),S(null);const u=S({}),d=S([]);S(!0);const c=U(()=>{let m=d.value;if(u.value.search){const n=u.value.search.toLowerCase();m=m.filter(o=>{var x;return o.module.toLowerCase().includes(n)||o.action.toLowerCase().includes(n)||((x=o.custom_msg)==null?void 0:x.toLowerCase().includes(n))})}return u.value.level&&(m=m.filter(n=>n.level===u.value.level)),u.value.module&&(m=m.filter(n=>n.module===u.value.module)),u.value.dateFrom&&(m=m.filter(n=>new Date(n.created_at)>=new Date(u.value.dateFrom))),u.value.dateTo&&(m=m.filter(n=>new Date(n.created_at)<=new Date(u.value.dateTo))),m.sort((n,o)=>new Date(o.created_at).getTime()-new Date(n.created_at).getTime())});function g(m){const n=new Date(m),x=new Date().getTime()-n.getTime(),p=Math.floor(x/6e4);return p<1?"Nu":p<60?`${p}m sedan`:p<1440?`${Math.floor(p/60)}h sedan`:n.toLocaleDateString("sv-SE")}function v(m){return new Date(m).toLocaleString("sv-SE")}function b(){i.value=!0,setTimeout(()=>{w(),i.value=!1},1e3)}function T(){console.log("Exporting logs")}function w(){d.value=R(20)}function R(m){const n=["debug","info","warn","error"],o=["sync","email","order","customer","api"],x=["create","update","delete","import","export","validate","process"],p=["Operation completed successfully","Validation failed","Import started","Export completed","Customer created","Order updated","Sync in progress","Email sent","API call failed","Data processed"];return Array.from({length:m},(k,_)=>({id:d.value.length+_+1,created_at:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),expires_at:new Date(Date.now()+30*24*60*60*1e3).toISOString(),level:n[Math.floor(Math.random()*n.length)],module:o[Math.floor(Math.random()*o.length)],action:x[Math.floor(Math.random()*x.length)],custom_msg:Math.random()>.3?p[Math.floor(Math.random()*p.length)]:null}))}return de(()=>{w()}),(m,n)=>(s(),a("div",Vv,[e("div",zv,[n[10]||(n[10]=Y('<div class="flex items-center space-x-4"><div class="p-3 bg-purple-100 rounded-xl"><svg class="w-8 h-8 text-purple-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></div><div><h1 class="text-3xl font-bold text-gray-900">Systemloggar</h1><p class="text-gray-600 mt-1">Systemloggar, debugging och utvecklingsverktyg</p></div></div>',1)),e("div",Ev,[e("button",{onClick:b,class:"px-6 py-3 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 shadow-sm hover:shadow-md flex items-center space-x-2"},[...n[8]||(n[8]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1),e("span",null,"Uppdatera",-1)])]),e("button",{onClick:n[0]||(n[0]=(...o)=>m.clearLogs&&m.clearLogs(...o)),class:"px-6 py-3 text-sm font-semibold text-white bg-red-600 border border-transparent rounded-xl hover:bg-red-700 hover:shadow-lg transition-all duration-200 shadow-sm flex items-center space-x-2"},[...n[9]||(n[9]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z","clip-rule":"evenodd"}),e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),e("span",null,"Rensa loggar",-1)])])])]),e("div",Lv,[e("div",Iv,[e("div",Bv,[e("div",Dv,t(m.totalLogs.toLocaleString()),1),n[11]||(n[11]=e("div",{class:"text-sm text-gray-500 font-medium"},"Totalt loggar",-1)),n[12]||(n[12]=e("div",{class:"text-xs text-gray-400 mt-1"},"Senaste 24h",-1))])]),e("div",Rv,[e("div",Fv,[e("div",Hv,t(m.errorCount.toLocaleString()),1),n[13]||(n[13]=e("div",{class:"text-sm text-gray-500 font-medium"},"Fel",-1)),e("div",Zv,t(Math.round(m.errorCount/m.totalLogs*100))+"% av totalt",1)])]),e("div",Pv,[e("div",Ov,[e("div",Uv,t(m.warningCount.toLocaleString()),1),n[14]||(n[14]=e("div",{class:"text-sm text-gray-500 font-medium"},"Varningar",-1)),e("div",Nv,t(Math.round(m.warningCount/m.totalLogs*100))+"% av totalt",1)])]),e("div",Kv,[e("div",qv,[e("div",Wv,t(m.infoCount.toLocaleString()),1),n[15]||(n[15]=e("div",{class:"text-sm text-gray-500 font-medium"},"Info",-1)),e("div",Gv,t(Math.round(m.infoCount/m.totalLogs*100))+"% av totalt",1)])])]),e("div",Jv,[n[23]||(n[23]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Filtrera loggar",-1)),e("div",Yv,[e("div",null,[n[17]||(n[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nivå",-1)),H(e("select",{"onUpdate:modelValue":n[1]||(n[1]=o=>u.value.level=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},[...n[16]||(n[16]=[Y('<option value="">Alla nivåer</option><option value="ERROR">Error</option><option value="WARN">Warning</option><option value="INFO">Info</option><option value="DEBUG">Debug</option>',5)])],512),[[ie,u.value.level]])]),e("div",null,[n[19]||(n[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Modul",-1)),H(e("select",{"onUpdate:modelValue":n[2]||(n[2]=o=>u.value.module=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},[...n[18]||(n[18]=[Y('<option value="">Alla moduler</option><option value="Fetcher">Fetcher</option><option value="Ingestor">Ingestor</option><option value="DbWriter">DbWriter</option><option value="DeadLetter">DeadLetter</option><option value="CommandBus">CommandBus</option><option value="Rocket">Rocket</option><option value="EmailService">EmailService</option><option value="AuthService">AuthService</option><option value="PaymentService">PaymentService</option><option value="NotificationService">NotificationService</option>',11)])],512),[[ie,u.value.module]])]),e("div",null,[n[21]||(n[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Åtgärd",-1)),H(e("select",{"onUpdate:modelValue":n[3]||(n[3]=o=>u.value.action=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},[...n[20]||(n[20]=[Y('<option value="">Alla åtgärder</option><option value="FETCH">Fetch</option><option value="UPSERT">Upsert</option><option value="REPROCESS">Reprocess</option><option value="ERROR">Error</option><option value="SUCCESS">Success</option><option value="RETRY">Retry</option><option value="TIMEOUT">Timeout</option><option value="VALIDATION">Validation</option><option value="SEND">Send</option><option value="RECEIVE">Receive</option><option value="PROCESS">Process</option><option value="ARCHIVE">Archive</option>',13)])],512),[[ie,u.value.action]])]),e("div",null,[n[22]||(n[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sök",-1)),H(e("input",{"onUpdate:modelValue":n[4]||(n[4]=o=>u.value.search=o),type:"text",placeholder:"Sök i meddelanden...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},null,512),[[Q,u.value.search]])])]),e("div",Qv,[e("div",Xv," Visar "+t(c.value.length)+" av "+t(m.totalLogs)+" loggar ",1),e("div",ex,[e("button",{onClick:n[5]||(n[5]=(...o)=>m.clearFilters&&m.clearFilters(...o)),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"}," Rensa filter "),e("button",{onClick:T,class:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors"}," Exportera ")])])]),e("div",tx,[n[39]||(n[39]=Y('<div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50"><div class="flex items-center space-x-3"><div class="p-2 bg-purple-100 rounded-lg"><svg class="w-5 h-5 text-purple-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></div><h3 class="text-lg font-bold text-gray-900"> Systemloggar </h3></div></div>',1)),e("div",sx,[e("table",ax,[n[38]||(n[38]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Tid "),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Nivå "),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Modul "),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Åtgärd "),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Meddelande "),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Detaljer ")])],-1)),e("tbody",ox,[(s(!0),a(N,null,K(m.paginatedLogs,o=>(s(),a("tr",{key:o.id,class:"hover:bg-gray-50 transition-colors duration-200"},[e("td",rx,[e("div",lx,[n[24]||(n[24]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),e("span",null,t(g(o.created_at)),1)])]),e("td",nx,[e("span",{class:X(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold",m.getLevelClass(o.level)])},t(o.level),3)]),e("td",ix,[e("div",dx,[n[25]||(n[25]=e("div",{class:"p-1 bg-gray-100 rounded"},[e("svg",{class:"w-3 h-3 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})])],-1)),e("span",null,t(o.module),1)])]),e("td",ux,[e("span",cx,t(o.action),1)]),e("td",px,[e("div",mx,t(o.custom_msg),1)]),e("td",gx,[e("button",{onClick:x=>m.toggleLogDetails(o.id),class:"text-purple-600 hover:text-purple-800 font-medium"},t(m.expandedLogs.has(o.id)?"Dölj":"Visa"),9,vx)])]))),128)),(s(!0),a(N,null,K(m.paginatedLogs,o=>H((s(),a("tr",{key:`details-${o.id}`,class:"bg-gray-50"},[e("td",xx,[e("div",bx,[n[37]||(n[37]=e("h4",{class:"font-semibold text-gray-900 mb-3"},"Loggdetaljer",-1)),e("div",fx,[e("div",null,[n[29]||(n[29]=e("h5",{class:"text-sm font-medium text-gray-700 mb-2"},"Grundläggande information",-1)),e("div",yx,[e("div",hx,[n[26]||(n[26]=e("span",{class:"text-gray-500"},"ID:",-1)),e("span",_x,t(o.id),1)]),e("div",wx,[n[27]||(n[27]=e("span",{class:"text-gray-500"},"Skapad:",-1)),e("span",null,t(v(o.created_at)),1)]),e("div",kx,[n[28]||(n[28]=e("span",{class:"text-gray-500"},"Expirerar:",-1)),e("span",null,t(v(o.expires_at)),1)])])]),o.details?(s(),a("div",$x,[n[36]||(n[36]=e("h5",{class:"text-sm font-medium text-gray-700 mb-2"},"Detaljer",-1)),e("div",Sx,[o.details.duration?(s(),a("div",Cx,[n[30]||(n[30]=e("span",{class:"text-gray-500"},"Varaktighet:",-1)),e("span",null,t(o.details.duration)+"ms",1)])):E("",!0),o.details.records_affected?(s(),a("div",jx,[n[31]||(n[31]=e("span",{class:"text-gray-500"},"Poster påverkade:",-1)),e("span",null,t(o.details.records_affected),1)])):E("",!0),o.details.error_code?(s(),a("div",Tx,[n[32]||(n[32]=e("span",{class:"text-gray-500"},"Felkod:",-1)),e("span",Mx,t(o.details.error_code),1)])):E("",!0),o.details.retry_count?(s(),a("div",Ax,[n[33]||(n[33]=e("span",{class:"text-gray-500"},"Försök:",-1)),e("span",null,t(o.details.retry_count),1)])):E("",!0),o.details.user_id?(s(),a("div",Vx,[n[34]||(n[34]=e("span",{class:"text-gray-500"},"Användar-ID:",-1)),e("span",zx,t(o.details.user_id),1)])):E("",!0),o.details.request_id?(s(),a("div",Ex,[n[35]||(n[35]=e("span",{class:"text-gray-500"},"Request-ID:",-1)),e("span",Lx,t(o.details.request_id),1)])):E("",!0)])])):E("",!0)])])])])),[[Ie,m.expandedLogs.has(o.id)]])),128))])])]),e("div",Ix,[e("div",Bx,[e("div",Dx," Visar "+t((m.currentPage-1)*m.itemsPerPage+1)+" till "+t(Math.min(m.currentPage*m.itemsPerPage,c.value.length))+" av "+t(c.value.length)+" loggar ",1),e("div",Rx,[e("button",{onClick:n[6]||(n[6]=o=>m.currentPage=Math.max(1,m.currentPage-1)),disabled:m.currentPage===1,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Föregående ",8,Fx),e("span",Hx," Sida "+t(m.currentPage)+" av "+t(m.totalPages),1),e("button",{onClick:n[7]||(n[7]=o=>m.currentPage=Math.min(m.totalPages,m.currentPage+1)),disabled:m.currentPage===m.totalPages,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Nästa ",8,Zx)])])])])]))}}),Ox={class:"space-y-6"},Ux={class:"flex items-center justify-between"},Nx={class:"flex items-center space-x-3"},Kx=["disabled"],qx=["disabled"],Wx={key:0,class:"bg-white rounded-lg shadow-sm border p-6"},Gx={class:"flex items-center justify-between mb-4"},Jx={class:"space-y-4"},Yx={class:"flex items-center justify-between"},Qx={class:"text-sm font-medium"},Xx={class:"w-full bg-gray-200 rounded-full h-2"},eb={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},tb={class:"text-center"},sb={class:"text-lg font-semibold text-gray-900"},ab={class:"text-center"},ob={class:"text-lg font-semibold text-gray-900"},rb={class:"text-center"},lb={class:"text-lg font-semibold text-gray-900"},nb={class:"text-center"},ib={class:"text-lg font-semibold text-gray-900"},db={class:"flex items-center justify-between text-sm text-gray-600"},ub={key:0},cb={class:"bg-white rounded-lg shadow-sm border"},pb={class:"overflow-x-auto"},mb={class:"min-w-full divide-y divide-gray-200"},gb={class:"bg-white divide-y divide-gray-200"},vb={class:"px-6 py-4 whitespace-nowrap"},xb={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},bb={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},fb={key:0,class:"text-red-600 ml-1"},yb={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},hb={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},_b={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},wb=["onClick"],kb={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},$b={class:"bg-white rounded-lg shadow-sm border p-6"},Sb={class:"space-y-4"},Cb={class:"flex items-center space-x-3"},jb={key:0},Tb={class:"text-sm text-gray-600"},Mb={class:"bg-white rounded-lg shadow-sm border p-6"},Ab={class:"space-y-4"},Vb={class:"space-y-4"},zb={class:"grid grid-cols-2 gap-4"},Eb={class:"text-sm text-gray-600"},Lb={class:"grid grid-cols-3 gap-4"},Ib={class:"text-center p-3 bg-gray-50 rounded"},Bb={class:"text-lg font-semibold text-gray-900"},Db={class:"text-center p-3 bg-gray-50 rounded"},Rb={class:"text-lg font-semibold text-gray-900"},Fb={class:"text-center p-3 bg-gray-50 rounded"},Hb={class:"text-lg font-semibold text-gray-900"},Zb={class:"space-y-2 text-sm text-gray-600"},Pb={class:"flex justify-between"},Ob={class:"flex justify-between"},Ub={class:"flex justify-between"},Nb={key:0},Kb={class:"bg-red-50 border border-red-200 rounded-lg p-3"},qb={class:"text-sm text-red-800"},Wb=se({__name:"SyncView",setup(r){const i=S(!1),u=S(null),d=S(null),c=S({autoSync:!0,interval:60,batchSize:100,timeout:300,maxRetries:3}),g=S([{id:1,status:"completed",type:"Customer Import",processed:45,total:45,errors:0,duration:120,startedAt:"2025-01-08T10:00:00Z",completedAt:"2025-01-08T10:02:00Z"},{id:2,status:"completed",type:"Order Export",processed:23,total:23,errors:1,duration:45,startedAt:"2025-01-08T09:30:00Z",completedAt:"2025-01-08T09:30:45Z",errorMessage:"Order PO-203 export failed"},{id:3,status:"failed",type:"Email Sync",processed:12,total:50,errors:3,duration:180,startedAt:"2025-01-08T08:00:00Z",completedAt:"2025-01-08T08:03:00Z",errorMessage:"SMTP server timeout"}]),v=U(()=>{if(!c.value.autoSync)return"Schemalagd synk inaktiverad";const k=new Date;return new Date(k.getTime()+c.value.interval*60*1e3).toLocaleString("sv-SE")});function b(k){return{running:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",paused:"bg-yellow-100 text-yellow-800"}[k]||"bg-gray-100 text-gray-800"}function T(k){return{running:"Körs",completed:"Slutförd",failed:"Misslyckades",paused:"Pausad"}[k]||k}function w(k){const _=Math.floor(k/60),L=k%60;return _>0?`${_}m ${L}s`:`${L}s`}function R(k){return new Date(k).toLocaleString("sv-SE")}function m(){i.value=!0,u.value={id:Date.now(),status:"running",type:"Full Sync",processed:0,total:100,errors:0,duration:0,startedAt:new Date().toISOString(),estimatedCompletion:new Date(Date.now()+5*60*1e3).toISOString()};const k=setInterval(()=>{if(!u.value){clearInterval(k);return}u.value.processed+=Math.floor(Math.random()*5)+1,u.value.duration+=1,u.value.processed>=u.value.total&&(u.value.status="completed",u.value.completedAt=new Date().toISOString(),i.value=!1,clearInterval(k),g.value.unshift(u.value),u.value=null)},1e3)}function n(){u.value&&(u.value.status="paused",i.value=!1)}function o(k){d.value=k}function x(){d.value=null}function p(){console.log("Saving sync config:",c.value),setTimeout(()=>{console.log("Sync config saved")},1e3)}return(k,_)=>(s(),a("div",Ox,[e("div",Ux,[_[5]||(_[5]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Sync"),e("p",{class:"text-gray-600"},"Hantera datasynkronisering och import/export")],-1)),e("div",Nx,[e("button",{onClick:n,disabled:!i.value,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50"}," Pausa ",8,Kx),e("button",{onClick:m,disabled:i.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50"},t(i.value?"Körs...":"Starta Sync"),9,qx)])]),u.value?(s(),a("div",Wx,[e("div",Gx,[_[6]||(_[6]=e("h3",{class:"text-lg font-medium text-gray-900"},"Aktiv synk",-1)),e("span",{class:X(["inline-flex px-2 py-1 text-xs font-medium rounded-full",b(u.value.status)])},t(T(u.value.status)),3)]),e("div",Jx,[e("div",Yx,[_[7]||(_[7]=e("span",{class:"text-sm text-gray-600"},"Progress",-1)),e("span",Qx,t(u.value.progress)+"%",1)]),e("div",Xx,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:ve({width:`${u.value.progress}%`})},null,4)]),e("div",eb,[e("div",tb,[e("p",sb,t(u.value.processed),1),_[8]||(_[8]=e("p",{class:"text-xs text-gray-600"},"Bearbetade",-1))]),e("div",ab,[e("p",ob,t(u.value.total),1),_[9]||(_[9]=e("p",{class:"text-xs text-gray-600"},"Totalt",-1))]),e("div",rb,[e("p",lb,t(u.value.errors),1),_[10]||(_[10]=e("p",{class:"text-xs text-gray-600"},"Fel",-1))]),e("div",nb,[e("p",ib,t(w(u.value.duration)),1),_[11]||(_[11]=e("p",{class:"text-xs text-gray-600"},"Varaktighet",-1))])]),e("div",db,[e("span",null,"Startad: "+t(R(u.value.startedAt)),1),u.value.estimatedCompletion?(s(),a("span",ub," Beräknad sluttid: "+t(R(u.value.estimatedCompletion)),1)):E("",!0)])])])):E("",!0),e("div",cb,[_[13]||(_[13]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Synkhistorik")],-1)),e("div",pb,[e("table",mb,[_[12]||(_[12]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Typ "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Poster "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Varaktighet "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Startad "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Åtgärder ")])],-1)),e("tbody",gb,[(s(!0),a(N,null,K(g.value,L=>(s(),a("tr",{key:L.id,class:"hover:bg-gray-50"},[e("td",vb,[e("span",{class:X(["inline-flex px-2 py-1 text-xs font-medium rounded-full",b(L.status)])},t(T(L.status)),3)]),e("td",xb,t(L.type),1),e("td",bb,[te(t(L.processed)+"/"+t(L.total)+" ",1),L.errors>0?(s(),a("span",fb," ("+t(L.errors)+" fel) ",1)):E("",!0)]),e("td",yb,t(w(L.duration)),1),e("td",hb,t(R(L.startedAt)),1),e("td",_b,[e("button",{onClick:j=>o(L),class:"text-blue-600 hover:text-blue-800"}," Visa detaljer ",8,wb)])]))),128))])])])]),e("div",kb,[e("div",$b,[_[19]||(_[19]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Schemaläggning",-1)),e("div",Sb,[e("div",null,[_[15]||(_[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Automatisk synk",-1)),e("div",Cb,[H(e("input",{"onUpdate:modelValue":_[0]||(_[0]=L=>c.value.autoSync=L),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[Be,c.value.autoSync]]),_[14]||(_[14]=e("span",{class:"text-sm text-gray-600"},"Aktivera automatisk synk",-1))])]),c.value.autoSync?(s(),a("div",jb,[_[17]||(_[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Intervall",-1)),H(e("select",{"onUpdate:modelValue":_[1]||(_[1]=L=>c.value.interval=L),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[..._[16]||(_[16]=[Y('<option value="15">Var 15:e minut</option><option value="30">Var 30:e minut</option><option value="60">Varje timme</option><option value="240">Var 4:e timme</option><option value="1440">Dagligen</option>',5)])],512),[[ie,c.value.interval]])])):E("",!0),e("div",null,[_[18]||(_[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nästa synk",-1)),e("p",Tb,t(v.value),1)])])]),e("div",Mb,[_[23]||(_[23]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Inställningar",-1)),e("div",Ab,[e("div",null,[_[20]||(_[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Batch-storlek",-1)),H(e("input",{"onUpdate:modelValue":_[2]||(_[2]=L=>c.value.batchSize=L),type:"number",min:"1",max:"1000",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,c.value.batchSize]])]),e("div",null,[_[21]||(_[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Timeout (sekunder)",-1)),H(e("input",{"onUpdate:modelValue":_[3]||(_[3]=L=>c.value.timeout=L),type:"number",min:"30",max:"3600",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,c.value.timeout]])]),e("div",null,[_[22]||(_[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Max försök",-1)),H(e("input",{"onUpdate:modelValue":_[4]||(_[4]=L=>c.value.maxRetries=L),type:"number",min:"1",max:"10",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,c.value.maxRetries]])]),e("button",{onClick:p,class:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700"}," Spara inställningar ")])])]),d.value?(s(),oe(Ze,{key:1,title:"Synkdetaljer",onClose:x,"show-actions":!1},{default:J(()=>[e("div",Vb,[e("div",zb,[e("div",null,[_[24]||(_[24]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Status",-1)),e("span",{class:X(["inline-flex px-2 py-1 text-xs font-medium rounded-full",b(d.value.status)])},t(T(d.value.status)),3)]),e("div",null,[_[25]||(_[25]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Typ",-1)),e("p",Eb,t(d.value.type),1)])]),e("div",null,[_[29]||(_[29]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Statistik",-1)),e("div",Lb,[e("div",Ib,[e("p",Bb,t(d.value.processed),1),_[26]||(_[26]=e("p",{class:"text-xs text-gray-600"},"Bearbetade",-1))]),e("div",Db,[e("p",Rb,t(d.value.total),1),_[27]||(_[27]=e("p",{class:"text-xs text-gray-600"},"Totalt",-1))]),e("div",Fb,[e("p",Hb,t(d.value.errors),1),_[28]||(_[28]=e("p",{class:"text-xs text-gray-600"},"Fel",-1))])])]),e("div",null,[_[33]||(_[33]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Tidsinformation",-1)),e("div",Zb,[e("div",Pb,[_[30]||(_[30]=e("span",null,"Startad:",-1)),e("span",null,t(R(d.value.startedAt)),1)]),e("div",Ob,[_[31]||(_[31]=e("span",null,"Slutad:",-1)),e("span",null,t(d.value.completedAt?R(d.value.completedAt):"Pågår"),1)]),e("div",Ub,[_[32]||(_[32]=e("span",null,"Varaktighet:",-1)),e("span",null,t(w(d.value.duration)),1)])])]),d.value.errors>0?(s(),a("div",Nb,[_[34]||(_[34]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Fel",-1)),e("div",Kb,[e("p",qb,t(d.value.errorMessage||"Okänt fel"),1)])])):E("",!0)])]),_:1})):E("",!0)]))}}),Pe=Tt({history:Mt(),routes:[{path:"/login",name:"login",component:Ut},{path:"/",name:"home",component:ra,meta:{requiresAuth:!0}},{path:"/customers",name:"customers",component:xr,meta:{requiresAuth:!0}},{path:"/orders",name:"orders",component:el,meta:{requiresAuth:!0}},{path:"/settings",name:"settings",component:Zl,meta:{requiresAuth:!0}},{path:"/email-management",name:"email-management",component:S0,meta:{requiresAuth:!0}},{path:"/employees",name:"employees",component:e1,meta:{requiresAuth:!0}},{path:"/invoices",name:"invoices",component:Tc,meta:{requiresAuth:!0}},{path:"/email-history",name:"email-history",component:dp,meta:{requiresAuth:!0}},{path:"/subsidiaries",name:"subsidiaries",component:cm,meta:{requiresAuth:!0}},{path:"/developer",name:"developer",component:hg,meta:{requiresAuth:!0}},{path:"/campaigns",name:"campaigns",component:x2,meta:{requiresAuth:!0}},{path:"/dead-letters",name:"dead-letters",component:Av,meta:{requiresAuth:!0}},{path:"/logs",name:"logs",component:Px,meta:{requiresAuth:!0}},{path:"/sync",name:"sync",component:Wb,meta:{requiresAuth:!0}}]}),Gb="/assets/allanit-logo-AK7-OqC-.png",Jb={class:"min-h-screen flex bg-gray-50"},Yb={class:"w-64 bg-white shadow-sm border-r border-gray-200"},Qb={class:"px-4 pb-4"},Xb={class:"space-y-1"},ef={class:"flex-1 flex flex-col"},tf={class:"bg-white shadow-sm border-b border-gray-200"},sf={class:"px-6 py-4"},af={class:"flex items-center justify-between"},of={class:"flex items-center space-x-2 text-sm"},rf={class:"flex items-center space-x-4"},lf={class:"relative"},nf={class:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center"},df=["src","alt"],uf={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-50"},cf={class:"py-1"},pf={class:"flex-1 p-6"},mf=se({__name:"Shell",setup(r){const i=At(),u=dt();S("");const d=S(!1),c=S({name:"Johan Liljenberg",image:"/medarbetare/johan.jpg"}),g=U(()=>{try{const m=localStorage.getItem("user");return m?JSON.parse(m):null}catch{return null}}),v=[{name:"Översikt",href:"/",icon:Yt},{name:"Kunder",href:"/customers",icon:Ee},{name:"Uppdrag",href:"/orders",icon:_e},{name:"E-post",href:"/email-management",icon:vt},{name:"Medarbetare",href:"/employees",icon:Le},{name:"Fakturor",href:"/invoices",icon:gt},{name:"Utskick",href:"/email-history",icon:Nt},{name:"Dotterbolag",href:"/subsidiaries",icon:Kt},{name:"Utvecklare",href:"/developer",icon:Ke},{name:"Inställningar",href:"/settings",icon:Ke}],b=U(()=>{const m=i.path.split("/").filter(Boolean),n=[];for(let o=0;o<m.length;o++){const x=m[o],p="/"+m.slice(0,o+1).join("/"),k=v.find(_=>_.href===p||_.href==="/"+x);k&&n.push({name:k.name,href:k.href})}return n});function T(m){return m==="/"?i.path==="/":i.path.startsWith(m)}function w(){d.value=!1,localStorage.removeItem("isAuthenticated"),localStorage.removeItem("user"),u.push("/login")}function R(m){const n=m.target;n.src="/medarbetare/default.jpg"}return de(()=>{document.addEventListener("click",m=>{m.target.closest(".relative")||(d.value=!1)})}),(m,n)=>{var p;const o=Te("RouterLink"),x=Te("RouterView");return s(),a("div",Jb,[e("aside",Yb,[n[2]||(n[2]=e("div",{class:"p-6"},[e("img",{src:Gb,alt:"Allanit Logo",class:"h-8 w-auto mb-4"}),e("h1",{class:"text-xl font-bold text-gray-900"},"Moderbolags Portal")],-1)),e("nav",Qb,[e("div",Xb,[(s(),a(N,null,K(v,k=>W(o,{key:k.name,to:k.href,class:X(["flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",T(k.href)?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])},{default:J(()=>[(s(),oe(he(k.icon),{class:"w-5 h-5 mr-3"})),te(" "+t(k.name),1)]),_:2},1032,["to","class"])),64))])])]),e("div",ef,[e("header",tf,[e("div",sf,[e("div",af,[e("nav",of,[W(o,{to:"/",class:"text-gray-500 hover:text-gray-700"},{default:J(()=>[...n[3]||(n[3]=[te("Home",-1)])]),_:1}),b.value.length>0?(s(),oe(G(Ve),{key:0,class:"w-4 h-4 text-gray-400"})):E("",!0),(s(!0),a(N,null,K(b.value,(k,_)=>(s(),a(N,{key:k.name},[W(o,{to:k.href,class:"text-gray-500 hover:text-gray-700"},{default:J(()=>[te(t(k.name),1)]),_:2},1032,["to"]),_<b.value.length-1?(s(),oe(G(Ve),{key:0,class:"w-4 h-4 text-gray-400"})):E("",!0)],64))),128))]),e("div",rf,[e("div",lf,[e("button",{onClick:n[0]||(n[0]=k=>d.value=!d.value),class:"flex items-center space-x-2 text-sm text-gray-700 hover:text-gray-900"},[e("div",nf,[e("img",{src:c.value.image,alt:c.value.name,class:"w-8 h-8 rounded-full object-cover border-2 border-gray-200",onError:R},null,40,df)]),e("span",null,t(((p=g.value)==null?void 0:p.name)||"Användare"),1),W(G(Wt),{class:"w-4 h-4"})]),d.value?(s(),a("div",uf,[e("div",cf,[W(o,{to:"/settings",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:n[1]||(n[1]=k=>d.value=!1)},{default:J(()=>[...n[4]||(n[4]=[te(" Inställningar ",-1)])]),_:1}),e("button",{onClick:w,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Logga ut ")])])):E("",!0)])])])])]),e("main",pf,[W(x)])])])}}}),gf=se({__name:"App",setup(r){return(i,u)=>(s(),oe(mf))}}),vf=Vt(gf);Pe.beforeEach((r,i,u)=>{const d=localStorage.getItem("isAuthenticated");console.log("🔒 Router Guard:",{to:r.path,from:i.path,isAuthenticated:!!d,requiresAuth:r.meta.requiresAuth}),r.meta.requiresAuth&&!d?(console.log("❌ Redirecting to login - not authenticated"),u("/login")):r.path==="/login"&&d?(console.log("✅ Redirecting to home - already authenticated"),u("/")):(console.log("✅ Allowing navigation to:",r.path),u())});Pe.onError(r=>{console.error("🚨 Router Error:",r)});vf.use(zt()).use(Pe).mount("#app");
